function Accordion(e){window[e]=this;var t=this,n,r,i,s,o;t.initialize=function(){n=t.settings.cssClasses.expandedSectionHeader;r=t.settings.cssClasses.sectionHeader;i=t.settings.onSectionSlideDown;s=t.settings.onSectionSlideUp;o=t.settings.onInitComplete;$.each(t.foldableSections(),function(e,n){$("#"+n.headerLink+", #"+n.header).click(function(){t.handleSectionClick(n)})});o!=null&&$(document).trigger(o,t)};t.foldableSections=function(){return $(t.sections).filter(function(e,t){return t.isFoldable})};t.handleSectionClick=function(e){e.isExpanded?t.collapseSection(e):t.expandSection(e)};t.expandSection=function(e){$("#"+e.header).removeClass(r).addClass(n);$("#"+e.content).slideDown(t.settings.animationDuration,function(){i!=null&&$(document).trigger(i,e.content)});e.isExpanded=!e.isExpanded};t.collapseSection=function(e){$("#"+e.header).removeClass(n).addClass(r);$("#"+e.content).slideUp(t.settings.animationDuration,function(){s!=null&&$(document).trigger(s,e.content)});e.isExpanded=!e.isExpanded};return t}function AccordionGrid(e){window[e]=this;var t=this;this.expandedRowCssClass=this.hiddenGridCssClass=null;this.subGridClientIds=[];t.toggleAccordionGrid=function(e,n){var r=$("."+e).parent("li");if(r.hasClass(t.hiddenGridCssClass)||n==undefined){$("."+e).get(0).tagName!="UL"&&$(t.subGridClientIds).each(function(){this.cssClass==e&&this.totalCount<1&&this.refresh()});$(n).addClass(t.expandedRowCssClass);r.removeClass(t.hiddenGridCssClass)}else{$(n).removeClass(t.expandedRowCssClass);r.addClass(t.hiddenGridCssClass)}};t.reOpenOnPostBack=function(e,n){e!=""&&e!=undefined&&t.toggleAccordionGrid(e);n!=""&&n!=undefined&&t.toggleAccordionGrid(n)};t.getSelectedValues=function(){var e=false;$(t.subGridClientIds).each(function(){if(this.getSelectedValues().length>0)e=true});if(e)return true;return""}}function Calendar(e){window[e]=this;var t=this,n,r,i,s;t.initialize=function(){r=t.settings;i=t.customSettings;s=t.customScripts;n=t.calendar;$.extend(r,{select:s.onSelect,eventRender:s.eventRender,dayRender:s.dayRender,eventDrop:s.eventDrop,eventResize:s.eventResize,eventClick:s.eventClick,loading:s.loading,weekNumberCalculation:function(e){var t=n.fullCalendar("getView");if(t&&t.name==window.fullCalendarViews.agendaDay)return"";return Calendar.getWeekNumber(e,r.firstDay)},viewChange:s.onChangeView,viewRender:function(e){n.fullCalendar("option","contentHeight",e.name==window.fullCalendarViews.month?NaN:2500);s.viewRender(e)},updateTodayButton:s.updateTodayButton,eventAfterAllRender:s.eventAfterAllRender});n.fullCalendar(r)};t.refetchEvents=function(e,n){var r=[];$.each(e,function(e,t){r.push(t.id)});$.isFunction(n)&&n(true);$.ajax({type:"POST",url:i.refetchEventsSource,data:{ids:r.join()},datatype:"json",success:function(r){$.each(r,function(n,r){var i=$.grep(e,function(e){return e.id==r.id})[0];t.removeEvent(i.id);i.source?t.addEventForSource(r,i.source):t.addEvent(r)});$.isFunction(n)&&n(false)},error:function(){$.isFunction(n)&&n(false)}})};t.refetchAll=function(){n.fullCalendar("refetchEvents")};t.removeEvent=function(e){n.fullCalendar("removeEvents",e)};t.addEvent=function(e){n.fullCalendar("renderEvent",e)};t.refetchSource=function(e){n.fullCalendar("refetchSource",e)};t.refetchSourceByName=function(e){e in t.eventSources&&t.refetchSource(t.eventSources[e])};t.addEventForSource=function(e,t){n.fullCalendar("renderEventForSource",e,t)};t.addEventForSourceByName=function(e,n){n in t.eventSources&&t.addEventForSource(e,t.eventSources[n])}}function ClientInlineEditor(e,t,n,r,i,s,o){if(e){var u=this;u.isWatermarkMode=false;u.isGetInitialTextFromHidden=!!n;u.hiddenField=n;u.viewField=$(e);u.editModeActivator=t?$(t):u.viewField;u.editField=undefined;u.editHidden=undefined;u.editLink=$();u.onEditFunction=i;u.onChangeModeFunction=s;u.userData=o;u.options=$.extend({multiline:false,watermark:"",autoResize:false,clickToEditToolTip:"",clickToSaveToolTip:"",submitOnEnter:false,ignoreViewModeText:false,editFieldCssClass:"",watermarkCssClass:"",editFieldAutoWidth:true,editFieldDisplayInline:false,highlightOnSave:false,highlightOnFocus:false,maxLength:0,renderRightLinkWithIcon:false,rightLinkCssClass:"",rightLinkViewModeCssClass:"",rightLinkEditModeCssClass:"",supressOriginalBehaviour:false},r);u.options.useWatermark=!!u.options.watermark;u.options.useClickToEditToolTip=!!u.options.clickToEditToolTip;u.options.useEditFieldCssClass=!!u.options.editFieldCssClass;u.options.useWatermarkCssClass=!!u.options.watermarkCssClass;if(u.options.renderRightLinkWithIcon){u.editLink=$("<a href='#'></a>").addClass(u.options.rightLinkCssClass).append($("<img alt='' />").attr("src",CommonConstants.onePixelTransparentImageSource)).insertAfter(u.viewField).click({self:u},u.rightLinkClick).keydown({self:u},u.rightLinkKeyDown);u.initDeviceChecks();u.toggleRightLinkMode(true,true)}u.options.supressOriginalBehaviour||u.editModeActivator.click($.proxy(u.switchToEditMode,u)).filter("a").keydown({self:u},u.editModeActivatorKeyDown);u.toggleActivatorTooltip(true);return{switchToEditMode:function(){u.switchToEditMode();return u.editField},setNewText:function(e){u.setNewText(e)},getEditFieldText:function(){return u.getEditFieldText()}}}}function ColorPicker(e){function t(e){e=$(e).find("input:hidden:first").val();r(e)}function n(){var e=l.find("li."+u.settings.cssClasses.selected+" input:hidden:first").val();r(e)}function r(e){a.trigger(u.settings.clientEvents.colorOver,e)}function i(e){if(e.which===CommonConstants.keyCodes.escape){n();s()}return true}function s(e){f.hide();c.hide();e&&a.focus()}function o(){c=$("<div></div>").addClass(u.settings.cssClasses.popupTop).appendTo("form").keydown(function(e){return i(e||window.event)});h=a.clone(false).appendTo(c).click(function(){s();return false});f=$("<div></div>").addClass(u.settings.cssClasses.popup).addClass(u.settings.cssClasses.customPopup).appendTo("form").keydown(function(e){return i(e||window.event)});l=$("<ul></ul>").appendTo(f);for(var e=0;e<u.settings.colorKeys.length;e++){var t=u.settings.colorKeys[e],n=$("<li></li>").append($('<input type="hidden" />').val(t)).append($("<a></a>").attr("href","#").html("&nbsp;").addClass(u.settings.colors[t].PickerColorCssClass)).appendTo(l);t==u.settings.selectedColorKey&&n.addClass(u.settings.cssClasses.selected)}}window[e]=this;var u=this,a,f,l,c,h;u.initialize=function(){a=u.controls.pickerLink;o();$(document).click(function(e){e=e?e:window.event;var t=e.srcElement||e.target;if(f.length&&!f.is(":hidden")&&t!=a.get(0)&&!$(t).parents().filter("#"+a.prop("id")).length){t=f.offset();e.clientX>t.left&&e.clientX<t.left+f.width()&&e.clientY>t.top&&e.clientY<t.top+f.height()||s()}}).on("closeColorPicker",function(){s(false)});var e=l.find("li");e.find("a").click(function(){var t=$(this.parentNode),n=t.find("input:hidden:first").val();s();e.removeClass(u.settings.cssClasses.selected);t.addClass(u.settings.cssClasses.selected);r(n);a.trigger(u.settings.clientEvents.colorChange,n);return false}).mouseenter(function(){t(this.parentNode)}).mouseleave(function(){n()}).focusin(function(){t(this.parentNode)}).focusout(function(){n()});a.click(function(e){e.preventDefault();$(document).click();if(f.is(":hidden")){e=a.offset();f.css({top:e.top+a.height()-1+"px",left:e.left-f.width()+a.width()+3+"px"}).show();e=f.offset();c.show().css({top:e.top-c.height()+"px",left:e.left+f.width()-c.width()+"px"});h.focus()}else s()})};u.getColorByKey=function(e){return u.settings.colors[e].RepaintColorCssClass};return u}function ContextDialog(e,t){var n=this,r=$(e),i,s={setFocus:true,width:300,showArrow:true,arrowOffset:"auto",align:"auto",valign:"auto",marginLeft:10,marginRight:10,marginTop:-40,marginBottom:40,toggleElement:null,customScripts:{beforeCloseDialog:null}},o=r.wrap("<div class='ccl-context-dialog'></div>").parent(),u=o.parent(),a=$("<header class='ccl-context-dialog-header'></header>").prependTo(o),f=$("<a class='ccl-context-dialog-close' href='javascript:void(0);'>&#215;</a>").appendTo(a),l=$("<h2></h2>").appendTo(a),c=$("<div class='ccl-context-dialog-arrow'></div>").prependTo(o),h,p=$("html"),d=$("body"),v=$(window),m,g;n.openDialogAt=function(e,t,a){function f(t){var n=t-(g-l-e-s.marginRight);if(n>0){o.css({left:e-t-n-s.marginRight});c.css({left:t+n+s.marginRight})}}if(a)e+=u.width();else{e||(e=0);t||(t=0)}$(document).trigger("contextdialog:show",[r]);h=v.scrollTop();n.isMobileView=v.width()<=CommonConstants.mediaScreenSizes.mobile;p.addClass("ccl-context-dialog-has-overlay");c.toggle(s.showArrow);o.removeClass("top bottom left right");s.width&&o.outerWidth(s.width);var l=u.position().left,g=v.width();if(n.isMobileView&&a){o.addClass("bottom");o.css({left:s.marginLeft-l,width:g-s.marginLeft-s.marginRight});c.css({left:l-s.marginLeft+e})}else if(n.isMobileView){CommonFunctions.makePostMessageCall(window.top,CommonWindowMessages.expandContentAreaFrame);IframeResizer.reportSetIframeDefaultHeight();if(window.top!=window)try{var y=$(window.top).width();y<v.width()&&d.outerWidth(y,true)}catch(w){}}else{var E,S;y=o.outerWidth();var x=o.outerHeight(),T=v.scrollLeft(),N=v.scrollTop(),C=v.width()+T;N=v.height()+N;if(s.align=="auto")S=C-e>y+s.marginLeft?e+s.marginLeft:e-y-s.marginRight;else if(s.align=="center")S=e-y/2;else if(s.align=="left")S=e-y-s.marginRight;else if(s.align=="right")S=e+s.marginLeft;if(s.valign=="auto")E=N-s.marginBottom-t>x+s.marginTop?t+s.marginTop:N-x-s.marginBottom;else if(s.valign=="top")E=t-x-s.marginBottom;else if(s.valign=="center")E=t-x/2;else if(s.valign=="bottom")E=t+s.marginTop;a||(S=S<T?T:S);o.css({top:E,left:S});var k,L;if(E<t&&E+x>t){k="top";L=Math.max(0,Math.min(t-E,x-12));if(S+y<e)o.addClass("left");else e<S&&o.addClass("right")}else if(S<e&&S+y>e){k="left";L=Math.max(0,Math.min(e-S,y-12));if(E>t)o.addClass("bottom");else E+x+t&&o.addClass("top")}if(s.arrowOffset=="auto")if(k=="top")c.css({top:L,left:""});else k=="left"&&c.css({top:"",left:L});else c.css({top:"",left:""});if(a){t=o.outerWidth()/2;if(t-l>0){o.css({left:s.marginLeft-l});c.css({left:l-s.marginLeft+e})}f(t);o.css("height","");t=v.height()-(u.position().top+u.height()+s.marginBottom);t>0&&o.height()>t&&o.css("height",t)}}o.show();m=window.parent?window.parent.document.activeElement:document.activeElement;s.setFocus&&s.focusTarget&&s.focusTarget.focus();i=true};n.openDialog=function(e){var t=0,r=0;if(e){if(e.type=="touchend"){t=e.originalEvent.changedTouches[0];e.pageX=t.pageX;e.pageY=t.pageY}t=e.pageX;r=e.pageY;e.stopPropagation()}n.openDialogAt(t,r)};n.closeDialog=function(){CommonFunctions.safeExecuteFunction(s.customScripts.beforeCloseDialog);if(n.isMobileView){CommonFunctions.makePostMessageCall(window.top,CommonWindowMessages.collapseContentAreaFrame);IframeResizer.reportSetIframeDefaultHeight();d.width("")}o.hide();p.removeClass("ccl-context-dialog-has-overlay");v.scrollTop(h);$(document).trigger("contextdialog:close",[r]);i=false;m&&m.focus()};n.setTitle=function(e){s.title=e;l.text(s.title)};n.showFooter=function(){g&&g.show()};n.hideFooter=function(){g&&g.hide()};n.showHeader=function(){a.show()};n.hideHeader=function(){a.hide()};n.isOpened=function(){return i};n.setBeforeCloseDialog=function(e){s.customScripts.beforeCloseDialog=e};(function(){$.extend(s,t);l.uniqueId();o.attr({role:"dialog","aria-labelledby":l.attr("id")});r.addClass("ccl-context-dialog-content");if(s.footerContent){var e=$("#"+s.footerContent);g=$("<footer class='ccl-context-dialog-footer'></footer>");g.appendTo(o);e.appendTo(g)}s.cssClass&&o.addClass(s.cssClass);n.setTitle(s.title);r.show();f.click(n.closeDialog)})();$(function(){function e(e){if(i&&$(e.target).closest(o).length===0)s.toggleElement&&$(e.target).closest(s.toggleElement).length>0||n.closeDialog()}function t(e){e.which===CommonConstants.keyCodes.escape&&n.closeDialog()}function r(n){n.each(function(n,r){if(r.addEventListener){r.addEventListener(a,e,true);r.addEventListener("keydown",t,true)}else{$(r).on(a,e);$(r).on("keydown",t)}})}var u=$(window);if(window.parent)u=u.add(window.parent);var a=window.CommonFunctions.isIos()?"touchstart":"mousedown";r(u);$("iframe").on("load",function(){try{var e=$(this.contentWindow||this.contentDocument);r(e)}catch(t){}});$(document).on(CommonTriggers.clickInInnerFrame,function(){i&&n.closeDialog()})});return n}function CssModal(e){function t(){return v.closeButton.getIfHyperLinkEnabled()&&(!g||g())}function n(){if(window.location.hash.replace("#","")===c)return true;return false}function r(){$(document).off("cssmodal:hide",r);i()}function i(){if(n()&&!p){for(var e=false,t=0;t<CssModal.instances.length;t+=1)e=e||CssModal.instances[t].getIsOpened();if(e){$(document).on("cssmodal:hide",r);return}p=true;CommonFunctions.safeExecuteFunction(m.beforeOpenDialog);if(n()&&p){if(d.userInputControlsSelector){e=$(d.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(false,e,e)}w=E.scrollTop();S.addClass(CssModal.commonSettings.cssClasses.overlay);d.isIos&&S.addClass(CssModal.commonSettings.cssClasses.overlayIos);f(CommonWindowMessages.expandContentAreaFrame.messageName);if(window.top!=window)try{var i=$(window.top).width();i<E.width()&&x.outerWidth(i,true)}catch(s){}$(b).removeClass(CssModal.commonSettings.cssClasses.isActive);v.container.addClass(CssModal.commonSettings.cssClasses.isActive);b=v.container.get(0);CssModal.modes.ajaxDynamically===h&&u();CssModal.modes.iframeDynamically===h&&a();if(b){y=document.activeElement;b.focus()}$(document).trigger("cssmodal:show",[b,c]);CssModal.modes.ajaxDynamically!==h&&CssModal.modes.iframeDynamically!==h&&o()}CommonFunctions.safeExecuteFunction(m.afterOpenDialog)}if(!n()&&p){p=false;CommonFunctions.safeExecuteFunction(m.beforeCloseDialog);if(d.userInputControlsSelector){i=$(d.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(true,i,i)}S.removeClass(CssModal.commonSettings.cssClasses.overlay);d.isIos&&S.removeClass(CssModal.commonSettings.cssClasses.overlayIos);E.scrollTop(w);if(b){if(CssModal.modes.ajaxDynamically===h||CssModal.modes.iframeDynamically===h)v.contentContainer.html("");$(b).removeClass(CssModal.commonSettings.cssClasses.isActive);f(CommonWindowMessages.collapseContentAreaFrame.messageName);x.width("");$(document).trigger("cssmodal:hide",[b,c]);b=null}l.setCloseConfirmation(null);y&&y.focus();CommonFunctions.safeExecuteFunction(m.afterCloseDialog)}}function s(){T&&clearTimeout(T);T=setTimeout(o,d.resizeTimeoutInMilliseconds)}function o(){if(n()&&p){v.innerContainer.removeAttr("style");v.contentContainer.removeAttr("style");if(E.width()>CommonConstants.mediaScreenSizes.mobile){if(l._maximized)v.innerContainer.css({width:$(window).width(),height:$(window).height(),left:"0",top:"0"});else{d.preferredWidth&&d.preferredWidth>0&&v.innerContainer.width(Math.min(d.preferredWidth,E.width()-40));d.preferredHeight&&d.preferredHeight>0&&v.contentContainer.outerHeight(d.preferredHeight,true)}v.contentContainer.css({width:d.minContentWidth&&d.minContentWidth>0?d.minContentWidth:undefined,minWidth:d.minContentWidth&&d.minContentWidth>0?d.minContentWidth:undefined,minHeight:d.minContentHeight&&d.minContentHeight>0?d.minContentHeight:undefined});var e=v.innerContainer.height()-v.headerContainer.outerHeight()-v.footerContainer.outerHeight();if(l._maximized)v.contentContainer.outerHeight(e);else{v.contentContainer.outerHeight()-1>e&&v.contentContainer.outerHeight(e);e=v.innerContainer.height()/2;var t=v.innerContainer.width()/2;v.innerContainer.css({left:"50%","margin-left":-1*t,"margin-top":-1*e,top:"50%"})}}else{var r=0;v.innerContainer.children().not(v.contentContainer).each(function(){if(!d.hideFooterInMobileView||!$(this).is(v.footerContainer))r+=$(this).outerHeight()});v.contentContainer.outerHeight(v.innerContainer.height()-r)}}}function u(){v.contentContainer.html(d.loadingText);v.contentContainer.load(d.ajaxUrl,o)}function a(){v.contentContainer.empty().append($("<iframe/>").attr("src",d.iframeUrl).addClass(CssModal.commonSettings.cssClasses.iframe).attr("seamless","seamless").attr("frameborder","0").on("load",function(){o()}))}function f(e){if(d.expandToAllWindowSize){CommonFunctions.makePostMessageCall(window.top,{messageName:e});IframeResizer.reportSetIframeDefaultHeight()}}window[e]=this;var l=this,c=e,h,p=false,d,v,m,g,y,b,w,E=$(window),S=$("html"),x=$("body"),T;l.initialize=function(e,n,r){m=n;d=r;v=$.extend(e,{closeButton:$("."+d.closeButtonClass)});h=d.mode;$(document).keyup(function(e){l.keyUp(e)});CssModal.modes.ajaxStatically===h&&u();CssModal.modes.iframeStatically===h&&a();E.on("hashchange",i);E.on("resize",s);E.on("load",i);v.closeButton.click(t);CssModal.instances.push(this)};l.openDialog=function(e){l._maximized=e;window.location.hash="#"+c;e?v.innerContainer.addClass("ccl-cssmodal-modal-maximized"):v.innerContainer.removeClass("ccl-cssmodal-modal-maximized")};l.keyUp=function(e){n()&&e.which===CommonConstants.keyCodes.escape&&t()&&CssModal.closeDialog()};l.setContentMinSize=function(e,t){d.minContentWidth=e;d.minContentHeight=t;o()};l.setTitle=function(e){if(e){var t=$("h2",v.headerContainer);t&&t.text(e)}};l.setAjaxUrl=function(e){d.ajaxUrl=e};l.setIframeUrl=function(e,t){d.iframeUrl=e;t&&a()};l.setCloseConfirmation=function(e){g=e};l.toggleDialogCloseButton=function(e){v.closeButton.toggleHyperlink(e)};l.getFooter=function(){return v.footerContainer};l.adjustWindowSize=function(){o()};l.getIsOpened=function(){return p};return l}function DatePicker(e){function t(){return!o.controls.dateInput.val()||o.controls.dateInput.val()===u.waterMark}function n(){o.controls.dateInput.val(u.waterMark).removeClass(a.watermark).addClass(a.watermark)}function r(){if(!p&&d)p=window[o.settings.timeSlotPickerClientInstanceName];return p}function i(e,t){if((f||v)&&o.getAvailableDatesFunction){var n=t==12?new Date(e,12,6):new Date(e,t,6);n={startDate:JSON.stringify(t==1?new Date(e,-1,25):new Date(e,t-2,25)),endDate:JSON.stringify(n),filterId:m};o.getAvailableDatesFunction(n);l=n.allowedDates}}function s(e,t){if(c&&o.getCssClassesForCalendarDatesFunction){var n=t==12?new Date(e,12,6):new Date(e,t,6);n={startDate:JSON.stringify(t==1?new Date(e,-1,25):new Date(e,t-2,25)),endDate:JSON.stringify(n)};o.getCssClassesForCalendarDatesFunction(n);h=n.customCssClassesForCalendarDates}}window[e]=this;var o=this,u,a,f,l,c,h,p,d,v,m,g;o.initialize=function(){u=o.settings;a=u.cssClasses;c=u.useCustomCssClassesForCalendarDates;f=u.useRestrictedDateSelection;d=!!o.settings.timeSlotPickerClientInstanceName;DatePickerPool.add(o.controls.dateInput,o);o.controls.dateInput.datepicker({showOn:u.hideInput?"button":"both",buttonImage:"",buttonImageOnly:false,showButtonPanel:true,showOtherMonths:true,selectOtherMonths:true,defaultDate:null,dateFormat:u.dateFormat,firstDay:u.firstDayOfWeek,waterMark:u.waterMark,monthNames:u.monthNames,monthNamesShort:u.abbreviatedMonthNames,dayNames:u.dayNames,dayNamesShort:u.abbreviatedDayNames,dayNamesMin:u.abbreviatedDayNames,closeText:u.closeText,prevText:u.previousMonthText,nextText:u.nextMonthText,currentText:u.todayText,disabled:u.disabled,showWeek:u.showWeek,weekHeader:u.weekHeader,beforeShow:function(e,t){e=$(e);e.val()==$.datepicker._get(t,"waterMark")&&e.val("").removeClass(a.watermark);var n=e.datepicker("getDate");if(n==null)n=new Date;if(f||v)i(n.getFullYear(),n.getMonth()+1);c&&s(n.getFullYear(),n.getMonth()+1);g=e.val();setTimeout(function(){e.trigger("update")},1)},onChangeMonthYear:function(e,t,n){i(e,t);s(e,t);setTimeout(function(){$(n.input).trigger("update")},1)},beforeShowDay:function(e){if(!f&&!v&&!c)return[true];if(l==undefined&&h==undefined)return[true];e=[e.getFullYear(),e.getMonth()+1,e.getDate()].join("_");var t=[true];if((f||v)&&l!=undefined)t=l[e]==undefined?[false,a.disabled]:l[e]==1?[true,a.avalaible]:[false,a.busy];c&&h!=undefined&&h[e]!=undefined&&$.each(h[e],function(e,n){t[1]=e;t[2]=n});return t},onClose:function(e,t){var n=$(this);if(!n.val()){n.val($.datepicker._get(t,"waterMark")).addClass(a.watermark);d&&r().resetTimes()}if(o.relatedWithDateInput&&o.relatedWithDateInput.isLater){n=window[o.relatedWithDateInput.id].getDateAsString();if(e&&(n==""||n==g))window[o.relatedWithDateInput.id].setDate(e)}g=e}}).on("update",function(){o.settings.showWeek&&$("td.ui-datepicker-week-col").wrapInner('<a href="javascript:void(0);"></a>').on("click",function(){var e,t;if(o.relatedWithDateInput){if(o.relatedWithDateInput.isLater){$(this).next().click();t=e=o.controls.dateInput.datepicker("getDate");t.setDate(e.getDate()+6)}else{e=$(this).parent().find("td");e.get(e.length-1).click();t=e=o.controls.dateInput.datepicker("getDate");t.setDate(e.getDate()-6)}window[o.relatedWithDateInput.id].setDate(t)}else $(this).next().click()});u.hideTodayButton&&$(".ui-datepicker-current").hide()}).trigger("update");$("#ui-datepicker-div").hide();u.hideInput&&o.controls.dateInput.hide();t()&&n();o.controls.dateInput.change(function(){if(o.onDateSelectedFunction){var e={dateText:o.getDateAsString(),dateFilterId:v?m:0};o.onDateSelectedFunction(e)}}).keypress(function(e){if(e.which===CommonConstants.keyCodes.enter){o.controls.dateInput.change();e.preventDefault()}});f&&o.controls.dateInput.keypress(function(e){e.which!==CommonConstants.keyCodes.del&&e.which!==CommonConstants.keyCodes.backspace&&e.preventDefault()})};o.getDateAsString=function(){if(t())return"";var e=o.controls.dateInput.val();try{$.datepicker.parseDate(u.dateFormat,e)}catch(n){return""}return e};o.getDate=function(){return t()?undefined:o.controls.dateInput.datepicker("getDate")};o.setDate=function(e){if(e){o.controls.dateInput.removeClass(a.watermark);o.controls.dateInput.datepicker("setDate",e)}else n()};o.clearDateAndTime=function(e){!t()&&!e&&o.setDate("");d&&r().resetTimes()};o.setFilteringMode=function(e){v=e};o.setFilterId=function(e){m=e};return o}function DateTimeActivation(e){function t(){s||(s=window[n.settings.datePickerClientInstanceName]);return s}window[e]=this;var n=this,r,i,s,o,u,a,f;n.initialize=function(){r=n.settings;i=r.cssClasses;o=r.dateFilteringInUse;u=n.controls.selectActivationMode.parent();f=r.modes;a=!!r.timeSlotPickerClientInstanceName;n.controls.selectActivationMode.change(function(){var e=n.controls.selectActivationMode.val();n.controls.dateTimeControlsContainer.toggle(e!=f.empty&&e!=f.infinity);$("."+i.timeControlsContainer,u).toggleClass(i.hiddenTimeControlsContainer,e!=f.date);n.controls.endOfDayLabel.toggle(e==f.endOfDay);var s=o&&e==f.filtering;n.controls.datePickerFilterHolder.toggle(s);t().setFilteringMode(s);o&&t().clearDateAndTime(e!=f.filtering);a&&window[r.timeSlotPickerClientInstanceName].toggle(e==f.filtering);n.onChangeActivationModeFunction&&n.onChangeActivationModeFunction()});if(o){n.controls.filterDropDown.change(function(){var e=n.controls.filterDropDown.val();n.controls.filterHidden.val(e);t().clearDateAndTime();t().setFilterId(e)});if(t()){t().setFilterId(n.controls.filterHidden.val());t().setFilteringMode(o&&n.controls.selectActivationMode.val()==f.filtering)}}};n.getMode=function(){return n.controls.selectActivationMode.val()};return n}function Dialog(e){function t(){if(m){f.show();r();CommonFunctions.safeExecuteFunction(o.customScripts.afterOpenDialog);IframeResizer.reportSetIframeDefaultHeight();m=false}}function n(){a.scrollLeft(b);a.scrollTop(y);IframeResizer.reportSetIframeDefaultHeight();g=false}function r(){var e=function(e,t,n,r){n=Math.max((e-n)/2,10);if(e<r)n+=t;return n<0?0:n},t=$(document);f.offset({left:e(a.width(),a.scrollLeft(),f.width(),t.width()),top:e(a.height(),a.scrollTop(),f.height(),t.height())})}function i(){if(o.settings.useInProgressFunctionality){a.unload(function(){o.close()});c.attr("title",o.settings.okButtonInProgressTitle);c.addClass(o.settings.inProgressCssClass);o.disableDialog();setTimeout(function(){CommonFunctions.safeExecuteFunction(o.customScripts.afterOkClick);f.find("input,button").prop("disabled",true)},100)}else CommonFunctions.safeExecuteFunction(o.customScripts.afterOkClick)&&o.close()}function s(){CommonFunctions.safeExecuteFunction(o.customScripts.afterCancelClick)&&o.close()}window[e]=this;var o=this,u=$("#mask"),a=$(window),f,l,c,h,p,d,v,m=false,g=false,y,b,w=CommonWindowMessages.contentAreaFrameHasExpanded.messageName,E=CommonWindowMessages.contentAreaFrameHasCollapsed.messageName,S=false;o.initialize=function(){f=o.controls.container;l=o.controls.iframe;c=o.controls.okButton;h=o.settings.showBackgroundMask;p=o.settings.useTransparentMask;d=o.settings.expandToAllWindowSize;v=o.settings.ignoreKeyDown;S=!d||window==window.top;f.css("z-index",o.settings.zIndex).keydown(function(e){return o.keyDown(e)}).keypress(function(e){return o.keyPress(e)});o.controls.closeLink.click(function(){s();return false}).keydown(function(e){if(e.which===CommonConstants.keyCodes.enter){s();return false}return true});c.click(function(){i();return false});o.controls.cancelLink.click(function(){s();return false});d&&CommonFunctions.attachPostMessageEventListener(a,[w,E],function(e){if(e.messageName===w&&m)t();else e.messageName===E&&g&&n()});o.settings.openDialogAfterLoading&&o.open()};o.openWithTitle=function(e){o.setNewTitle(e);o.open()};o.open=function(){m=true;b=a.scrollLeft();y=a.scrollTop();if(h){if(u.length==0)u=$("<div id='mask'></div>").appendTo("body").addClass(o.settings.maskCssClass);u.css({opacity:p?"0":"0.5",filter:"alpha(opacity="+(p?"0":"50")+")","z-index":o.settings.backgroundMaskZIndex});u.show()}CommonFunctions.safeExecuteFunction(o.customScripts.beforeOpenDialog);if(S)t();else d&&o.toggleContentAreaFrame(true);setTimeout(t,100)};o.close=function(){g=true;CommonFunctions.safeExecuteFunction(o.customScripts.beforeCloseDialog);h&&u.hide();f.hide();CommonFunctions.safeExecuteFunction(o.customScripts.afterCloseDialog);if(S)n();else d&&o.toggleContentAreaFrame(false)};o.setupIframe=function(e,t,n,r){l.attr("width",t?t:l.attr("width")).attr("height",n?n:l.attr("height")).attr("scrolling",r?r:l.attr("scrolling"));o.setIframeSrc(e)};o.setIframeSrc=function(e){o.settings.frameLoadingText&&l.contents().find("body").empty().text(o.settings.frameLoadingText);document.getElementById(l.prop("id")).contentWindow.location.href=e};o.setNewAfterOkClickFunction=function(e){o.customScripts.afterOkClick=e};o.setNewAfterCancelClickFunction=function(e){o.customScripts.afterCancelClick=e};o.setNewBeforeCloseDialogFunction=function(e){o.customScripts.beforeCloseDialog=e};o.setNewTitle=function(e){o.controls.titleContainer.text(e)};o.enableOrDisableOkButton=function(e){c.prop("disabled",!e)};o.disableDialog=function(){o.enableOrDisableOkButton(false);o.controls.cancelLink.unbind("click").attr("disabled",true);o.controls.closeLink.unbind("click").attr("disabled",true);o.controls.closeLink.find("img").prop("src",o.settings.closeImageDisabledUrl)};o.getContainerJQueryElement=function(){return f};o.focusOnCloseLink=function(){o.controls.closeLink.focus()};o.keyDown=function(e){if(e.target&&e.target.className&&e.target.className.indexOf("cke_source")>=0||v)return true;if(e.which===CommonConstants.keyCodes.escape)s();else if(e.which===CommonConstants.keyCodes.enter&&!e.shiftKey&&(!e.srcElement||e.srcElement.tagName!=="A"))i();return true};o.keyPress=function(){return true};o.scrollWindowToCenter=function(){var e=f.offset().top,t=a.height(),n=f.height();window.scrollTo(0,e-(t/2-n/2))};o.toggleContentAreaFrame=function(e){CommonFunctions.makePostMessageCall(window.top,e?CommonWindowMessages.expandContentAreaFrame:CommonWindowMessages.collapseContentAreaFrame);IframeResizer.reportSetIframeDefaultHeight()};return o}function DivToggler(e){var t=this;t.settings=e;t.div=t.settings.divControl?$(t.settings.divControl):$("#"+t.settings.divId);if(t.settings.changeDivVisibility==undefined)t.settings.changeDivVisibility=true;t.initialize=function(){t.settings.isCollapsed?t.collapseDiv():t.expandDiv();return t};t.afterToggle=function(){t.settings.afterToggle&&typeof t.settings.afterToggle==="function"&&t.settings.afterToggle()};t.toggleDiv=function(e){t.settings.isCollapsed?t.expandDiv():t.collapseDiv();e&&typeof e==="function"&&e()};t.collapseDiv=function(){t.settings.changeDivVisibility&&t.div.hide();t.settings.isCollapsed=true;t.afterToggle()};t.expandDiv=function(){t.settings.changeDivVisibility&&t.div.show();t.settings.isCollapsed=false;t.afterToggle()};return t}function DropDownMenu(e,t){function n(e,t){l&&clearTimeout(l);l=setTimeout(function(){var e=t.relatedTarget||document.activeElement,n=$(e),r=e===u[0]||n.closest(u).length===1;e=e===a[0]||n.closest(a).length===1;!r&&!e&&i()},e)}function r(){c.scroll(s);a.addClass(o.settings.selectedHolderCssClass);var e=o.settings.useTargetPosition?f.position():f.offset();o.settings.setMinWidthByTarget&&u.css("min-width",f.outerWidth()+"px");var t=e.top+f.outerHeight(false),n="auto",r="auto";switch(o.settings.horizontalPosition){case DropDownMenuCommonSettings.horizontalPositions.rightEdge:n=e.left+f.outerWidth(false)-u.outerWidth(false);if(n<0)n=e.left;break;case DropDownMenuCommonSettings.horizontalPositions.rightEdgeRightOffset:r=c.width()-c.scrollLeft()-e.left-f.outerWidth(false);if(r<0)r=0;break;default:n=e.left}e={top:t,left:n,right:r,"z-index":o.settings.zIndex};if(o.settings.autofitHeight){e["max-height"]=c.height()-t;e["overflow-y"]="scroll"}u.css(e).show()}function i(){c.unbind("scroll",s);u.hide();a.removeClass(o.settings.selectedHolderCssClass)}function s(){var e=o.settings.useTargetPosition?f.position():f.offset();u.css({top:e.top+f.outerHeight(false)})}window[e]=this;var o=this,u,a,f,l,c=$(window);t&&DropDownMenu.instances.push(this);o.initialize=function(){if(!u){u=$("#"+o.controls.menuContainerId);a=$("#"+o.controls.targetLinkId);f=$("#"+o.controls.layoutAlignmentControlId);if(!o.settings.showMenuOnHover||o.settings.isIos)$(document).on((o.settings.isIos?"touchend":"click")+" "+CommonTriggers.clickInInnerFrame,function(e){if(e.target===a[0]||$(e.target).closest(a).length===1)u.is(":visible")?i():r();else if(u.is(":visible"))e.target===u[0]||$(e.target).closest(u).length===1||i()});else{a.on("focusin mouseover",function(){r()});u.add(a).on("focusout mouseout",function(e){n(250,e)})}o.settings.closeMenuWhenClickingOnLink&&u.find("li").click(function(){i()});o.settings.closeMenuWhenClickingInside&&u.click(function(){i()});$(document).ready(function(){o.settings.appendToBody&&u.appendTo("body")})}};return o}function ExpandableContainer(e,t){function n(e){if(o.settings.collapseTooltip&&o.settings.expandTooltip)c.attr("title",e?o.settings.collapseTooltip:o.settings.expandTooltip)}function r(){var e=s();e?u.addClass("expanded"):l.hide();n(e)}function i(){var e=$.cookie(o.settings.cookieName);return e===null||e===""?{}:JSON.parse(e)}function s(){if(o.settings.isExpanded)return true;if(!o.settings.keepStateInCookie)return false;var e=u.attr("Id");if(e===undefined)return false;return i()[e]===true||false}var o=this,u=$(e);o.settings={};$.extend(o.settings,ExpandableContainer.defaults);$.extend(o.settings,t);var a=$(o.settings.expander,e),f=a.attr("data-expander-target")||o.settings.target,l=$(f,e),c=$(o.settings.accessibleExpander,a);o.toggle=function(){var t=!o.getIsExpandedState();if(t){u.addClass("expanded");l.slideDown()}else{u.removeClass("expanded");l.slideUp()}$(document).trigger("expandablecontainer:toggled",[e,t]);n(t);if(o.settings.keepStateInCookie){var r=u.attr("Id");if(r!==undefined){var s=i();s[r]=t;$.cookie(o.settings.cookieName,JSON.stringify(s),{path:"/"})}}return false};o.getIsExpandedState=function(){return u.hasClass("expanded")};(function(){if(o.settings.keepStateInCookie&&$.cookie===undefined)throw Error("keepStateInCookie option requires $.cookie to be defined.");a.addClass("ccl-expandable-container-expander");if(l.length===0||a.length===0)if(o.settings.throwOnMissingTarget)throw"Targets not found";r();a.click(function(){o.toggle()})})();return o}function Feedback(e){window[e]=this;var t=this;t.showMessage=function(e,n){var r=t.controls;r.container.removeClass(t.settings.cssClasses.join(" ")).addClass(t.settings.feedbackCssClass).addClass(t.settings.cssClasses[e]).show();n?r.textSpan.html(n).show():r.textSpan.hide();t.hideUndo()};t.hide=function(e){t.controls.container.hide();if((e==undefined||e)&&t.functions.onClose)t.functions.onClose()};t.hideUndo=function(){t.controls.undoLink.hide()};t.show=function(){t.controls.container.show()};t.toggleCloseLink=function(e){t.controls.closeLink.toggle(e)};return t}function FileList(e){window[e]=this;var t=this;t.initialize=function(){};t.showPreview=function(e,n,r,i){$(t.controls.title).html(t.settings.titleText+" "+e);window[t.controls.dialog.replace("#","")].setContentMinSize(r,i);window[t.controls.dialog.replace("#","")].setAjaxUrl(t.settings.serviceMethodUrl+"?fileId="+n)};return t}function FolderSelector(e){window[e.clientId]=this;var t=this;t.id=e.clientId;t.rootId="0";t.rootTitle="";t.hideRootCrumb=false;t.selectedId="";t.parentId="";t.cache={};t.loadingTreshold=e.loadingTreshold;t.insertFeedbackClientId=e.insertFeedbackClientId;t.showBreadCrumbs=e.showBreadCrumbs==="true";t.controls={dialog:window[e.dialogClientId],grid:window[e.gridClientId]};t.dialogContainer=$("#"+e.dialogClientId);t.gridContainer=t.dialogContainer.find("."+e.cssClasses.gridContainer);t.treeContainer=t.dialogContainer.find("."+e.cssClasses.treeContainer);t.navigation=t.dialogContainer.find("."+e.cssClasses.navigation);t.loadingIndicator=t.dialogContainer.find("."+e.cssClasses.loadingIndicator);t.dialogContainer.addClass(e.cssClasses.folderSelector);t.gridContainer.addClass(e.cssClasses.hidecontents);t.treeContainer.addClass(e.cssClasses.hidecontents);t.openDialog=function(n){t.hideSelectFeedback();t.initializeCurrentView(n);window[e.dialogClientId].openDialog()};t.buildStructure=function(){t.reinitialize();$(t).trigger(e.eventNames.open);return false};t.disposeStructure=function(){$(t).trigger(e.eventNames.close);t.treeContainer.empty();delete t.controls.tree};t.reinitialize=function(e,r){if(e)t.cache={};t.treeContainer.empty();delete t.controls.tree;t.selectedId="";t.parentId="";t.navigateUpButtonDisable();t.showBreadCrumbs&&n(0);t.hideSelectFeedback();t.initializeCurrentView(r);t.createTreeMenu()};t.initializeCurrentView=function(e){if(e){t.rootId="0";if(e.ReadDataServiceUrl!="")t.controls.grid.dataSourceWebMethodUrl=e.ReadDataServiceUrl}};t.createTreeMenu=function(){t.treeContainer.empty();t.treeContainer.jstree({json_data:{data:t._loadTreeData},plugins:["ui","json_data"],core:{animation:0,strings:{loading:" "}}}).bind("select_node.jstree",function(e,n){t.navigateToNode(n.rslt.obj.attr("nodeId"))});t.controls.tree=$.jstree._reference(t.treeContainer)};t.showEmptyContentFeedback=function(){t.dialogContainer.find("."+e.cssClasses.content).hide();t.navigation.hide();t.dialogContainer.find("."+e.cssClasses.emptyContent).show()};t.controls.grid.refresh=function(){t.navigateToPage(t.controls.grid.pageNumber,t.controls.grid.pageSize)};t.baseToggleSelect=t.controls.grid.toggleSelect;t.controls.grid.toggleSelect=function(e){t.baseToggleSelect(e);e=t.controls.grid.getSelectedValues();$(t).trigger("gridSelectionChange",[{nodeIds:e}])};t.baseToggleSelectAll=t.controls.grid.toggleSelectAll;t.controls.grid.toggleSelectAll=function(e){t.baseToggleSelectAll(e);e=t.controls.grid.getSelectedValues();$(t).trigger("gridSelectionChange",[{nodeIds:e}])};$(t).on("gridSelectionChange",function(n,r){var i=r.nodeIds.length>0,s=t.gridContainer.find("."+e.cssClasses.selectButton).parent("li");i?s.removeClass(e.cssClasses.disabled):s.addClass(e.cssClasses.disabled)});t.enableSelectButton=function(n){t.gridContainer.find("."+e.cssClasses.selectButton).parent("li").toggleClass(e.cssClasses.disabled,!n)};t.gridContainer.on("click","a."+e.cssClasses.selectButton,function(){if($(this).parent("li").hasClass(e.cssClasses.disabled))return false;var n=t.controls.grid.getSelectedValues();$(t).trigger(e.eventNames.select,[{selectedId:t.selectedId,nodeIds:n}]);return false});t.gridContainer.on("click","a."+e.cssClasses.folderLink,function(){t.navigateToNode($(this).attr("folderId"));return false});t.gridContainer.on("click","a."+e.cssClasses.navigateUpLink,function(){if($(this).parent("li").hasClass(e.cssClasses.disabled))return false;if(t.parentId&&t.parentId!="0"||t.parentId=="0"&&t.rootId=="0")if(t.selectedId==t.rootId){t.rootId=t.parentId;t.reinitialize();t.showBreadCrumbs&&n()}else t.navigateToNode(t.parentId);return false});t._loadTreeData=function(e,n){var r=(e.data?e.attr("nodeId"):undefined)||t.rootId;t.getData(r,1,t.controls.grid.pageSize,function(e){e=t.getCachedFolderData(e);if(!t.showFeedbackOnEmpty||!t.isContentEmpty(r,e)){for(var i=-1,s=[],o=e.folders.length,u=0;u<o;u++){var a=e.folders[u];s.push({data:{title:a.title,icon:a.cssClass},attr:{nodeId:a.id},state:"closed"});if(a.selectedByDefault&&i<0)i=u}n(s);if(t.selectedId===""){t.selectedId=t.rootId;t.renderGrid(t.selectedId,1,t.controls.grid.pageSize);if(i>=0&&i<o){t.hideRootCrumb=true;t.navigateToNode(e.folders[i].id,true)}}}else t.showEmptyContentFeedback()})};t.isContentEmpty=function(e,t){if(e=="0")return t.folders.length==0&&t.items.pages[1].length==0;return false};t.navigateToNode=function(r,i){if(r!=t.selectedId){t.hideSelectFeedback();t.treeContainer.find("li").removeClass(e.cssClasses.selected);var s=t.treeContainer.find("li[nodeId="+r+"]");s.addClass(e.cssClasses.selected);t.showBreadCrumbs&&n(s);t.getData(r,1,t.controls.grid.pageSize,function(e){t.selectedId=e;if(i)t.rootId=e;t.navigateUpButtonDisable();t.renderGrid(e,1,t.controls.grid.pageSize);s[0]&&t.controls.tree.open_node(s)})}};t.navigateToPage=function(e,n){t.hideSelectFeedback();t.getData(t.selectedId,e,n,function(){t.renderGrid(t.selectedId,e,n);t.controls.dialog.adjustWindowSize()})};t.getData=function(r,i,s,o){i=i||t.controls.grid.page;s=s||t.controls.grid.pageSize;if(t.hasCachedFolderData(r)&&t.hasCachedItemData(r,i,s))o(r);else{t.showLoadingIndicator();$(t).trigger(e.eventNames.loadStart,[{nodeId:r,page:i,pageSize:s}]);$.ajax({type:"GET",url:t.controls.grid.dataSourceWebMethodUrl,data:t.getRequestData(r,i,s),dataType:"jsonp",success:function(u){var l=$.Event(e.eventNames.loadComplete);$(t).trigger(l,[{success:true,data:u}]);if(!l.isPropagationStopped()){if(r==t.rootId){t.rootId=u.Id;t.rootTitle=u.Title;t.showBreadCrumbs&&n()}t.cacheData(u,u.Id,i,s);o(u.Id);t.hideLoadingIndicator()}},error:function(){$(t).trigger(e.eventNames.loadComplete,[{success:false}]);t.hideLoadingIndicator()}})}};t.showLoadingIndicator=function(){clearTimeout(t.loadingTimeout);t.loadingTimeout=setTimeout(function(){t.loadingIndicator.show()},t.loadingTreshold)};t.hideLoadingIndicator=function(){clearTimeout(t.loadingTimeout);t.loadingIndicator.hide();t.gridContainer.removeClass(e.cssClasses.hidecontents);t.treeContainer.removeClass(e.cssClasses.hidecontents)};t.getCachedFolderData=function(e){return t.cache[e]};t.getCachedItemData=function(e,n,r){e=t.cache[e];if(e!==undefined&&e!==null){e=e.items||{};if(e.pageSize===r&&e.pages)return e.pages[n.toString()]}};t.hasCachedFolderData=function(e){e=t.getCachedFolderData(e);return e!==undefined&&e!==null};t.hasCachedItemData=function(e,n,r){e=t.getCachedItemData(e,n,r);return e!==undefined&&e!==null};t.getRequestData=function(e,n,r){return{nodeId:e,page:n,pageSize:r,omitItems:t.hasCachedItemData(e,n,r),omitFolders:t.hasCachedFolderData(e)}};t.cacheData=function(e,n,r,i){var s=t.cache[n]||{};s.description=e.Description;s.parentId=e.ParentId;s.title=e.Title;if(e.Folders!=null){s.folders=[];for(var o=e.Folders.length,u=0;u<o;u++){var a=e.Folders[u];s.folders.push({id:a.Id,title:a.Title,description:a.Description,cssClass:a.CssClass,isFolder:a.IsFolder,selectedByDefault:a.SelectedByDefault})}}if(e.Items!=null){o=[];var l=e.Items.length;for(u=0;u<l;u++){a=e.Items[u];o.push({id:a.Id,title:a.Title,description:a.Description,cssClass:a.CssClass,isFolder:a.IsFolder,selectable:a.Selectable,selectedByDefault:a.SelectedByDefault})}s.items=s.items||{};if(i!==s.items.pageSize)s.items={};s.items.pageSize=i;s.items.pages=s.items.pages||{};s.items.pages[r.toString()]=o;s.virtualItemCount=e.VirtualItemCount}t.cache[n]=s};t.renderTypeCell=function(e){return"<div class='"+e.cssClass+"'></div>"};t.renderItemCell=function(t){var n="<span class='"+t.cssClass+"'>"+CommonFunctions.htmlEncode(t.title)+"</span>",r="";if(t.description&&t.description!==undefined)r="<div class='"+e.cssClasses.itemDescription+"'>"+CommonFunctions.htmlEncode(t.description)+"</div>";return!t.isFolder?n+r:"<a href='#' class='"+e.cssClasses.folderLink+"' folderId='"+t.id+"'>"+n+"</a>"+r};t.getItemXML=function(e){var n=[];n.push("<Item>");n.push("<Id>"+e.id+"</Id>");n.push("<Item>"+CommonFunctions.htmlEncode(t.renderItemCell(e))+"</Item>");n.push("<Selectable>"+(e.selectable===true?"true":"false")+"</Selectable>");n.push("</Item>");return n.join("")};t.renderGrid=function(n,r,i){n=t.cache[n];t.controls.grid.pageNumber=r;t.controls.grid.pageSize=i;i=t.gridContainer.find("."+e.cssClasses.gridHeader+" > h2");var s=t.gridContainer.find("."+e.cssClasses.gridHeader+" > span");i.text(n.title);s.text(n.description);t.parentId=n.parentId;i=t.gridContainer.find("."+e.cssClasses.navigateUpLink);t.parentId===""?i.addClass(e.cssClasses.disabled):i.removeClass(e.cssClasses.disabled);t.controls.grid.clearSelection();t.gridContainer.find("."+e.cssClasses.selectButton).parent("li").addClass(e.cssClasses.disabled);i=n.items.pages[r].length;s=[];s.push("<Data>");s.push("<Items>");for(var o=0;o<i;o++)s.push(t.getItemXML(n.items.pages[r][o]));s.push("</Items>");s.push("<VirtualCount>"+n.virtualItemCount+"</VirtualCount>");s.push("</Data>");t.controls.grid.render(s.join(""),false);$(t).trigger(e.eventNames.gridRender,[t.controls.grid,n])};t.showSelectFeedback=function(){t.insertFeedbackClientId!="undefined"&&window[t.insertFeedbackClientId].show()};t.hideSelectFeedback=function(){t.insertFeedbackClientId!="undefined"&&window[t.insertFeedbackClientId].hide()};t.navigateUpButtonDisable=function(){var n=$("a."+e.cssClasses.navigateUpLink).parent();if(n)n.toggleClass(e.cssClasses.disabled,t.selectedId==t.rootId||!t.parentId&&!t.selectedId)};var n=function(n){var r=[];if(n){n.attr("nodeid")!=null&&r.push([n.attr("nodeid"),n.children("a:first").contents().last().text()]);n.parentsUntil("."+e.cssClasses.treeContainer,"li").each(function(){var e=$(this);r.push([e.attr("nodeid"),e.children("a:first").contents().last().text()])})}t.hideRootCrumb||r.push([t.rootId,t.rootTitle]);var i=$("<ul />").addClass(e.cssClasses.crumbs);n=$("<nav />").addClass(e.cssClasses.crumbsWrapper).append(i);$.each(r,function(t,n){var r=$("<li />").append($("<span />").addClass(e.cssClasses.crumbsSeparator).text(e.breadCrumbsSeparator));t>0?r.append($("<span />").append($("<a />").addClass(e.cssClasses.crumb).attr("href","#").data("node-id",n[0]).text(n[1]))):r.append($("<span />").text(n[1]));r.prependTo(i)});t.navigation.children("."+e.cssClasses.crumbsWrapper).remove().end().append(n)};t.navigation.on("click","a."+e.cssClasses.leftMenuToggler,function(){$(window).width()>768?t.dialogContainer.toggleClass(e.cssClasses.desktopTreeContainerVisible).toggleClass(e.cssClasses.desktopTreeContainerHidden):t.dialogContainer.toggleClass(e.cssClasses.mobileTreeContainerVisible).toggleClass(e.cssClasses.mobileTreeContainerHidden);return false});t.navigation.on("click","."+e.cssClasses.crumb,function(){t.navigateToNode($(this).data("node-id"));return false});return t}function CclGridColumn(e,t,n,r,i,s,o,u){this.dataField=e;this.sortField=t;this.sortDescendingByDefault=i;this.headerHtml=n;this.width=r;this.title=s;this.className=o;this.renderTableDataCellValueInsideDiv=u}function CclAjaxGrid(e){function t(e){return e.replace(/^\s+|\s+$/,"")}window[e]=this;var n=this;n.name=e;n.pageSize=null;n.pageNumber=null;n.mainColumn=null;n.sortingProperty=null;n.filteringPreference=null;n.sortingDirection=null;n.dataSourceWebMethodUrl=null;n.dataSourceWebMethodParams={};n.gridClientID=null;n.columnChooserDialogName=null;n.columnChooserClientID=null;n.pagerInstanceName=null;n.allowSelecting=false;n.allowColumnChoosing=true;n.dataKeyName=null;n.selectingHiddenClientID=null;n.pageNumberHiddenClientID=null;n.pageSizeHiddenClientID=null;n.sortingHiddenClientID=null;n.filteringHiddenClientID=null;n.columnOrderHiddenClientID=null;n.gridContentHiddenClientID=null;n.preferenceCategoryName=null;n.visibleColumns=[];n.columns=[];n.totalCount=0;n.keepSelection=true;n.allowRowExpanding=true;n.expandedRowButtonTitle=null;n.emptyTableText=null;n.accordionDataSourceUrl=null;n.saveToPreferencesWebMethodUrl=null;n.gridEmbeddedInAccordionGridControlClientId=null;n.cclGridConstants=null;n._getColumnsCount=function(){return n.visibleColumns.length+(n.allowColumnChoosing?1:0)+(n.allowSelecting?1:0)};n._saveToPreferences=function(e,t,r,i){n.saveToPreferencesWebMethodUrl&&$.ajax({type:"POST",url:n.saveToPreferencesWebMethodUrl,data:{category:e,name:t,value:r},success:i,error:null})};n._getInvisibleColumns=function(){for(var e=[],t=0;t<n.columns.length;t++)n.visibleColumns.contains(n.columns[t].dataField)||e.push(n.columns[t].dataField);return e};n._applySelectedRowClass=function(e,r){if(r){var i=n.cclGridConstants.cssClasses.selectedRow;e.className=t(e.className.replace(i,""));e.className=t(e.className+" "+i)}else e.className=t(e.className.replace(n.cclGridConstants.cssClasses.selectedRow,""))};n._addRemoveSelectedValue=function(e,t){t?CommonFunctions.addIdToHidden(n.selectingHiddenClientID,e):CommonFunctions.removeIdFromHidden(n.selectingHiddenClientID,e)};n.toggleSelect=function(e){e!=null&&n._applySelectedRowClass(e.parentNode.parentNode,e.checked);var t=true,r=$("#"+n.gridClientID);r.find("tr td."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox").each(function(r,i){i.checked||(t&=false);e!=null&&n._addRemoveSelectedValue(i.value,i.checked)});r.find("tr th."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("checked",t)};n.toggleSelectById=function(e,t){var r=$("#"+n.gridClientID).find("tr td."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox[value='"+e+"']");if(r[0]!=null){r.prop("checked",true);t&&r.prop("disabled",true);r[0].parentNode&&r[0].parentNode.parentNode&&n._applySelectedRowClass(r[0].parentNode.parentNode,r[0].checked)}};n.toggleSelectAll=function(e){var t=$("#"+n.gridClientID);t.find("tr td."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox:enabled").each(function(t,r){r.checked=e;n._applySelectedRowClass(r.parentNode.parentNode,e);n._addRemoveSelectedValue(r.value,r.checked)});t.find("tr th."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox:enabled").prop("checked",e)};n.toggleEnableAll=function(e){var t=$("#"+n.gridClientID);t.find("tr td."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("disabled",!e);t.find("tr th."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("disabled",!e)};n.restoreState=function(){var e=document.getElementById(n.sortingHiddenClientID).value.split(":");n.pageSize=parseInt(document.getElementById(n.pageSizeHiddenClientID).value,10);n.pageNumber=parseInt(document.getElementById(n.pageNumberHiddenClientID).value,10);n.sortingProperty=e[0];n.sortingDirection=e[1];n.filteringPreference=document.getElementById(n.filteringHiddenClientID).value;n.visibleColumns=document.getElementById(n.columnOrderHiddenClientID).value.split(",")};n.saveState=function(){document.getElementById(n.sortingHiddenClientID).value=n.sortingProperty+":"+n.sortingDirection;document.getElementById(n.pageSizeHiddenClientID).value=n.pageSize;document.getElementById(n.pageNumberHiddenClientID).value=n.pageNumber;document.getElementById(n.columnOrderHiddenClientID).value=n.visibleColumns.toString();document.getElementById(n.filteringHiddenClientID).value=n.filteringPreference};n._getParamsStr=function(){var e="",t;for(t in n.dataSourceWebMethodParams)e+="&"+t+"="+escape(n.dataSourceWebMethodParams[t]);return e};n.refresh=function(){n.saveState();if(n.dataSourceWebMethodUrl){var e="",t="";if(n.sortingProperty){e=n.sortingProperty+":"+n.sortingDirection;if(n.columns.findBySortField(n.sortingProperty).dataField!=n.mainColumn)e+=","+n.columns.findByDataField(n.mainColumn).sortField+":asc"}if(n.filteringPreference)t=n.filteringPreference;if(n.gridEmbeddedInAccordionGridControlClientId.length>0&&n.getSelectedValues().length>0&&document.getElementById(n.gridContentHiddenClientID).value.length>0)n.render(document.getElementById(n.gridContentHiddenClientID).value,false);else{if(n.totalCount==0&&n.gridEmbeddedInAccordionGridControlClientId.length){var r=$("#"+n.gridClientID+" ."+n.cclGridConstants.cssClasses.emptyTableCell);if($(r).length<1){r=$("#"+n.gridClientID+" > tbody");$(r).empty();$("#"+n.gridClientID+" > tfoot").empty();n._addRowWithText(r,"<img class='"+n.cclGridConstants.cssClasses.gridEmbededInAccordionGridControlLoadingCssClass+"'src='"+n.cclGridConstants.onePixelTransparentImageUrl+"' />",n._getColumnsCount(),n.cclGridConstants.cssClasses.emptyTableCell)}}$.ajax({type:"POST",url:n.dataSourceWebMethodUrl,data:"pageNumber="+n.pageNumber+"&pageSize="+n.pageSize+"&sort="+e+"&filter="+t+n._getParamsStr(),dataType:"xml",success:function(e){if(n.gridEmbeddedInAccordionGridControlClientId.length>0)document.getElementById(n.gridContentHiddenClientID).value=e.xml?e.xml:n.XmlToString(e);n.render(e,true)},error:null})}}else n.postbackFunction()};n.sort=function(e){n.sortingDirection=n.sortingProperty==e?n.sortingDirection=="asc"?"desc":"asc":n.columns.findBySortField(e).sortDescendingByDefault?"desc":"asc";n.sortingProperty=e;n.goToPage(1);e=n.sortingProperty+":"+n.sortingDirection;if(n.columns.findByDataField(n.mainColumn).sortField==n.sortingProperty&&n.sortingDirection=="asc")e=null;n._saveToPreferences(n.preferenceCategoryName,n.cclGridConstants.preferenceKeys.sorting,e)};n.filter=function(e){if(n.filteringPreference!=e){n.filteringPreference=e;n.goToPage(1);n._saveToPreferences(n.preferenceCategoryName,n.cclGridConstants.preferenceKeys.filtering,e)}};n.goToPage=function(e){if(!n.keepSelection&&e!=n.pageNumber)document.getElementById(n.selectingHiddenClientID).value="";n.pageNumber=e;n.refresh()};n.changePageSize=function(e){n.pageSize=e;n.goToPage(1);n._saveToPreferences(n.preferenceCategoryName,n.cclGridConstants.preferenceKeys.pagesize,e)};n._getPageHref=function(e){return"javascript:"+n.name+".goToPage("+e+");"};n._addPager=function(){var e=window[n.pagerInstanceName];if(e){e.totalCount=n.totalCount;e.pageSize=n.pageSize;e.pageNumber=n.pageNumber;if(n.hidePagerWhenTotalCountLessMinPageSize&&n.totalCount<=e.getMinAvailablePageSize())$("#"+n.pagerContainerClientId).hide();else{$("#"+n.pagerContainerClientId).show();e.createIn($("#"+n.pagerContainerClientId).empty())}}};n._addHeader=function(e){var t=$("<tr></tr>"),r;if(n.allowSelecting){r=$("<th></th>").attr("scope","col").attr("class",n.cclGridConstants.cssClasses.selectColumn);r.append($("<input type='checkbox'/>").attr("id",n.name+"_select").on("click",function(){n.toggleSelectAll(this.checked)}));r.append($("<label class='"+n.cclGridConstants.cssClasses.hiddenLabel+"'</label>").attr("for",n.name+"_select").text(n.cclGridConstants.terms.selectAllRows));t.append(r)}for(var i=0;i<n.visibleColumns.length;i++){var s=n.columns.findByDataField(n.visibleColumns[i]);r=$("<th></th>").attr("scope","col");if(s.sortField){var o=$("<a></a>").attr("href","#").attr("title",s.title).click({sortField:s.sortField},function(e){n.sort(e.data.sortField);return false}),u=$("<span></span>").attr("class",n.cclGridConstants.cssClasses.thText).html(s.headerHtml);if(n.sortingProperty==s.sortField){r.attr("class",n.cclGridConstants.cssClasses.thSelected);var a=n.cclGridConstants.cssClasses.sortingArrow;if(n.sortingDirection!="asc")a+=" "+n.cclGridConstants.cssClasses.sortingArrowDesc;o.append($("<img />").attr("class",a).attr("src",n.cclGridConstants.onePixelTransparentImageUrl))}else r.attr("class",n.cclGridConstants.cssClasses.thSortable);o.append(u);r.append(o)}else r.html(s.headerHtml);s.className&&r.addClass(s.className);s.width&&r.css("width",s.width+"px");r.appendTo(t)}if(n.allowColumnChoosing){r=$("<a class='"+n.cclGridConstants.cssClasses.columnChooserLink+"'></a>").attr("href","javascript:"+n.name+".showColumnChooser();").attr("title",n.cclGridConstants.terms.columnChooserToolTip);r.append($("<img />").attr("src",n.cclGridConstants.onePixelTransparentImageUrl).attr("alt",n.cclGridConstants.terms.columnChooserToolTip));$("<th></th>").attr("class",n.cclGridConstants.cssClasses.columnChooserColumn).append(r).appendTo(t)}e.append(t)};n.getSelectedValues=function(){var e=$("#"+n.selectingHiddenClientID).val();if(e.length==0)return[];return e.slice(0,e.length-1).split(",")};n.clearSelection=function(){$("#"+n.selectingHiddenClientID).val("")};n.clear=function(){n.totalCount=0;n._addHeader($("#"+n.gridClientID+" > thead").empty());n._addPager();var e=$("#"+n.gridClientID+" > tbody");e.empty();var t=n._getColumnsCount();n._addRowWithText(e,n.emptyTableText,t,n.cclGridConstants.cssClasses.emptyTableCell);n._addEmptyRows(e,n.cclGridConstants.minRowCount-1,t);$("tr:nth-child(even)",e).addClass(n.cclGridConstants.cssClasses.alternateRow)};n.render=function(e,t){t||(e=n.StringToXml(e));n.totalCount=$("VirtualCount",e).last().text();var r=n.getSelectedValues();n._addHeader($("#"+n.gridClientID+" > thead").empty());n._addPager();var s=$("#"+n.gridClientID+" > tbody");s.empty();var o=$(":first-child > Items > *",e),u=o.length>0;if(o.length<1&&$(e).text()!="")o=$(e).children().children();if(n.totalCount<1){o.length=0;u=false}o.each(function(e,t){var o=$("<tr></tr>"),a=$(n.dataKeyName,t).text(),f=$(n.cclGridConstants.rowTooltipTextProperty,t);f.length>0&&o.attr("title",f.text());if(n.allowRowExpanding){o.css("cursor","pointer");o.on("click",function(e){n.expandCollapseRow(t,e,a);return true})}if(n.allowSelecting){f=r.contains(a);u&=f;var l=$("<td></td>").attr("class",n.cclGridConstants.cssClasses.selectColumn);if(n.dataKeySelectionVisible.length==0||$(n.dataKeySelectionVisible,t).text()==="true")l.append($("<input type='checkbox'/>").attr("id",n.name+"_select_"+a).attr("value",a).prop("checked",f).prop("defaultChecked",f).on("click",function(){n.toggleSelect(this)})).append($("<label class='"+n.cclGridConstants.cssClasses.hiddenLabel+"'</label>").attr("for",n.name+"_select_"+a).text(n.cclGridConstants.terms.selectOneRow+" "+$(n.mainColumn,this).text()));o.append(l);f&&o.addClass(n.cclGridConstants.cssClasses.selectedRow)}for(i=0;i<n.visibleColumns.length;i++){f=n.columns.findByDataField(n.visibleColumns[i]);l=$(n.visibleColumns[i],t);var c=$("<td></td>");c.html(f.renderTableDataCellValueInsideDiv?"<div title='"+l.text()+"'>"+l.text()+"</div>":l.text());f.className&&c.addClass(f.className);c.appendTo(o)}n.allowColumnChoosing&&o.append($("<td></td>"));s.append(o)});n.allowSelecting&&$("thead tr th."+n.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("checked",u);var a=n._getColumnsCount();o.length==0&&n._addRowWithText(s,n.emptyTableText,a,n.cclGridConstants.cssClasses.emptyTableCell);o.length<n.cclGridConstants.minRowCount&&n._addEmptyRows(s,n.cclGridConstants.minRowCount-Math.max(o.length,1),a);$("tr:nth-child(even)",s).addClass(n.cclGridConstants.cssClasses.alternateRow)};n._addRowWithText=function(e,t,n,r){e.append($("<tr></tr>").append($("<td></td>").attr("class",r).attr("colSpan",n).html(t)))};n._addEmptyRows=function(e,t,r){for(var i=0;i<t;i++)n._addRowWithText(e,"&nbsp;",r,"")};n.createColumnChooser=function(e){n.columnChooserClientID&&$("#"+n.columnChooserClientID).sortable({opacity:.8,placeholder:e,tolerance:"pointer"})};n.showColumnChooser=function(){$("#"+n.columnChooserClientID).empty();for(var e=n.visibleColumns.concat(n._getInvisibleColumns()),t=0;t<e.length;t++){var r=n.columns.findByDataField(e[t]),i=n.visibleColumns.contains(r.dataField);r=$("<li />").attr("class",n.cclGridConstants.cssClasses.columnChooser).append($("<input type='checkbox'/>").val(r.dataField).attr("id",n.name+"_"+r.dataField+"_chk").prop("checked",i).prop("defaultChecked",i)).append($("<label></label>").attr("for",n.name+"_"+r.dataField+"_chk").html(r.headerHtml));$("#"+n.columnChooserClientID).append(r)}window[n.columnChooserDialogName].open();(e=$("#"+this.columnChooserClientID).find("input:not(:disabled):first"))&&e.focus()};n.updateColumnsList=function(){var e=[];$(":checkbox","#"+n.columnChooserClientID).each(function(t,n){var r=$(n);r.prop("checked")&&e.push(r.val())});e.length==0&&e.push(n.mainColumn);if(!e.isEqual(n.visibleColumns)){n.visibleColumns=e;n.visibleColumns.contains(n.columns.findBySortField(n.sortingProperty).dataField)?n.refresh():n.sort(n.columns.findByDataField(n.visibleColumns[0]).sortField);var t=null;e.isEqual(n.defaultColumnOrder)||(t=n.visibleColumns.toString());n._saveToPreferences(n.preferenceCategoryName,n.cclGridConstants.preferenceKeys.columnOrder,t)}return true};n._collapseAll=function(){$("#"+n.gridClientID+" > tbody > tr."+n.accordionRow).hide()};n.expandCollapseRow=function(e,t,r){if(t=t?t:window.event){t=t.srcElement||t.target;if(!(t.tagName=="TD"||t.tagName=="TR"))return}if($(e).next().hasClass(n.cclGridConstants.cssClasses.accordionRow)){i=$(e).next();if(i.is(":hidden")){n._collapseAll();i.show();i.removeAttr("style")}else i.hide()}else{n._collapseAll();var i=$("<tr class='"+n.cclGridConstants.cssClasses.accordionRow+"'></tr>").hide(),s=$("<td></td>").attr("colSpan",n._getColumnsCount());t=this.accordionDataSourceUrl.indexOf("?")>0?"&":"?";$.get(n.accordionDataSourceUrl+t+n.accordionDataSourceUrlParameterName+"="+encodeURIComponent(r),{},function(e){s.html(e);i.show();i.removeAttr("style")},"html");i.append(s);$(e).after(i)}};n.getRow=function(e){return $("#"+n.gridClientID+" > tbody").find("tr:has(td:first input[value='"+e+"']:checkbox)")};Array.prototype.findByDataField=function(e){for(x in this)if(this[x].dataField==e)return this[x];return null};Array.prototype.findBySortField=function(e){for(x in this)if(this[x].sortField==e)return this[x];return null};Array.prototype.isEqual=function(e){if(this.length!=e.length)return false;for(var t=0;t<e.length;t++){if(this[t].compare)if(!this[t].compare(e[t]))return false;if(this[t]!==e[t])return false}return true};Array.prototype.contains=function(e){for(x in this)if(this[x]==e)return true;return false};n.StringToXml=function(e){var t;if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else t=(new DOMParser).parseFromString(e,"text/xml");return t};n.XmlToString=function(e){return window.ActiveXObject?e.xml:(new XMLSerializer).serializeToString(e)}}function CclGridSearchFilterInstance(e){window[e]=this;var t=this;this.inputEmptyCssClass=null;t.firstLoad=function(){t.isEmpty=t.settings.isEmpty;t.controls.searchInput.focus(function(){t.onFocus()}).keyup(function(e){return t.onKeyUp(e)}).keydown(function(e){e.which===CommonConstants.keyCodes.enter&&e.stopPropagation()}).keypress(function(e){return e.which!==CommonConstants.keyCodes.enter}).blur(function(){t.onBlur()});t.refresh()};t.onFocus=function(){if(t.isEmpty){t.isEmpty=false;t.refresh(true)}};t.onBlur=function(){if(t.controls.searchInput.val().length==0){t.isEmpty=true;t.refresh();t.filter("")}else{var e=t.settings.preferenceWithoutValue+t.controls.searchInput.val();t.filter(e)}};t.onKeyUp=function(e){if(t.isEmpty){t.isEmpty=false;t.refresh(true);return true}else if(e.which===CommonConstants.keyCodes.enter){e=t.settings.preferenceWithoutValue+t.controls.searchInput.val();t.filter(e);return false}};t.defineState=function(){if(!t.isEmpty&&t.controls.searchInput.val().length==0)t.isEmpty=true};t.refresh=function(e){if(t.isEmpty){t.controls.searchInput.addClass(t.inputEmptyCssClass);t.controls.searchInput.val(t.settings.searchText)}else{e&&t.controls.searchInput.val("");t.controls.searchInput.removeClass(t.inputEmptyCssClass)}}}function HtmlItemPicker(e){function t(){return a.is(":visible")}function n(e){$(a).find("li[data-id='"+e+"']").addClass("ccl-htmlitempicker-highlighteditem ")}function r(e){$(a).find("li[data-id='"+e+"']").removeClass("ccl-htmlitempicker-highlighteditem ")}function i(e,t){var i;r(e.id);i=u.settings.items[t];n(i.id);c=i}function s(){a=$("<span></span>").attr("id",e+"_menu").addClass(u.settings.cssClasses.menu).insertAfter(f).hide();var t=$("<ul></ul>").appendTo(a);u.settings.centerAlignment&&t.addClass(u.settings.cssClasses.centerAlignment);$.each(u.settings.items,function(e,n){t.append($("<li></li>").attr("data-id",n.id.toString()).append($("<a></a>").attr("href","#").html(n.innerHtml).click(function(e){o();if(u.controls.selectedValueHidden.val()!==n.id.toString()){var t=n.innerHtml;u.controls.selectedValueHidden.val(n.id);u.setSelectedHtmlContainer(t);u.onValueChangedFunction(n)}e.preventDefault()})))})}function o(){a.hide();r(c.id)}window[e]=this;var u=this,a,f,l,c;u.initialize=function(){f=u.controls.container;l=f.find("> span");f.find("> a");s();l.width(u.settings.width);$(document).click(function(e){if(e.target===f[0]||$(e.target).closest(f).length===1){if(a.is(":visible"))o();else{e=f.position();a.css({top:e.top+f.height()-1+"px",left:e.left+"px","z-index":u.settings.zIndex,width:f.width()}).show()}if(t()){c=u.getSelectedItem();n(c.id)}}else if(t()){var r=a.offset();e.clientX>r.left&&e.clientX<r.left+a.width()&&e.clientY>r.top&&e.clientY<r.top+a.height()||o()}});$(document).keydown(function(e){if(t())switch(e.which){case 13:if(u.controls.selectedValueHidden.val()!==c.id.toString()){var n=c.innerHtml;u.controls.selectedValueHidden.val(c.id);u.setSelectedHtmlContainer(n);u.onValueChangedFunction(c)}o();e.preventDefault();return false;case 27:o();break;case 38:if(t()){n=u.settings.items.indexOf(c);n=n==0?u.settings.items.length-1:n-1;i(c,n)}e.preventDefault();return false;case 40:if(t()){n=u.settings.items.indexOf(c);n=n==u.settings.items.length-1?0:n+1;i(c,n)}e.preventDefault();return false}})};u.getMenu=function(){return a};u.getSelectedItem=function(){var e=u.settings.items[0];$.each(u.settings.items,function(t,n){if(u.controls.selectedValueHidden.val()==n.id.toString())e=n});return e};u.setSelectedHtmlContainer=function(e){l.html("\n"+e+"\n")};u.setMenuItemContent=function(e,t){$(a.find("a")[e]).html(t);u.settings.items[e].innerHtml=t};return u}function InlineFeedback(e){window[e]=this;var t=this;t.show=function(e){var n=t.controls;n.container.css("visibility","visible");e>0&&n.container.delay(e*1e3).fadeTo("slow",0,function(){$(this).css("visibility","hidden").css("opacity",1)})}}function KeepAlive(){function e(){n&&n.webMethodUrl&&$.ajax({type:"POST",data:n.postData,url:n.webMethodUrl,contentType:"application/json; charset=utf-8",success:function(){r=0;setTimeout(function(){e()},n.intervalInSeconds*1e3)},error:function(){r++;r<n.maxNumberOfTries&&setTimeout(function(){e()},n.errorTimeoutInSeconds*1e3)}})}var t=this,n,r=0;t.initialize=function(){(n=t.settings)&&setTimeout(function(){e()},n.intervalInSeconds*1e3)};return t}function LabeledInput(e){function t(){return f.find("."+i.settings.itemClass)}function n(e,t){i.pushLabel(t.item.label,t.item.metadata);o.val("");return false}function r(){a.each(function(e){e()})}var i=this,s,o,u,a=[],f;window[e]=i;i.initialize=function(){i.settings.onLabelsChangedHandler&&a.push(i.settings.onLabelsChangedHandler);s=i.settings.removeButtonTooltipFormat;f=$("#"+i.settings.containerId);f.on(i.settings.clickOrTouch,".ccl-labeled-input-remove",function(e){$(e.target).parent().remove();r()});o=$("#"+i.settings.inputId);u=o.parent();o.autocomplete({position:{collision:"fit"},source:i.settings.autocompleteCallback,select:n,delay:i.settings.autocomplete.delay,minLength:i.settings.autocomplete.minLength,messages:{noResults:"",results:function(){}},create:function(){if(i.settings.renderItem)$(this).data("ui-autocomplete")._renderItem=i.settings.renderItem}});o.on("keydown",function(e){if(e.which===CommonConstants.keyCodes.backspace&&!i.hasText()){e=t();if(e.length>0){e.last().remove();r()}}});i.settings.autocomplete.autocompleteMenuCssClass&&o.data("ui-autocomplete").menu.activeMenu.addClass(i.settings.autocomplete.autocompleteMenuCssClass);u.append(o.data("autocomplete").menu.activeMenu.detach());f.on(i.settings.clickOrTouch,function(e){if(!o.is(":focus")){e.preventDefault();o.focus()}})};i.pushLabel=function(e,t){var n=$("<span></span>"),o=$("<span>"+e+"</span>"),a=$('<a href="#" class="ccl-labeled-input-remove">x</a>');a.prop("title",s.replace("{0}",e));n.data("meta",t);o.addClass(i.settings.textClass);n.addClass(i.settings.itemClass);n.append(o).append(a);n.insertBefore(u);r()};i.getLabels=function(){return $.makeArray(t().map(function(e,t){return $(t).data("meta")}))};i.mapLabelsField=function(e){return i.getLabels().map(function(t){return t[e]})};i.clear=function(){t().remove();o.val("")};i.hasText=function(){return o.val().trim()!==""};i.getText=function(){return o.val()};i.addLabelsChangedHandler=function(e){a.push(e)};i.focus=function(){o.focus()}}function LearningObjectivesSelector(e,t,n,r,i,s){window[e]=this;var o=this;o.readLearningObjectivesUrl=i.readLearningObjectivesUrl;o.selectedIds=r;o.selectableCategory=i.selectableCategory;o.selectableObjective=i.selectableObjective;o.selectableSubject=i.selectableSubject;o.terms=n;o.language=i.language;o.updateContainerOnSelect=i.updateContainerOnSelect;if(t){o.folderSelector=t;o.baseGetRequestData=t.getRequestData;o.editable=true}else o.editable=false;o.placeHolderOnEmpty=i.placeHolderOnEmpty;o.courseId=i.courseId;o.countryCode=i.countryCode;o.showTooltip=i.showTooltip;o.firstLoad=true;o.cache={};o.cssClasses=s;o.filtersData={};if(i.filtersData!="")o.filtersData=i.filtersData;o.defaultFilter=i.defaultFilter;o.filtersddl=$(".js-filter-ddl");o.GetCurrentFilter=function(){if(o.filtersddl.length>0)return o.filtersddl.find(":selected").val();return o.defaultFilter};if(o.folderSelector){o.folderSelector.dialogContainer.addClass(o.cssClasses.learningObjectivesSelector);o.folderSelector.showFeedbackOnEmpty=o.filtersddl.length==0}o.selectedContainer=$("#"+e).find("."+o.cssClasses.selectedContainer);o.emptyContainer=$("#"+e).find("."+o.cssClasses.emptyContainer);o.addLink=$("#"+e).find("."+o.cssClasses.addLink);o.editable&&o.selectedContainer.on("click","."+o.cssClasses.removeLink,function(){o.removeSelectedIds([$(this).attr("loId")]);return false});o.openDialog=function(){o.folderSelector&&o.folderSelector.openDialog(o.filtersData[o.GetCurrentFilter()])};o.updateSelectedItemsContainer=function(){if(o.updateContainerOnSelect){$(o.selectedContainer).empty();$(o.emptyContainer).empty();if(o.selectedIds.length==0)$(o.emptyContainer).text(o.placeHolderOnEmpty);else{o.setSelectedIds(o.selectedIds,true);o.loadData(o.selectedIds,function(e){var t=[];$.each(e,function(e,n){var r=$("<div></div>"),i=$("<span></span>");i.addClass(o.cssClasses.selectedItemIcon);i.addClass(n.type);r.append(i);r.append(o.showTooltip?o.createTooltip(n.title,n.description):$("<span></span>").text(n.title));if(o.editable){i=$("<a></a>").addClass(o.cssClasses.removeLink).attr("loId",n.id).attr("title",o.terms.deleteTooltip).attr("href","#").text("×");r.append(i)}$(o.selectedContainer).append(r);t.push(n.id)});t.length==0&&$(o.selectedContainer).text(o.placeHolderOnEmpty)})}}};o.createTooltip=function(e,t){var n=$("<span></span>");n.text(e);var r=new ToolTip(null,n);r.title=e;r.description=t;r.settings={showPopupTimeout:300,hidePopupTimeout:300,cssClasses:{tooltipPopup:"ccl-tooltip-popup",linkToTooltip:"ccl-tooltip-link",arrowUp:"ccl-tooltip-arrow-up",arrowDown:"ccl-tooltip-arrow-down",arrowContainer:"ccl-tooltip-arrow-container",tooltipTitle:"ccl-tooltip-popup-title",tooltipDescription:"ccl-tooltip-popup-description"}};r.initialize();return n};o.showSelectFeedback=function(){o.folderSelector.showSelectFeedback()};o.addSelectedIds=function(e){var t={};$.each(o.selectedIds,function(e,n){t[n]=n});$.each(e,function(e,n){t[n]=n});o.selectedIds=[];$.each(t,function(e){o.selectedIds.push(e)});$(o).trigger("selectionchange");o.updateSelectedItemsContainer()};o.removeSelectedIds=function(e){var t={};$.each(o.selectedIds,function(e,n){t[n]=n});$.each(e,function(e,n){delete t[n]});o.selectedIds=[];$.each(t,function(e){o.selectedIds.push(e)});$(o).trigger("selectionchange");o.updateSelectedItemsContainer()};o.clearSelectedIds=function(){o.selectedIds=[];$(o).trigger("selectionchange");o.updateSelectedItemsContainer()};o.setSelectedIds=function(e,t){o.selectedIds=[];o.selectedIds=e;if(o.folderSelector){$.each(o.selectedIds,function(e,n){o.folderSelector.controls.grid.toggleSelectById(n,t)});t&&o.folderSelector.enableSelectButton(false)}};o.loadData=function(e,t){var n=[],r={};$.each(e,function(e,t){if(o.cache[t]===undefined)n.push(t);else r[t]=o.cache[t]});n.length==0?t(r):$.ajax({type:"POST",url:o.readLearningObjectivesUrl,data:{ids:n.join(",")},dataType:"jsonp",success:function(e){$.each(e.Items,function(e,t){var n={id:t.Id,title:t.Title,description:t.Description,type:t.Type};o.cache[t.Id]=n;r[t.Id]=n});t(r)},error:function(){$(o).trigger("error")}})};o.changeFilter=function(e){o.folderSelector.reinitialize(true,o.filtersData[e])};if(t){var u=false;t.getRequestData=function(e,t,n){e=o.baseGetRequestData(e,t,n);e.SelectableCategory=o.selectableCategory;e.SelectableLearningObjective=o.selectableObjective;e.SelectableSubject=o.selectableSubject;if(o.language)e.lan=o.language;return e};$(t).on(i.folderSelectorEvents.select,function(e,t){o.addSelectedIds(u?[t.selectedId]:t.nodeIds)});i.restrictInsertContext?$(t).on(i.folderSelectorEvents.gridRender,function(e,t,n){if(u=n.virtualItemCount>n.folders.length){t.toggleSelectAll(true);t.toggleEnableAll(false)}}):$(t).on(i.folderSelectorEvents.gridRender,function(e,t){$.each(o.selectedIds,function(e,n){t.toggleSelectById(n,true)})});o.filtersddl&&o.filtersddl.on("change",function(){o.changeFilter($(this).val())})}o.updateSelectedItemsContainer();return o}function MetadataTranslationsList(e){window[e]=this;var t=this,n;t.firstLoad=function(){n=t.controls.table.find("tbody");var e=t.controls.languageDataHidden.val();t.settings.metadataLanguages=e?JSON.parse(e):[];t.controls.addLanguageLink.on("click",function(){t.addLanguageLinkClick()});t.controls.languageInput.on("change",function(){t.controls.languageIdHidden.val(t.controls.languageInput.val())});t.updateAddButton();$.each(t.metadataColumns,function(e,n){if(n.IsMultiLine){var r=t.getInputForMetadataColumn(n),i=r.attr("rows")*r.attr("cols")*2;r.keypress(function(e){r.val().length>i&&e.preventDefault()});r.on("paste",function(){setTimeout(function(){r.val($.trim(r.val().replace(/[\n\r]+/g,"")));r.val(r.val().substring(0,i))},100)})}})};t.getInputForMetadataColumn=function(e){return $("#"+t.settings.modalDialogClientId+"_"+e.Name)};t.addLanguageLinkClick=function(){t.fillLanguageInfo(null)};t.editLanguageLinkClick=function(e,n){t.fillLanguageInfo(n)};t.dialogLoaded=function(){t.controls.languageInput.is(":visible")?t.controls.languageInput.focus():t.getInputForMetadataColumn(t.metadataColumns[0]).focus()};t.saveLanguageClick=function(){t.clearValidators();var e={},n=true,r=parseInt(t.controls.languageIdHidden.val());if(r<0){t.showValidationMessage(t.controls.languageInput,t.settings.requiredValidationMessage);n=false}e[t.settings.metadataLanguageIdDataField]=r;$.each(t.metadataColumns,function(r,i){var s=$.trim(t.getInputForMetadataColumn(i).val());t.validateMetadataColumn(i,s)||(n=false);e[i.DataField]=s});if(!n)return false;var i=t.findMetadataLanguageById(r);i?$.each(t.metadataColumns,function(t,n){i[n.DataField]=e[n.DataField]}):t.settings.metadataLanguages.push(e);t.saveLanguagesToHidden();t.fillTableRow(e);t.updateTable();t.updateAddButton();return true};t.getTableRow=function(e){e=n.find("tr:has(td:first input[value='"+e+"']:hidden)");if(e.length==0)e=$("<tr></tr>").appendTo(n);return e};t.fillTableRow=function(e){var n=t.cssClasses,r=e[t.settings.metadataLanguageIdDataField],i=t.getTableRow(r);i.empty().append($("<td></td>").addClass(n.TableColumnLanguage).append($("<input />").attr("type","hidden").val(r)).append($("<a></a>").attr("href","javascript:void(0);").text(t.getLanguageTitleById(r)).on("click",function(){t.editLanguageLinkClick(this,r)})));$.each(t.metadataColumns,function(t,n){i.append($("<td></td>").addClass(n.CssClass).text(e[n.DataField]))});i.append($("<td></td>").addClass(n.TableColumnDelete).append($("<a></a>").addClass("ccl-iconlink").addClass(n.TableColumnDeleteImage).attr("href","javascript:void(0);").attr("title",t.settings.deleteRowTooltip).on("click",function(){t.removeLanguageClick(this,r)}).append($("<img />").attr("src",t.settings.deleteImageUrl).attr("alt",t.settings.deleteRowTooltip).addClass(n.tableColumnDeleteImage))))};t.validateMetadataColumn=function(e,n){var r=true;if(e.IsRequired&&n.length==0){r=false;t.showValidationMessage(t.getInputForMetadataColumn(e),t.settings.requiredValidationMessage)}return r};t.removeLanguageClick=function(e,n){var r=t.settings.metadataLanguages;$.each(r,function(e,i){if(i[t.settings.metadataLanguageIdDataField]==n){r.splice(e,1);t.saveLanguagesToHidden();return false}return true});$(e).parent().parent().remove();t.updateTable();t.updateAddButton()};t.saveLanguagesToHidden=function(){t.controls.languageDataHidden.val(JSON.stringify(t.settings.metadataLanguages))};t.findMetadataLanguageById=function(e){var n=null;$.each(t.settings.metadataLanguages,function(r,i){if(i[t.settings.metadataLanguageIdDataField]==e){n=i;return false}return true});return n};t.getAvailableLanguagesData=function(){return $.grep(t.settings.languages,function(e){return t.findMetadataLanguageById(e.Key)==null})};t.disableSelectedLanguages=function(){var e=t.controls.languageInput;e.find("option").remove();$.each(t.getAvailableLanguagesData(),function(t,n){e.append($("<option></option>").val(n.Key).text(n.Value))})};t.getLanguageTitleById=function(e){for(index in t.settings.languages)if(t.settings.languages[index].Key==e)return t.settings.languages[index].Value;return""};t.showValidationMessage=function(e,n){$("<div></div>").text(n).addClass(t.cssClasses.ErrorMessage).appendTo(e.parent())};t.clearValidators=function(){t.controls.modalDialogContainer.find("div."+t.cssClasses.ErrorMessage).remove()};t.fillLanguageInfo=function(e){var n=null;if(e>=0)n=t.findMetadataLanguageById(e);var r=!!n;t.clearValidators();window[t.settings.modalDialogName].setNewTitle(r?t.getLanguageTitleById(e):t.settings.addLanguageDialogTitle);t.controls.languageIdHidden.val(r?n[t.settings.metadataLanguageIdDataField]:-1);t.controls.languageInput.parent().toggle(!r);$.each(t.metadataColumns,function(e,i){t.getInputForMetadataColumn(i).val(r?n[i.DataField]:"")});r||t.disableSelectedLanguages();window[t.settings.modalDialogName].open()};t.updateTable=function(){var e=t.cssClasses.TableRowAlternate;n.find("tr:even").removeClass(e);n.find("tr:odd").addClass(e);n.parent().toggle(n.find("tr:has(td)").length>0)};t.updateAddButton=function(){t.controls.addLanguageLink.toggle(t.settings.metadataLanguages.length<t.settings.languages.length-1)};return t}function OkOrCancel(e){window[e]=this;var t=this,n,r;t.initialize=function(){n=t.scripts;r=t.controls;t.toggleInProgressState(false);r.okButton.click(function(){t.toggleInProgressState(true);CommonFunctions.safeExecuteFunction(n.okButtonClick)})};t.toggleInProgressState=function(e,n){if(e){r.okButton.addClass(t.settings.inProgressCssClass);r.okButton.attr("title",t.settings.inProgressTitle)}else{r.okButton.removeAttr("title");r.okButton.removeClass(t.settings.inProgressCssClass)}r.okButton.prop("disabled",e);n&&r.cancelButton.toggleHyperlink(!e)};return t}function Pager(e){window[e]=this;var t=this,n,r;t.totalCount=0;t.pageSize=0;t.pageNumber=0;t.initialize=function(){n=t.settings.cssClasses;r=t.settings.terms};t.goToPage=function(e){t.customScripts.goToPage&&t.customScripts.goToPage({pageNumber:e})};t.changePageSize=function(e){t.customScripts.changePageSize&&t.customScripts.changePageSize({pageSize:e})};t.hide=function(){t.controls.pagerContainer.empty()};t.getMinAvailablePageSize=function(){return t.settings.pageSizes&&t.settings.pageSizes.length>0?t.settings.pageSizes[0]:0};t.render=function(){var i=t.controls.pagerContainer,s=$("<ul></ul>").attr("class",n.pager),o=Math.ceil(t.totalCount/t.pageSize),u,a,l;i.empty();i.append(s);if(t.mode&t.settings.pagerMode.nextPrev&&o>0){if(t.pageNumber>1){l=$("<li></li>").attr("class",n.previousNext);var c=t.pageNumber-1;a=$("<a></a>").attr("href","#").attr("title",r.previous).click(function(){t.goToPage(c);return false}).append($("<span></span>").html("&laquo;").attr("class",n.prevArrow));l.append(a)}else l=$("<li></li>").attr("class",n.text).append($("<span></span>").html("&laquo;").attr("class",n.prevArrowDisabled));if(t.pageNumber<o){var p=t.pageNumber+1;a=$("<li></li>").attr("class",n.previousNext).append($("<a></a>").attr("href","#").attr("title",r.next).click(function(){t.goToPage(p);return false}).append($("<span></span>").html("&raquo;").attr("class",n.nextArrow)))}else a=$("<li></li>").attr("class",n.text).append($("<span></span>").html("&raquo;").attr("class",n.nextArrowDisabled));s.append(l);t.mode&t.settings.pagerMode.nextPrevBeforeNumericPages&&s.append(a)}if(t.mode&t.settings.pagerMode.numericPages){t.mode&t.settings.pagerMode.nextPrevBeforeNumericPages&&s.append($("<li>|</li>").attr("class",n.text));for(l=1;l<=o;l++)if(t.pageNumber==l){u=false;s.append($("<li></li>").attr("class",n.selectedItem).append($("<span></span>").text(l)))}else if(t.pageNumber==l||l==1||l==o||Math.abs(t.pageNumber-l)<=t.settings.pageLinksNearSelectedCount)s.append($("<li></li>").append($("<a>"+l+"</a>").attr("href","#").click({actualPageNumber:l},function(e){t.goToPage(e.data.actualPageNumber);return false})));else if(!u){u=true;s.append($("<li></li>").attr("class",n.text).append("<span>...</span>"))}}(t.mode&t.settings.pagerMode.nextPrevBeforeNumericPages)==0&&s.append(a);if(t.mode&t.settings.pagerMode.pageSize||t.mode&t.settings.pagerMode.pageSizeDropdown||t.mode&t.settings.pagerMode.pageSizeStaticLabel||t.mode&t.settings.pagerMode.pageInfo){s=$("<span></span>").attr("class",n.pageSizeChooser);i.append(s);if(t.mode&t.settings.pagerMode.pageInfo){l=t.pageSize*t.pageNumber;if(l>t.totalCount)l=t.totalCount;i=1+t.pageSize*(t.pageNumber-1);if(t.pageNumber==0||t.totalCount==0)i=0;s.append($("<span></span>").text(r.pageInfoLabelTemplate.replace("{0}",i).replace("{1}",l).replace("{2}",t.totalCount)))}i=t.settings.pageSizes;if(t.mode&t.settings.pagerMode.pageSize){o=$("<ul></ul>");s.append(o);o.append($("<li></li>").attr("class",n.pageSizeChooserLabel).text(r.pageSizeChooserLabel));for(l=0;l<i.length;l++){u=i[l]==t.pageSize?$("<li></li>").attr("class",n.selectedItem).text(i[l]):$("<li></li>").append($("<a></a>").attr("href","javascript:"+e+".changePageSize("+i[l]+");").text(i[l]));o.append(u)}}if(t.mode&t.settings.pagerMode.pageSizeDropdown){l=$("<select></select>");$(l).change(function(){window[e].changePageSize(this.options[this.selectedIndex].value)});s.append(l);for(o=0;o<i.length;o++){u=$("<option></option>").attr("value",i[o]).text(r.pageSizeItemPrefix+" "+i[o]);l.append(u)}l.find("option").each(function(){var e=$(this);if(e.val()==t.pageSize){e.prop("selected",true);return false}})}t.mode&t.settings.pagerMode.pageSizeStaticLabel&&s.append($("<span/>").text(r.pageSizeItemPrefix+" "+t.pageSize).addClass(n.pageSizeStaticLabel))}};t.createIn=function(e){var r=$("<div></div>").prop("className",n.main);e.append(r);t.controls.pagerContainer=r;t.render()};return t}function ProgressBar(e){window[e]=this;var t=this,n,r;t.initialize=function(){n=t.settings;r=t.controls;r.bar.progressbar({value:n.percent})};t.setPercent=function(e){r.bar.progressbar("option",{value:e});r.labelContainer.html(e+"%")};return t}function CclResponsiveGrid(e){function t(e){return e.replace(/^\s+|\s+$/,"")}function n(e){var t=f.scrollTop(),n=f.scrollLeft(),r=o.offset();r.frameTop=0;r.frameLeft=0;if(l){var i=$('iframe[name="mainmenu"]',f[0].document).offset();r.frameTop=i.top;r.frameLeft=i.left}i=r.top+r.frameTop+o.outerHeight()-u.outerHeight();if(t>=r.top+r.frameTop&&t<i){if(!u.hasClass(c)){a.height(u.height()).show();u.css("width",u.width()).addClass(c)}e?u.css("top",t-r.frameTop):u.css("left",r.left-n)}else if(u.hasClass(c)){a.hide();u.removeClass(c).css("top","").css("left","").css("width","")}}function r(){if(u.hasClass(c)){u.removeClass(c).css("width","");a.height(u.height());u.css("width",u.width()).addClass(c)}}function i(e){return $.map(e.find("div > ul."+s.cclGridConstants.cssClasses.gridRow).parent(),function(e){var t=parseInt($(e).find("ul > li."+s.cclGridConstants.cssClasses.rowDetailsColumn+' > input[type="hidden"].'+s.cclGridConstants.cssClasses.orderValue).val()),n=parseInt($(e).index())+1+(s.pageNumber-1)*s.pageSize;if(t!==n)return{elementPrimaryKey:$(e).find("ul > li."+s.cclGridConstants.cssClasses.rowDetailsColumn+' > input[type="hidden"].'+s.cclGridConstants.cssClasses.primaryKey).val(),elementNewIndex:$(e).index(),elementNewOrderValue:n};return null})}window[e]=this;var s=this;s.name=e;s.gridClientID=null;s.pageSize=null;s.pageNumber=null;s.pagerInstanceName=null;s.cclGridConstants=null;s.pageNumberHiddenClientID=null;s.pageSizeHiddenClientID=null;s.preferenceCategoryName=null;s.selectingHiddenClientID=null;s.sortingHiddenClientID=null;s.filteringHiddenClientID=null;s.selectColumn=null;s.selectedRow=null;s.ajaxSettings=null;s.totalCount=0;s.freezeToolbar=false;s.filteringPreference=null;s.sortingProperty=null;s.isIos=false;s.isReorderModeAvailable=false;s.orderProperty=null;s.reorderTogglerClientId=null;s.isReorderModeOn=false;s.isReorderModeHandlerAttached=false;var o,u,a,f=$(window),l=false,c;s.initialize=function(){o=$("#"+s.gridClientID);u=o.find("."+s.cclGridConstants.cssClasses.toolbar);s.restoreState();s.attachEvents();s.ajaxSettings.useAjaxMode&&s.ajaxSettings.dataSourceWebMethodUrl&&!s.ajaxSettings.delayedInitialization&&s.refresh();if(s.freezeToolbar&&u.length){c=s.cclGridConstants.cssClasses.toolbarFreeze;a=$('<div style="display:none;"/>').attr("class",u.attr("class")).insertAfter(u);if(s.isIos)if(l=window.top!=window){f=$(window.top);var e=function(){n(true)};f.on("scroll",e);$(window).on("unload",function(){f.off("scroll",e)})}$(window).scroll(function(){n()}).resize(function(){r()})}};s.useAjaxMode=function(){return s.ajaxSettings&&s.ajaxSettings.useAjaxMode};s.goToPage=function(e){document.getElementById(s.selectingHiddenClientID).value="";s.pageNumber=e;s.refresh();$(window).scrollTop(0)};s.sort=function(e){if(s.sortingProperty!=e){s.sortingProperty=e;s.goToPage(1)}};s.filter=function(e){if(s.filteringPreference!=e){s.filteringPreference=e;s.goToPage(1)}};s.changePageSize=function(e){s.pageSize=e;s.goToPage(1)};s.restoreState=function(){s.pageSize=parseInt(document.getElementById(s.pageSizeHiddenClientID).value,10);s.pageNumber=parseInt(document.getElementById(s.pageNumberHiddenClientID).value,10);s.sortingProperty=document.getElementById(s.sortingHiddenClientID).value;s.filteringPreference=document.getElementById(s.filteringHiddenClientID).value};s.saveState=function(){document.getElementById(s.pageSizeHiddenClientID).value=s.pageSize;document.getElementById(s.pageNumberHiddenClientID).value=s.pageNumber;document.getElementById(s.sortingHiddenClientID).value=s.sortingProperty;document.getElementById(s.filteringHiddenClientID).value=s.filteringPreference};s._addRemoveSelectedValue=function(e,t){t?CommonFunctions.addIdToHidden(s.selectingHiddenClientID,e):CommonFunctions.removeIdFromHidden(s.selectingHiddenClientID,e)};s.toggleSelect=function(e){s._applySelectedRowClass(e.parentNode.parentNode,e.checked);o.find("."+s.cclGridConstants.cssClasses.selectColumn+" input:checkbox").each(function(e,t){s._addRemoveSelectedValue(t.value,t.checked)})};s.getSelectedValues=function(){var e=$("#"+s.selectingHiddenClientID).val();if(e.length==0)return[];return e.slice(0,e.length-1).split(",")};s.replaceKeyValue=function(e,t){o.find("."+s.cclGridConstants.cssClasses.selectColumn+" input:checkbox[value='"+e+"']").each(function(n,r){r.value=t;if(r.checked){s._addRemoveSelectedValue(e,false);s._addRemoveSelectedValue(t,true)}});var n=s.cclGridConstants.cssClasses.gridRow+"-";o.find("."+n+e+":first").removeClass(n+e).addClass(n+t)};s.getRowById=function(e){return o.find("."+s.cclGridConstants.cssClasses.gridRow+"-"+e+":first")};s.getRowsContainer=function(){return o.find("."+s.cclGridConstants.cssClasses.gridRowsContainer+":first")};s.getRowsCount=function(){return s.getRowsContainer().find("."+s.cclGridConstants.cssClasses.gridRow).length};s.toggleRowStatus=function(e,t){return s.getRowById(e).parent().toggleClass(s.cclGridConstants.cssClasses.inactiveRow,!t)};s.getGridElement=function(){return o};s.getToolbarElement=function(){return u};s.getFeedback=function(){return window[s.feedbackInstanceName]};s.clearSelection=function(){$("#"+s.selectingHiddenClientID).val("")};s._applySelectedRowClass=function(e,n){if(n){var r=s.cclGridConstants.cssClasses.selectedRow;e.className=t(e.className.replace(r,""));e.className=t(e.className+" "+r)}else e.className=t(e.className.replace(s.cclGridConstants.cssClasses.selectedRow,""))};s.toggleSelectAll=function(e){o.find("."+s.cclGridConstants.cssClasses.selectColumn+" input:checkbox").each(function(t,n){n.checked=e;s._addRemoveSelectedValue(n.value,e);s._applySelectedRowClass(n.parentNode.parentNode,e)})};s.appendTextToGridContainer=function(e){var t=s.getRowsContainer();e=$("<div></div>").addClass(s.cclGridConstants.cssClasses.gridText).html(e);t.html(e)};s.refresh=function(){s.saveState();s.appendTextToGridContainer(s.cclGridConstants.terms.ajaxLoadingText);s.updateFreezeState();if(s.ajaxSettings.useAjaxMode)return $.ajax({type:"POST",url:s.ajaxSettings.dataSourceWebMethodUrl,data:"pageNumber="+s.pageNumber+"&pageSize="+s.pageSize+"&sort="+s.sortingProperty+"&filter="+s.filteringPreference+s._getParamsStr(),dataType:"json",success:function(e){s.render(e);s.updateFreezeState()},error:function(){s.appendTextToGridContainer(s.cclGridConstants.terms.ajaxErrorText)}});else s.postbackFunction()};s._getParamsStr=function(){var e="";$.each(s.ajaxSettings.dataSourceWebMethodParams,function(t,n){e+="&"+t+"="+escape(n)});return e};s.getRowPrimaryKeyValue=function(e){return s.getCurrentRow(e).find("."+s.cclGridConstants.cssClasses.rowDetailsColumn+" ."+s.cclGridConstants.cssClasses.primaryKey).val()};s.getRowPrimaryKeyValueByIndex=function(e){return s.getRowsContainer().find("."+s.cclGridConstants.cssClasses.gridRow+":eq("+e+") ").find("."+s.cclGridConstants.cssClasses.rowDetailsColumn+" ."+s.cclGridConstants.cssClasses.primaryKey).val()};s.getRowIndex=function(e){return s.getCurrentRow(e).find("."+s.cclGridConstants.cssClasses.rowDetailsColumn+" ."+s.cclGridConstants.cssClasses.rowIndex).val()};s.getCurrentRow=function(e){return $(e).parents("."+s.cclGridConstants.cssClasses.gridRow)};s.render=function(e,t){if(t=typeof t!=="undefined"?t:false)s.totalCount+=e.virtualCount;else s.totalCount=e.virtualCount;s.reInitializePager(s.pageNumber,s.pageSize,s.totalCount);var n=s.getRowsContainer();t?n.append(e.gridData):n.html(e.gridData);s.isReorderModeAvailable&&$("#"+s.reorderTogglerClientId).parent("li").removeClass(s.cclGridConstants.cssClasses.selectedItem);if(s.orderProperty.length>0){s.isReorderModeAvailable=s.sortingProperty.indexOf(s.orderProperty)>=0&&s.totalCount>1;s.attachReorderModeHandler();s.reorderTogglerClientId.length>0&&s.toggleReorderTogglerElement($("#"+s.reorderTogglerClientId),s.isReorderModeAvailable);s.reorderModeAjaxSettings.reorderMode=="Auto"&&s.toggleReorderMode()}o.trigger("datachanged")};s.addNewRow=function(){$.ajax({type:"POST",url:s.addNewSettings.webMethodUrl,data:s.addNewSettings.params||"{}",dataType:"json",success:function(e){s.render(e,true);s.updateFreezeState();s.getRowsCount()>0&&s.getEmptyTextContainer().hide()},error:function(){s.appendTextToGridContainer(s.cclGridConstants.terms.ajaxErrorText)}})};s.attachEvents=function(){o.on("click","."+s.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]",function(){s.toggleSelect(this)});o.on("change","."+s.cclGridConstants.cssClasses.sorting+" > select",function(){var e=$(this).val();s.sort(e)});s.freezeToolbar&&s.isIos&&o.on("hybrideditoriteminlinemodechanged",function(e,t){t.isEditMode||n(true)});s.isReorderModeAvailable&&s.attachReorderModeHandler()};s.reInitializePager=function(e,t,n){var r=window[s.pagerInstanceName];if(r){r.pageNumber=e;r.pageSize=t;r.totalCount=n;r.render();r.controls.pagerContainer.toggle(n>0)}};s.updateFreezeState=function(e){if(s.freezeToolbar&&u.length){n(e);r()}};s.removeEmptyText=function(){s.getEmptyTextContainer().remove()};s.getEmptyTextContainer=function(){return s.getRowsContainer().children("."+s.cclGridConstants.cssClasses.emptyGridText)};s.getRowOrderPropertyValue=function(e){return e.find("."+s.cclGridConstants.cssClasses.rowDetailsColumn+" ."+s.cclGridConstants.cssClasses.orderValue).val()};s.setRowOrderPropertyValue=function(e,t){return e.find("."+s.cclGridConstants.cssClasses.rowDetailsColumn+" ."+s.cclGridConstants.cssClasses.orderValue).val(t)};s.setRowIndexPropertyValue=function(e,t){return e.find("."+s.cclGridConstants.cssClasses.rowDetailsColumn+" ."+s.cclGridConstants.cssClasses.rowIndex).val(t)};s.attachReorderModeHandler=function(){if(!s.isReorderModeHandlerAttached)if(s.isReorderModeAvailable){$("."+s.cclGridConstants.cssClasses.reorderModeSelector).sortable({axis:"y",scrollSensitivity:100,handle:"."+s.cclGridConstants.cssClasses.reorderModeDragHandler,cursor:"move"});$("."+s.cclGridConstants.cssClasses.reorderModeSelector).on("sortstart",function(e,t){t.item.data("reorderItemEntityId",s.getRowPrimaryKeyValueByIndex(t.item.index()));t.item.data("oldOrderValue",s.getRowOrderPropertyValue(t.item));t.item.data("oldIndexValue",t.item.index())});$("."+s.cclGridConstants.cssClasses.reorderModeSelector).on("sortchange",function(){});$("."+s.cclGridConstants.cssClasses.reorderModeSelector).on("sortstop",function(e,t){var n=parseInt(t.item.data("oldOrderValue")),r=parseInt(t.item.data("oldIndexValue")),o=parseInt(t.item.index());if(r!==o){o>r?t.item.data("newOrderValue",n+(o-r)):t.item.data("newOrderValue",n-(r-o));s.useAjaxMode()&&s.callReorderModeUpdateMethod(t.item,i($(this)))}});$("."+s.cclGridConstants.cssClasses.reorderModeSelector).on("sortupdate",function(){});s.isReorderModeHandlerAttached=true}};s.toggleReorderMode=function(){s.isReorderModeOn=s.reorderModeAjaxSettings.reorderMode=="Auto"?true:!s.isReorderModeOn;$("#"+s.reorderTogglerClientId).parent("li").toggleClass(s.cclGridConstants.cssClasses.selectedItem,s.isReorderModeOn);o.find("."+s.cclGridConstants.cssClasses.reorderModeColumnSelector+" div").toggleClass(s.cclGridConstants.cssClasses.reorderModeDragHandler,s.isReorderModeOn);o.find("."+s.cclGridConstants.cssClasses.reorderModeColumnSelector+" div > img").toggleClass(s.cclGridConstants.cssClasses.hidden,!s.isReorderModeOn)};s._getReorderParamsStr=function(){var e="";$.each(s.reorderModeAjaxSettings.reorderModeWebMethodParams,function(t,n){e+="&"+t+"="+escape(n)});return e};s.callReorderModeUpdateMethod=function(e,t){return $.ajax({type:"POST",url:s.reorderModeAjaxSettings.reorderModeWebMethodUrl,data:"entityId="+e.data("reorderItemEntityId")+"&oldValue="+e.data("oldOrderValue")+"&newValue="+e.data("newOrderValue")+s._getReorderParamsStr(),dataType:"json",success:function(e){for(var n=0;n<t.length;n++){s.setRowIndexPropertyValue(s.getRowById(t[n].elementPrimaryKey),t[n].elementNewIndex);s.setRowOrderPropertyValue(s.getRowById(t[n].elementPrimaryKey),parseInt(t[n].elementNewOrderValue))}typeof s.reorderModeAjaxSettings.reorderModeCallbackClientFunction!=="undefined"&&s.reorderModeAjaxSettings.reorderModeCallbackClientFunction(e)},error:function(){$("."+s.cclGridConstants.cssClasses.reorderModeSelector).sortable("cancel")}})};s.toggleReorderTogglerElement=function(e,t){var n=e.attr("id"),r=e.html(),i=e.attr("class");if(t){e.parent("li").removeClass("disabled");e.replaceWith('<a href="#" id="'+n+'" class="'+i+'" onclick="javascript:'+this.name+'.toggleReorderMode();">'+r+"</a>")}else{e.parent("li").addClass("disabled");e.replaceWith('<span id="'+n+'" class="'+i+'">'+r+"</span>")}}}function SearchTextBox(e,t){window[e]=this;var n=this;t&&SearchTextBox.instances.push(this);n.initialize=function(){n.controls={searchInput:$("#"+n.controlIds.searchInputId),container:$("#"+n.controlIds.containerId),searchLink:$("#"+n.controlIds.searchLinkId),fakeInput:$("#"+n.controlIds.fakeInputId),searchKeyStorage:$("#"+n.controlIds.searchKeyStorageId)};var e=n.controls.searchInput;t&&e.hasClass(n.settings.focusRequiredCssClass)&&e.focus();e.searchTextBox({searchInput:n.controls.searchInput,container:n.controls.container,searchLink:n.controls.searchLink,fakeInput:n.controls.fakeInput,searchKeyStorage:n.controls.searchKeyStorage,watermarkText:n.settings.watermarkText,watermarkCssClass:n.settings.watermarkCssClass,textSearchEvent:n.settings.textSearchEvent,clearByEsc:n.settings.clearByEsc,usePostBack:n.settings.usePostBack,postBackReference:n.settings.postBackReference,focusRequiredCssClass:n.settings.focusRequiredCssClass})};n.clearSearch=function(){n.controls.searchInput.val("")};n.autocompleteopen=function(){var e=n.controls.searchInput.autocomplete("widget");if($(".ui-menu-item",e).length>1){var t=n.controls.searchInput.autocomplete("option","select");n.controls.searchInput.autocomplete({select:function(r,i){if(i.item.id!==-1)t(r,i);else{var s=[];$(".ui-menu-item:not(.ccl-searchtextbox-select-all)",e).each(function(){s.push($(this).data("ui-autocomplete-item"))});n.controls.searchInput.trigger("autocompleteselectall",{items:s});n.controls.searchInput.autocomplete("close")}}});var r=$("<li></li>").data("item.autocomplete",{id:-1,value:""}).attr("class","ui-menu-item ccl-searchtextbox-select-all").appendTo(e);$("<a></a>").attr("href","#").text(n.settings.selectAllText).appendTo(r)}}}function StarsSelector(e){window[e]=this;var t=this,n,r;t.initialize=function(){function e(e){e=isNaN(e)?0:e;r.filter(":lt("+e+")").find("img").prop("src",t.settings.activeIconUrl);r.filter(":eq("+e+"), :gt("+e+")").find("img").prop("src",t.settings.inactiveIconUrl)}n=t.controls.ratingHidden;r=t.controls.starsContainer.find("a");r.click(function(){var t=r.index(this)+1;if(n.val()!=t){n.val(t).change();e(t)}return false}).mouseover(function(){e(r.index(this)+1)}).mouseout(function(){e(parseInt(n.val()))});n.on(t.settings.showRateEventName,function(){e($(this).val())})};return t}function MakeTableHighlightable(e){function t(e){var t=e.type=="mouseenter";$("tr > :nth-child("+($(this).index()+1)+")",$(e.delegateTarget)).toggleClass("ccl-table-highlight",t);$(this).parent().toggleClass("ccl-table-highlight",t)}e.delegate("td","mouseenter mouseleave",t);e.delegate("tbody th","mouseenter mouseleave",t)}function InsertHtml(e,t){var n=null;n=t&&t.length>0?CKEDITOR.instances[t]:CKEDITOR.dialog.getCurrent()._.editor;if(n!=null)if(CKEDITOR.env.webkit)if(n.config.mask&&IsEditorEmpty(n.name,n.config.mask)){SetHtml(e,t);checkForMaskAndDelete(n.name)}else n.insertHtml(e);else{CKEDITOR.env.gecko&&n.config.mask&&checkForMaskAndDelete(n.name);n.insertHtml(e)}}function CloseDialog(){window.CKEDITOR.env.webkit&&closeRecorderIfExists();CKEDITOR.dialog.getCurrent().hide()}function SetHtml(e,t){t&&t.length>0?CKEDITOR.instances[t].setData(e):CKEDITOR.dialog.getCurrent()._.editor.setData(e)}function GetTextEditorContent(e){if(e&&e.length>0)return CKEDITOR.instances[e].getData();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.getData();return null}function SetTextEditorFocus(e){CKEDITOR.instances[e].focus()}function RemoveEditorInstance(e){if(CKEDITOR.instances[e]){var t=CKEDITOR.instances[e].editable();if(t.hasFocus){t.blur();t.hasFocus=false}CKEDITOR.instances[e].destroy()}}function IsEditorEmpty(e,t){var n=CKEDITOR.instances[e];if(n){n=n.getData().replace("\n","");if(""==n||t&&n===t||"<p>&nbsp;</p>"==n||"<div>&nbsp;</div>"==n||"<p>&#160;</p>"==n||"<p></p>"==n)return true;return false}}function isTextEditorDirty(e){var t;if(e&&e.length>0&&(t=CKEDITOR.instances[e]))return t.checkDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.checkDirty()}function resetEditorIsDirty(e){if(e&&e.length>0)return CKEDITOR.instances[e].resetDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.resetDirty()}function setTextEditorTextColor(e,t){var n=CKEDITOR.instances[e],r=new CKEDITOR.style(CKEDITOR.config.colorButton_foreStyle,{color:t});n.applyStyle(r)}function setTextEditorTextSize(e,t){var n=CKEDITOR.instances[e],r=new CKEDITOR.style(CKEDITOR.config.fontSize_style,{size:t});n.applyStyle(r)}function cleanOnFocusEvent(e,t,n){var r=CKEDITOR.instances[t];r.config.mask=e;if(n||IsEditorEmpty(r.name)){SetHtml(r.config.mask,r.name);r.mayBeDirty=false;resetEditorIsDirty(r.name)}if(r){r.on("focus",focusListener);r.on("blur",blurListener)}window.CKEDITOR.env.ie&&AttachListenersToInsertEvents(t)}function closeRecorderIfExists(){var e=$("#"+CKEDITOR.dialog.getCurrent()._.contents.iframe.undefined.domId).contents().find("object");e&&e.hide()}function checkForMaskAndDelete(e){var t=null;if(e&&e.length>0)t=CKEDITOR.instances[e];else if(CKEDITOR.dialog.getCurrent())t=CKEDITOR.dialog.getCurrent()._.editor;t!=null&&t.config.mask&&IsEditorEmpty(t.name,t.config.mask)&&t.document.getBody().setHtml("")}function AttachListenersToInsertEvents(e){if(e&&e.length>0){var t=CKEDITOR.instances[e];t.on("insertText",function(){checkForMaskAndDelete(e)});t.on("insertElement",function(){checkForMaskAndDelete(e)});t.on("insertHtml",function(){checkForMaskAndDelete(e)})}}function TextEditorToolbar(e){function t(e){e.parent("ul").children("li").removeClass("active");e.addClass("active")}window[e]=this;var n=this,r,i,s;n.initialize=function(){i=n.controls.container.find("."+n.settings.fontColorSectionClass).find("li");s=n.controls.container.find("."+n.settings.fontSizeSectionClass).find("li");CKEDITOR.on("instanceReady",function(){r=CKEDITOR.instances[n.settings.editorId];r.on("selectionChange",function(){n.updateToolbarState()});i.find("a").click(function(){var e=$(this).parent("li"),r=e.find("input:hidden:first").val();SetTextEditorFocus(n.settings.editorId);setTextEditorTextColor(n.settings.editorId,r);t(e);return false});s.find("a").click(function(){var e=$(this).parent("li"),r=e.find("input:hidden:first").val();SetTextEditorFocus(n.settings.editorId);setTextEditorTextSize(n.settings.editorId,r);t(e);return false});n.updateToolbarState()})};n.insertImage=function(e){InsertHtml('<img src="'+e+'" alt="" />',n.settings.editorId)};n.updateToolbarState=function(){var e=r.getSelection();if(e){var t,o;if(e=$(e.getStartElement().$)){o=e.prop("style").color;if(!o)if((t=e.parents('span[style*="color:"]:first'))&&t.prop("style"))o=t.prop("style").color;t=o;if(o=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)){t=[];t.push("#");t.push(("0"+parseInt(o[1],10).toString(16)).slice(-2));t.push(("0"+parseInt(o[2],10).toString(16)).slice(-2));t.push(("0"+parseInt(o[3],10).toString(16)).slice(-2));o=t.join("")}else o=t;o=o.toLowerCase();t=e.prop("style").fontSize;if(!t)if((e=e.parents('span[style*="font-size:"]:first'))&&e.prop("style"))t=e.prop("style").fontSize}o||(o="#000000");if(!t)t=n.settings.defaultFontSizeStyle;i.removeClass("active");i.filter(":has(input[value='"+o+"']:hidden)").addClass("active");s.removeClass("active");t&&s.filter(":has(input[value='"+t+"']:hidden)").addClass("active")}}}function TextEditorToolbarExtenderDialog(e){window[e]=this;var t=this;t.initialize=function(){t.controls.targetlink.on("click",function(e){e.preventDefault();t.show();return false});t.controls.closelink.on("click",function(e){e.preventDefault();t.hide();return false});t.controls.container.appendTo("body").on("click",function(e){e.preventDefault();return false});t.controls.container.find("ul li a").on("click",function(){t.hide();return true});$(document).click(function(e){var n=t.controls.container;if(e.button<2&&!n.is(":hidden")){t.hide();return false}return true})};t.show=function(){var e=t.controls.targetlink.offset();t.controls.container.css({top:e.top+t.controls.targetlink.height()+"px",left:e.left+"px"}).show()};t.hide=function(){t.controls.container.hide()};return t}function TimeSlotPicker(e){function t(){o.val(i.val())}window[e]=this;var n=this,r,i,s,o,u;n.initialize=function(){r=$("#"+n.settings.clientIds.timeSlotPickerPanel);i=$("#"+n.settings.clientIds.timeSlotDropDown);s=$("#"+n.settings.clientIds.availableTimeSlotsHidden);o=$("#"+n.settings.clientIds.selectedTimeSlotIdHidden);i.change(function(){t()});var e=s.val();if(e)u=JSON.parse(e);n.toggle(true)};n.toggle=function(e){r.toggle(e&&!!u)};n.updateFilteredTimeForDate=function(e,r){if(n.getAvailableTimeSlotsForDateFunction){var o={date:e,dateFilterId:r};n.getAvailableTimeSlotsForDateFunction(o);u=o.availableTimeSlots;s.val(u?JSON.stringify(u):"");if(u){i.empty();if(u&&u.length)for(o=0;o<u.length;o++)i.append("<option value='"+u[o].TimeSlotId+"'>"+u[o].Description+"</option>");n.toggle(true);t()}else n.resetTimes()}};n.resetTimes=function(){i.empty();u=undefined;s.val(u?JSON.stringify(u):"");t();n.toggle(false)};return n}function Toggle(e){function t(){if(s.length>0&&s[0].tagName=="INPUT"&&s.attr("type")=="checkbox"){u.bind("mousedown",function(){return false});a.bind("mousedown",function(){return false});o.bind(i.options.clientClickEventName,r);s.bind("change",n)}}function n(){if(s.attr("checked")=="checked"){f==="true"&&o.removeClass(l.toggleOff).addClass(l.toggleOn);a.removeClass(l.checkedLabel).addClass(l.uncheckedLabel);u.removeClass(l.uncheckedLabel).addClass(l.checkedLabel)}else{f==="true"&&o.removeClass(l.toggleOn).addClass(l.toggleOff);u.removeClass(l.checkedLabel).addClass(l.uncheckedLabel);a.removeClass(l.uncheckedLabel).addClass(l.checkedLabel)}s.trigger(i.options.clientStateChangedEventName)}function r(){s.attr("checked",s.attr("checked")!="checked");n()}window[e]=this;var i=this,s,o,u,a,f,l;i.initialize=function(){s=i.controls.checkbox;o=i.controls.toggleBox;u=i.controls.labelOn;a=i.controls.labelOff;f=i.options.onOffMode;l=i.options.cssClassess;t()}}function ToolTip(e,t){function n(e){b=y.scrollLeft();w=y.scrollTop();a.offset();if(!f){f=i();f.appendTo("form")}$(document).trigger("hideTooltips");T=f.outerHeight(true);N=f.outerWidth(true);if(!l){l=s();l.insertAfter(f)}x=l.outerHeight(true);C=l.outerWidth(true);h=x+k;p=y.width()+b;d=y.height()+w;a.height();m=e.pageX;g=e.pageY;M=g-w>T+h;O=d-g>T+h;_=M&&!O;c||(c=$("<div></div>").appendTo(l));c.attr("class",_?E.arrowDown:E.arrowUp);f.show();l.show();c.show();e=o(e);f.css({top:_?g-T-h:g+h,left:e});S=f.offset();v=S.left+f.outerWidth();e=_?S.top+T-k:S.top+k-x;var t;t=v-C;t=m>t?t:m-C/2;if(m<S.left+C/2)t=S.left;l.css({top:e,left:t})}function r(){if(f&&l){f.hide();l.hide()}}function i(){var e=$("<div></div>").addClass(E.tooltipPopup).hover(function(){clearTimeout(L)},function(){L=setTimeout(function(){r()},u.settings.hidePopupTimeout)});$("<div></div>").addClass(E.tooltipTitle).appendTo(e).html(u.title);$("<div></div>").addClass(E.tooltipDescription).appendTo(e).html(u.description);return e}function s(){return $("<div></div>").addClass(E.arrowContainer).hover(function(){clearTimeout(L)},function(){L=setTimeout(function(){r()},u.settings.hidePopupTimeout)})}function o(){var e=N/2;if(m-e<b)return b;if(m+e>p)return p-N;return m-e}window[e]=this;var u=this,a=t,f,l,c,h,p,d,v,m,g,y=$(window),b,w,E,S,x,T,N,C,k=1,L,A,O,M,_;u.initialize=function(){if(u.dataSource){u.title=u.dataSource[u.dataKey].title;u.description=u.dataSource[u.dataKey].description}E=u.settings.cssClasses;$(document).bind("hideTooltips",function(){r()});a.is("a")||a.addClass(E.linkToTooltip);var e=function(e){clearTimeout(A);A=setTimeout(function(){clearTimeout(L);n(e)},u.settings.showPopupTimeout)};a.hover(function(){},function(){clearTimeout(A);L=setTimeout(function(){r()},u.settings.hidePopupTimeout)});a.mousemove(function(t){e(t)});a.bind("ensureTooltipExists",function(){if(!f){f=i();f.appendTo("form")}})};u.initializeUnobtrusive=function(){E=u.settings.cssClasses;$(document).on("hideTooltips",function(){r()}).on("hover","["+u.settings.attributes.title+"], ["+u.settings.attributes.description+"]",function(){a=$(this);if(!a.data("tooltip_initialized")){a.is("a")||a.addClass(E.linkToTooltip);a.mousemove(function(e){clearTimeout(A);A=setTimeout(function(){clearTimeout(L);u.title=a.attr(u.settings.attributes.title);u.description=a.attr(u.settings.attributes.description);if(f){f.find("."+E.tooltipTitle).html(u.title?u.title:"");f.find("."+E.tooltipDescription).html(u.description?u.description:"")}n(e)},u.settings.showPopupTimeout)});a.on("mouseleave",function(){clearTimeout(A);L=setTimeout(function(){r()},u.settings.hidePopupTimeout)}).on("ensureTooltipExists",function(){if(!f){f=i();f.appendTo("form")}});a.data("tooltip_initialized",true)}})};return u}(function(e){typeof define==="function"&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)})(function(e){e.support.xhrFileUpload=!!(window.XMLHttpRequestUpload&&window.FileReader);e.support.xhrFormDataFileUpload=!!window.FormData;e.propHooks.elements={get:function(t){if(e.nodeName(t,"form"))return e.grep(t.elements,function(t){return!e.nodeName(t,"input")||t.type!=="file"});return null}};e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:false,contentType:false,cache:false},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+(new Date);this.bitrate=this.loaded=0;this.getBitrate=function(e,t,n){var r=e-this.timestamp;if(!this.bitrate||!n||r>n){this.bitrate=(t-this.loaded)*(1e3/r)*8;this.loaded=t;this.timestamp=e}return this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;if(typeof t.formData==="function")return t.formData(t.form);if(e.isArray(t.formData))return t.formData;if(t.formData){n=[];e.each(t.formData,function(e,t){n.push({name:e,value:t})});return n}return[]},_getTotal:function(t){var n=0;e.each(t,function(e,t){n+=t.size||1});return n},_onProgress:function(e,t){if(e.lengthComputable){var n=+(new Date),r,i;if(!(t._time&&t.progressInterval&&n-t._time<t.progressInterval&&e.loaded!==e.total)){t._time=n;r=t.total||this._getTotal(t.files);i=parseInt(e.loaded/e.total*(t.chunkSize||r),10)+(t.uploadedBytes||0);this._loaded+=i-(t.loaded||t.uploadedBytes||0);t.lengthComputable=true;t.loaded=i;t.total=r;t.bitrate=t._bitrateTimer.getBitrate(n,i,t.bitrateInterval);this._trigger("progress",e,t);this._trigger("progressall",e,{lengthComputable:true,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(n,this._loaded,t.bitrateInterval)})}}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();if(r.upload){e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable;e.loaded=r.loaded;e.total=r.total;n._onProgress(e,t)});t.xhr=function(){return r}}},_initXHRData:function(t){var n,r=t.files[0],i=t.multipart||!e.support.xhrFileUpload,s=t.paramName[0];t.headers=t.headers||{};if(t.contentRange)t.headers["Content-Range"]=t.contentRange;if(i){if(e.support.xhrFormDataFileUpload){if(t.postMessage){n=this._getFormData(t);t.blob?n.push({name:s,value:t.blob}):e.each(t.files,function(e,r){n.push({name:t.paramName[e]||s,value:r})})}else{if(t.formData instanceof FormData)n=t.formData;else{n=new FormData;e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})}if(t.blob){t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"';n.append(s,t.blob,r.name)}else e.each(t.files,function(e,r){if(window.Blob&&r instanceof Blob||window.File&&r instanceof File)n.append(t.paramName[e]||s,r,r.name)})}t.data=n}}else{t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"';t.contentType=r.type;t.data=t.blob||r}t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||"");t.formData=this._getFormData(t);if(t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host)t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){if(this._isXHRUpload(e)){if(!this._chunkedUpload(e,true)){e.data||this._initXHRData(e);this._initProgressListener(e)}if(e.postMessage)e.dataType="postmessage "+(e.dataType||"")}else this._initIframeSettings(e,"iframe")},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;if(r)e.isArray(r)||(r=[r]);else{r=[];n.each(function(){var t=e(this),n=t.prop("name")||"files[]";for(t=(t.prop("files")||[1]).length;t;){r.push(n);t-=1}});r.length||(r=[n.prop("name")||"files[]"])}return r},_initFormSettings:function(t){if(!t.form||!t.form.length){t.form=e(t.fileInput.prop("form"));if(!t.form.length)t.form=e(this.options.fileInput.prop("form"))}t.paramName=this._getParamName(t);if(!t.url)t.url=t.form.prop("action")||location.href;t.type=(t.type||t.form.prop("method")||"").toUpperCase();if(t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH")t.type="POST";if(!t.formAcceptCharset)t.formAcceptCharset=t.form.attr("accept-charset")},_getAJAXSettings:function(t){t=e.extend({},this.options,t);this._initFormSettings(t);this._initDataSettings(t);return t},_enhancePromise:function(e){e.success=e.done;e.error=e.fail;e.complete=e.always;return e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),s=i.promise();n=n||this.options.context||s;if(t===true)i.resolveWith(n,r);else t===false&&i.rejectWith(n,r);s.abort=i.promise;return this._enhancePromise(s)},_getUploadedBytes:function(e){return(e=(e=(e=e.getResponseHeader("Range"))&&e.split("-"))&&e.length>1&&parseInt(e[1],10))&&e+1},_chunkedUpload:function(t,n){var r=this,i=t.files[0],s=i.size,o=t.uploadedBytes=t.uploadedBytes||0,u=t.maxChunkSize||s,a=i.slice||i.webkitSlice||i.mozSlice,f=e.Deferred(),l=f.promise(),c,h;if(!(this._isXHRUpload(t)&&a&&(o||u<s))||t.data)return false;if(n)return true;if(o>=s){i.error="Uploaded bytes exceed file size";return this._getXHRPromise(false,t.context,[null,"error",i.error])}h=function(){var n=e.extend({},t);n.blob=a.call(i,o,o+u,i.type);n.chunkSize=n.blob.size;n.contentRange="bytes "+o+"-"+(o+n.chunkSize-1)+"/"+s;r._initXHRData(n);r._initProgressListener(n);c=(r._trigger("chunksend",null,n)!==false&&e.ajax(n)||r._getXHRPromise(false,n.context)).done(function(i,u,a){o=r._getUploadedBytes(a)||o+n.chunkSize;if(!n.loaded||n.loaded<n.total)r._onProgress(e.Event("progress",{lengthComputable:true,loaded:o-n.uploadedBytes,total:o-n.uploadedBytes}),n);t.uploadedBytes=n.uploadedBytes=o;n.result=i;n.textStatus=u;n.jqXHR=a;r._trigger("chunkdone",null,n);r._trigger("chunkalways",null,n);o<s?h():f.resolveWith(n.context,[i,u,a])}).fail(function(e,t,i){n.jqXHR=e;n.textStatus=t;n.errorThrown=i;r._trigger("chunkfail",null,n);r._trigger("chunkalways",null,n);f.rejectWith(n.context,[e,t,i])})};this._enhancePromise(l);l.abort=function(){return c.abort()};h();return l},_beforeSend:function(e,t){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer}this._active+=1;this._loaded+=t.uploadedBytes||0;this._total+=this._getTotal(t.files)},_onDone:function(t,n,r,i){if(!this._isXHRUpload(i)||!i.loaded||i.loaded<i.total){var s=this._getTotal(i.files)||1;this._onProgress(e.Event("progress",{lengthComputable:true,loaded:s,total:s}),i)}i.result=t;i.textStatus=n;i.jqXHR=r;this._trigger("done",null,i)},_onFail:function(e,t,n,r){r.jqXHR=e;r.textStatus=t;r.errorThrown=n;this._trigger("fail",null,r);if(r.recalculateProgress){this._loaded-=r.loaded||r.uploadedBytes||0;this._total-=r.total||this._getTotal(r.files)}},_onAlways:function(e,t,n,r){this._active-=1;this._trigger("always",null,r);if(this._active===0){this._trigger("stop");this._loaded=this._total=0;this._bitrateTimer=null}},_onSend:function(t,n){var r=this,i,s,o,u,a=r._getAJAXSettings(n),f=function(){r._sending+=1;a._bitrateTimer=new r._BitrateTimer;return i=i||((s||r._trigger("send",t,a)===false)&&r._getXHRPromise(false,a.context,s)||r._chunkedUpload(a)||e.ajax(a)).done(function(e,t,n){!r._isXHRUpload(a)&&typeof e==="undefined"?r._onFail(n,"error","Unknown",a):r._onDone(e,t,n,a)}).fail(function(e,t,n){r._onFail(e,t,n,a)}).always(function(e,t,n){r._sending-=1;r._onAlways(e,t,n,a);if(a.limitConcurrentUploads&&a.limitConcurrentUploads>r._sending)for(e=r._slots.shift();e;){if(e.state?e.state()==="pending":!e.isRejected()){e.resolve();break}e=r._slots.shift()}})};this._beforeSend(t,a);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(this.options.limitConcurrentUploads>1){o=e.Deferred();this._slots.push(o);u=o.pipe(f)}else u=this._sequence=this._sequence.pipe(f,f);u.abort=function(){s=[undefined,"abort","abort"];if(!i){o&&o.rejectWith(a.context,s);return f()}return i.abort()};return this._enhancePromise(u)}return f()},_onAdd:function(t,n){var r=this,i=true,s=e.extend({},this.options,n),o=s.limitMultiFileUploads,u=this._getParamName(s),a,f,l;if(!(s.singleFileUploads||o)||!this._isXHRUpload(s)){f=[n.files];a=[u]}else if(!s.singleFileUploads&&o){f=[];a=[];for(l=0;l<n.files.length;l+=o){f.push(n.files.slice(l,l+o));s=u.slice(l,l+o);s.length||(s=u);a.push(s)}}else a=u;n.originalFiles=n.files;e.each(f||n.files,function(s,o){var u=e.extend({},n);u.files=f?o:[o];u.paramName=a[s];u.submit=function(){return u.jqXHR=this.jqXHR=r._trigger("submit",t,this)!==false&&r._onSend(t,this)};return i=r._trigger("add",t,u)});return i},_replaceFileInput:function(t){var n=t.clone(true);e("<form></form>").append(n)[0].reset();t.after(n).detach();e.cleanData(t.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(e,r){if(r===t[0])return n[0];return r});if(t[0]===this.element[0])this.element=n},_handleFileTreeEntry:function(t,n){var r=this,i=e.Deferred(),s=function(e){if(e&&!e.entry)e.entry=t;i.resolve([e])},o;n=n||"";if(t.isFile)if(t._file){t._file.relativePath=n;i.resolve(t._file)}else t.file(function(e){e.relativePath=n;i.resolve(e)},s);else if(t.isDirectory){o=t.createReader();o.readEntries(function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(s)},s)}else i.resolve([]);return i.promise()},_handleFileTreeEntries:function(t,n){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;if(n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry))return this._handleFileTreeEntries(e.map(n,function(e){var t;if(e.webkitGetAsEntry){if(t=e.webkitGetAsEntry())t._file=e.getAsFile();return t}return e.getAsEntry()}));return e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);n=e.makeArray(t.prop("files"));if(n.length)n[0].name===undefined&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName;t.size=t.fileSize});else{t=t.prop("value");if(!t)return e.Deferred().resolve([]).promise();n=[{name:t.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){if(!(t instanceof e)||t.length===1)return this._getSingleFileInputFiles(t);return e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(t){var n=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(e){r.files=e;n.options.replaceFileInput&&n._replaceFileInput(r.fileInput);n._trigger("change",t,r)!==false&&n._onAdd(t,r)})},_onPaste:function(t){var n=t.originalEvent.clipboardData,r={files:[]};e.each(n&&n.items||[],function(e,t){var n=t.getAsFile&&t.getAsFile();n&&r.files.push(n)});if(this._trigger("paste",t,r)===false||this._onAdd(t,r)===false)return false},_onDrop:function(e){var t=this,n=e.dataTransfer=e.originalEvent.dataTransfer,r={};n&&n.files&&n.files.length&&e.preventDefault();this._getDroppedFiles(n).always(function(n){r.files=n;t._trigger("drop",e,r)!==false&&t._onAdd(e,r)})},_onDragOver:function(t){var n=t.dataTransfer=t.originalEvent.dataTransfer;if(this._trigger("dragover",t)===false)return false;if(n&&e.inArray("Files",n.types)!==-1){n.dropEffect="copy";t.preventDefault()}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(t,n){var r=e.inArray(t,this._refreshOptionsList)!==-1;r&&this._destroyEventHandlers();this._super(t,n);if(r){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var t=this.options;if(t.fileInput===undefined)t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]');else if(!(t.fileInput instanceof e))t.fileInput=e(t.fileInput);if(!(t.dropZone instanceof e))t.dropZone=e(t.dropZone);if(!(t.pasteZone instanceof e))t.pasteZone=e(t.pasteZone)},_create:function(){var t=this.options;e.extend(t,e(this.element[0].cloneNode(false)).data());t.blueimpFileupload=null;t.fileupload=null;this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(t){var n=this;if(!(!t||this.options.disabled))if(t.fileInput&&!t.files)this._getFileInputFiles(t.fileInput).always(function(e){t.files=e;n._onAdd(null,t)});else{t.files=e.makeArray(t.files);this._onAdd(null,t)}},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,r=e.Deferred(),i=r.promise(),s,o;i.abort=function(){o=true;if(s)return s.abort();r.reject(null,"abort","abort");return i};this._getFileInputFiles(t.fileInput).always(function(e){if(!o){t.files=e;s=n._onSend(null,t).then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}});return this._enhancePromise(i)}t.files=e.makeArray(t.files);if(t.files.length)return this._onSend(null,t)}return this._getXHRPromise(false,t&&t.context)}})});(function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n;if(n=e.Blob)try{n=Boolean(new Blob)}catch(r){n=false}var i=n;if(n=i){if(n=e.Uint8Array)try{n=(new Blob([new Uint8Array(100)])).size===100}catch(s){n=false}n=n}var o=n,u=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=(i||u)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,n,r,s,a,f;e.split(",")[0].indexOf("base64")>=0?t=atob(e.split(",")[1]):t=decodeURIComponent(e.split(",")[1]);n=new ArrayBuffer(t.length);r=new Uint8Array(n);for(s=0;s<t.length;s+=1)r[s]=t.charCodeAt(s);return a=e.split(",")[0].split(":")[1].split(";")[0],i?new Blob([o?r:n],{type:a}):(f=new u,f.append(n),f.getBlob(a))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,r){r&&t.toDataURL&&a?e(a(this.toDataURL(n,r))):e(this.mozGetAsFile("blob",n))}:t.toDataURL&&a&&(t.toBlob=function(e,t,n){e(a(this.toDataURL(t,n)))}));typeof define=="function"&&define.amd?define(function(){return a}):e.dataURLtoBlob=a})(this);(function(e){typeof define==="function"&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],e):e(window.jQuery,window.loadImage)})(function(e,t){e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{process:[],add:function(t,n){e(this).fileupload("process",n).done(function(){n.submit()})}},processActions:{load:function(n,r){var i=this,s=n.files[n.index],o=e.Deferred();window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&(e.type(r.maxFileSize)!=="number"||s.size<r.maxFileSize)&&(!r.fileTypes||r.fileTypes.test(s.type))?t(s,function(e){if(!e.src)return o.rejectWith(i,[n]);n.img=e;o.resolveWith(i,[n])}):o.rejectWith(i,[n]);return o.promise()},resize:function(n,r){var i=n.img,s;r=e.extend({canvas:true},r);if(i){s=t.scale(i,r);if(s.width!==i.width||s.height!==i.height)n.canvas=s}return n},save:function(t){if(!t.canvas)return t;var n=this,r=t.files[t.index],i=r.name,s=e.Deferred(),o=function(e){if(!e.name)if(r.type===e.type)e.name=r.name;else if(r.name)e.name=r.name.replace(/\..+$/,"."+e.type.substr(6));t.files[t.index]=e;s.resolveWith(n,[t])};t.canvas.mozGetAsFile?o(t.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(r.type)&&i||(i&&i.replace(/\..+$/,"")||"blob")+".png",r.type)):t.canvas.toBlob(o,r.type);return s.promise()}},_processFile:function(t,n,r){var i=this,s=e.Deferred().resolveWith(i,[{files:t,index:n}]).promise();i._processing+=1;e.each(r.process,function(e,t){s=s.pipe(function(e){return i.processActions[t.action].call(this,e,t)})});s.always(function(){i._processing-=1;i._processing===0&&i.element.removeClass("fileupload-processing")});i._processing===1&&i.element.addClass("fileupload-processing");return s},process:function(t){var n=this,r=e.extend({},this.options,t);r.process&&r.process.length&&this._isXHRUpload(r)&&e.each(t.files,function(i){n._processingQueue=n._processingQueue.pipe(function(){var s=e.Deferred();n._processFile(t.files,i,r).always(function(){s.resolveWith(n)});return s.promise()})});return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=e.Deferred().resolveWith(this).promise()}})});(function(e){typeof define==="function"&&define.amd?define(["jquery"],e):e(window.jQuery)})(function(e){var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var r=n.initialIframeSrc||"javascript:false;",i,s,o;return{send:function(u,l){i=e('<form style="display:none;"></form>');i.attr("accept-charset",n.formAcceptCharset);o=/\?/.test(n.url)?"&":"?";if(n.type==="DELETE"){n.url=n.url+o+"_method=DELETE";n.type="POST"}else if(n.type==="PUT"){n.url=n.url+o+"_method=PUT";n.type="POST"}else if(n.type==="PATCH"){n.url=n.url+o+"_method=PATCH";n.type="POST"}t+=1;s=e('<iframe src="'+r+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];s.unbind("load").bind("load",function(){var t;try{t=s.contents();if(!t.length||!t[0].firstChild)throw Error()}catch(n){t=undefined}l(200,"success",{iframe:t});e('<iframe src="'+r+'"></iframe>').appendTo(i);window.setTimeout(function(){i.remove()},0)});i.prop("target",s.prop("name")).prop("action",n.url).prop("method",n.type);n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)});if(n.fileInput&&n.fileInput.length&&n.type==="POST"){t=n.fileInput.clone();n.fileInput.after(function(e){return t[e]});n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)});i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");n.fileInput.removeAttr("form")}i.submit();t&&t.length&&n.fileInput.each(function(n,r){var i=e(t[n]);e(r).prop("name",i.prop("name")).attr("form",i.attr("form"));i.replaceWith(r)})});i.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",r);i&&i.remove()}}}});e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){return(t=t&&t[0])&&e.isXMLDoc(t)?t:e.parseXML(t.XMLDocument&&t.XMLDocument.xml||e(t.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})});(function(e){var t=function(e,n,r){var i=document.createElement("img"),s,o;return i.onerror=n,i.onload=function(){o&&(!r||!r.noRevoke)&&t.revokeObjectURL(o);n(t.scale(i,r))},window.Blob&&e instanceof Blob||window.File&&e instanceof File?(s=o=t.createObjectURL(e),i._type=e.type):s=e,s?(i.src=s,i):t.readFile(e,function(e){var t=e.target;t&&t.result?i.src=t.result:n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.detectSubsampling=function(e){var t=e.width,n,r;return t*e.height>1048576?(n=document.createElement("canvas"),n.width=n.height=1,r=n.getContext("2d"),r.drawImage(e,-t+1,0),r.getImageData(0,0,1,1).data[3]===0):false};t.detectVerticalSquash=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i,s,o;n.width=1;n.height=t;r.drawImage(e,0,0);n=r.getImageData(0,0,1,t).data;r=0;for(s=i=t;s>r;){o=n[(s-1)*4+3];o===0?i=s:r=s;s=i+r>>1}return s/t};t.renderImageToCanvas=function(e,n,r,i){var s=e.width,o=e.height;n=n.getContext("2d");var u,a=document.createElement("canvas"),l,c,h,p,d;n.save();t.detectSubsampling(e)&&(s/=2,o/=2);u=t.detectVerticalSquash(e,o);a.width=a.height=1024;l=a.getContext("2d");for(c=0;c<o;){h=c+1024>o?o-c:1024;for(p=0;p<s;){d=p+1024>s?s-p:1024;l.clearRect(0,0,1024,1024);l.drawImage(e,-p,-c);n.drawImage(a,0,0,d,h,Math.floor(p*r/s),Math.floor(c*i/o/u),Math.ceil(d*r/s),Math.ceil(h*i/o/u));p+=1024}c+=1024}n.restore()};t.scale=function(e,n){n=n||{};var r=document.createElement("canvas"),i=e.width,s=e.height,o=Math.max((n.minWidth||i)/i,(n.minHeight||s)/s);return o>1&&(i=parseInt(i*o,10),s=parseInt(s*o,10)),o=Math.min((n.maxWidth||i)/i,(n.maxHeight||s)/s),o<1&&(i=parseInt(i*o,10),s=parseInt(s*o,10)),e.getContext||n.canvas&&r.getContext?(r.width=i,r.height=s,e._type==="image/jpeg"?t.renderImageToCanvas(e,r,i,s):r.getContext("2d").drawImage(e,0,0,i,s),r):(e.width=i,e.height=s,e)};t.createObjectURL=function(e){return n?n.createObjectURL(e):false};t.revokeObjectURL=function(e){return n?n.revokeObjectURL(e):false};t.readFile=function(e,t){if(window.FileReader&&FileReader.prototype.readAsDataURL){var n=new FileReader;return n.onload=n.onerror=t,n.readAsDataURL(e),n}return false};typeof define=="function"&&define.amd?define(function(){return t}):e.loadImage=t})(this);(function(e){var t=function(e,n){var r=!/[^\w\-\.:]/.test(e)?t.cache[e]=t.cache[e]||t(t.load(e)):new Function(t.arg+",tmpl","var _e=tmpl.encode"+t.helper+",_s='"+e.replace(t.regexp,t.func)+"';return _s;");return n?r(n,t):function(e){return r(e,t)}};t.cache={};t.load=function(e){return document.getElementById(e).innerHTML};t.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;t.func=function(e,t,n,r,i,s){if(t)return{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[e]||"\\"+e;if(n){if(n==="=")return"'+_e("+r+")+'";return"'+("+r+"||'')+'"}if(i)return"';";if(s)return"_s+='"};t.encReg=/[<>&"'\x00]/g;t.encMap={"<":"&lt;",">":"&gt;","&":"&",'"':"&quot;","'":"&#39;"};t.encode=function(e){return String(e||"").replace(t.encReg,function(e){return t.encMap[e]||""})};t.arg="o";t.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}";if(typeof define==="function"&&define.amd)define(function(){return t});else e.tmpl=t})(this);(function(e,t){"function"===typeof define&&define.amd?define(["jquery"],t):e.jQuery?t(e.jQuery):t(e.Zepto)})(this,function(e,t){e.fn.jPlayer=function(n){var r="string"===typeof n,i=Array.prototype.slice.call(arguments,1),s=this;n=!r&&i.length?e.extend.apply(null,[true,n].concat(i)):n;if(r&&"_"===n.charAt(0))return s;r?this.each(function(){var r=e(this).data("jPlayer"),o=r&&e.isFunction(r[n])?r[n].apply(r,i):r;if(o!==r&&o!==t)return s=o,false}):this.each(function(){var t=e(this).data("jPlayer");t?t.option(n||{}):e(this).data("jPlayer",new e.jPlayer(n,this))});return s};e.jPlayer=function(t,n){if(arguments.length){this.element=e(n);this.options=e.extend(true,{},this.options,t);var r=this;this.element.bind("remove.jPlayer",function(){r.destroy()});this._init()}};"function"!==typeof e.fn.stop&&(e.fn.stop=function(){});e.jPlayer.emulateMethods="load play pause";e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";e.jPlayer.emulateOptions="muted volume";e.jPlayer.reservedEvent="ready flashreset resize repeat error warning";e.jPlayer.event={};e.each("ready flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){e.jPlayer.event[this]="jPlayer_"+this});e.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough ratechange".split(" ");e.jPlayer.pause=function(){e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})};e.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};var n=function(){this.init()};n.prototype={init:function(){this.options={timeFormat:e.jPlayer.timeFormat}},time:function(e){var t=new Date(1e3*(e&&"number"===typeof e?e:0)),n=t.getUTCHours();e=this.options.timeFormat.showHour?t.getUTCMinutes():t.getUTCMinutes()+60*n;t=this.options.timeFormat.showMin?t.getUTCSeconds():t.getUTCSeconds()+60*e;n=this.options.timeFormat.padHour&&10>n?"0"+n:n;e=this.options.timeFormat.padMin&&10>e?"0"+e:e;t=this.options.timeFormat.padSec&&10>t?"0"+t:t;n=""+(this.options.timeFormat.showHour?n+this.options.timeFormat.sepHour:"");n+=this.options.timeFormat.showMin?e+this.options.timeFormat.sepMin:"";return n+(this.options.timeFormat.showSec?t+this.options.timeFormat.sepSec:"")}};var r=new n;e.jPlayer.convertTime=function(e){return r.time(e)};e.jPlayer.uaBrowser=function(e){e=e.toLowerCase();var t=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,r=/(mozilla)(?:.*? rv:([\w.]+))?/;e=/(webkit)[ \/]([\w.]+)/.exec(e)||t.exec(e)||n.exec(e)||0>e.indexOf("compatible")&&r.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}};e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),n=/(android)/,r=/(mobile)/;e=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(t)||[];t=/(ipad|playbook)/.exec(t)||!r.exec(t)&&n.exec(t)||[];e[1]&&(e[1]=e[1].replace(/\s/g,"_"));return{platform:e[1]||"",tablet:t[1]||""}};e.jPlayer.browser={};e.jPlayer.platform={};var i=e.jPlayer.uaBrowser(navigator.userAgent);i.browser&&(e.jPlayer.browser[i.browser]=true,e.jPlayer.browser.version=i.version);i=e.jPlayer.uaPlatform(navigator.userAgent);i.platform&&(e.jPlayer.platform[i.platform]=true,e.jPlayer.platform.mobile=!i.tablet,e.jPlayer.platform.tablet=!!i.tablet);e.jPlayer.getDocMode=function(){var t;e.jPlayer.browser.msie&&(document.documentMode?t=document.documentMode:(t=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(t=7)));return t};e.jPlayer.browser.documentMode=e.jPlayer.getDocMode();e.jPlayer.nativeFeatures={init:function(){var e=document,t=e.createElement("video"),n={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" ")},r=["w3c","moz","webkit","webkitVideo"],i,s;this.fullscreen=t={support:{w3c:!!e[n.w3c[0]],moz:!!e[n.moz[0]],webkit:"function"===typeof e[n.webkit[3]],webkitVideo:"function"===typeof t[n.webkitVideo[2]]},used:{}};i=0;for(s=r.length;i<s;i++){var o=r[i];if(t.support[o]){t.spec=o;t.used[o]=true;break}}if(t.spec){var u=n[t.spec];t.api={fullscreenEnabled:true,fullscreenElement:function(t){t=t?t:e;return t[u[1]]},requestFullscreen:function(e){return e[u[2]]()},exitFullscreen:function(t){t=t?t:e;return t[u[3]]()}};t.event={fullscreenchange:u[4],fullscreenerror:u[5]}}else{t.api={fullscreenEnabled:false,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}};t.event={}}}};e.jPlayer.nativeFeatures.init();e.jPlayer.focus=null;e.jPlayer.keyIgnoreElementNames="INPUT TEXTAREA";var s=function(t){var n=e.jPlayer.focus,r;n&&(e.each(e.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(e,n){if(t.target.nodeName.toUpperCase()===n.toUpperCase())return r=true,false}),r||e.each(n.options.keyBindings,function(r,i){if(i&&t.which===i.key&&e.isFunction(i.fn))return t.preventDefault(),i.fn(n),false}))};e.jPlayer.keys=function(t){e(document.documentElement).unbind("keydown.jPlayer");t&&e(document.documentElement).bind("keydown.jPlayer",s)};e.jPlayer.keys(true);e.jPlayer.prototype={count:0,version:{script:"2.4.0",needFlash:"2.4.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:false,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},smoothPlayBar:false,fullScreen:false,fullWindow:false,autohide:{restored:false,full:true,fadeIn:200,fadeOut:600,hold:1e3},loop:false,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:false,audioFullScreen:false,keyBindings:{play:{key:32,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:13,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:8,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:38,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:40,fn:function(e){e.volume(e.options.volume-.1)}}},verticalVolume:false,idPrefix:"jp",noConflict:"jQuery",emulateHtml:false,errorAlerts:false,warningAlerts:false},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:true,format:{},formatType:"",waitForPlay:true,waitForLoad:true,srcSet:false,video:false,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:false},solution:{html:true,flash:true},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:true,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:true,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:false,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:false,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:false,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:true,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:true,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:true,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:false,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:false,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:true,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:true,media:"video"}},_init:function(){var n=this;this.element.empty();this.status=e.extend({},this.status);this.internal=e.extend({},this.internal);this.options.timeFormat=e.extend({},e.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=e.jPlayer.platform.ipad||e.jPlayer.platform.iphone||e.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);this.options.keyEnabled&&!e.jPlayer.focus&&(e.jPlayer.focus=this);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=this._limitValue(this.options.volume,0,1);e.each(this.options.supplied.toLowerCase().split(","),function(t,r){var i=r.replace(/^\s+|\s+$/g,"");if(n.format[i]){var s=false;e.each(n.formats,function(e,t){if(i===t)return s=true,false});s||n.formats.push(i)}});e.each(this.options.solution.toLowerCase().split(","),function(t,r){var i=r.replace(/^\s+|\s+$/g,"");if(n.solution[i]){var s=false;e.each(n.solutions,function(e,t){if(i===t)return s=true,false});s||n.solutions.push(i)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t});this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t});this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf":"")});this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t});e.each(e.jPlayer.event,function(e,r){n.options[e]!==t&&(n.element.bind(r+".jPlayer",n.options[e]),n.options[e]=t)});this.require.audio=false;this.require.video=false;e.each(this.formats,function(e,t){n.require[n.format[t].media]=true});this.options=this.require.video?e.extend(true,{},this.optionsVideo,this.options):e.extend(true,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);e.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){(!n.status.video||n.status.waitForPlay)&&n.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=e("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)});this.html.audio.available=false;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=false;this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.flash.canPlay={};e.each(this.formats,function(e,t){n.html.canPlay[t]=n.html[n.format[t].media].available&&""!==n.htmlElement[n.format[t].media].canPlayType(n.format[t].codec);n.flash.canPlay[t]=n.format[t].flashCanPlay&&n.flash.available});this.html.desired=false;this.flash.desired=false;e.each(this.solutions,function(t,r){if(0===t)n[r].desired=true;else{var i=false,s=false;e.each(n.formats,function(e,t){n[n.solutions[0]].canPlay[t]&&("video"===n.format[t].media?s=true:i=true)});n[r].desired=n.require.audio&&!i||n.require.video&&!s}});this.html.support={};this.flash.support={};e.each(this.formats,function(e,t){n.html.support[t]=n.html.canPlay[t]&&n.html.desired;n.flash.support[t]=n.flash.canPlay[t]&&n.flash.desired});this.html.used=false;this.flash.used=false;e.each(this.solutions,function(t,r){e.each(n.formats,function(e,t){if(n[r].support[t])return n[r].used=true,false})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);!this.html.used&&!this.flash.used?(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()):this.css.jq.noSolution.length&&this.css.jq.noSolution.hide();if(this.flash.used){var r,i="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&(9>Number(e.jPlayer.browser.version)||9>e.jPlayer.browser.documentMode)){i=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+i+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];r=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var s=0;s<i.length;s++)r.appendChild(document.createElement(i[s]))}else{s=function(e,t,n){var r=document.createElement("param");r.setAttribute("name",t);r.setAttribute("value",n);e.appendChild(r)};r=document.createElement("object");r.setAttribute("id",this.internal.flash.id);r.setAttribute("name",this.internal.flash.id);r.setAttribute("data",this.internal.flash.swf);r.setAttribute("type","application/x-shockwave-flash");r.setAttribute("width","1");r.setAttribute("height","1");r.setAttribute("tabindex","-1");s(r,"flashvars",i);s(r,"allowscriptaccess","always");s(r,"bgcolor",this.options.backgroundColor);s(r,"wmode",this.options.wmode)}this.element.append(r);this.internal.flash.jq=e(r)}this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();this.html.used&&!this.flash.used&&setTimeout(function(){n.internal.ready=true;n.version.flash="n/a";n._trigger(e.jPlayer.event.repeat);n._trigger(e.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();e.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===e.jPlayer.focus&&(e.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),true}catch(t){return false}},_uaBlocklist:function(t){var n=navigator.userAgent.toLowerCase(),r=false;e.each(t,function(e,t){if(t&&t.test(n))return r=true,false});return r},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=false,this.status.noFullWindow=true)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,n){var r=this;t.preload=this.options.preload;t.muted=this.options.muted;t.volume=this.options.volume;t.addEventListener("progress",function(){n.gate&&(r.internal.cmdsIgnored&&0<this.readyState&&(r.internal.cmdsIgnored=false),r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.progress))},false);t.addEventListener("timeupdate",function(){n.gate&&(r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.timeupdate))},false);t.addEventListener("durationchange",function(){n.gate&&(r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.durationchange))},false);t.addEventListener("play",function(){n.gate&&(r._updateButtons(true),r._html_checkWaitForPlay(),r._trigger(e.jPlayer.event.play))},false);t.addEventListener("playing",function(){n.gate&&(r._updateButtons(true),r._seeked(),r._trigger(e.jPlayer.event.playing))},false);t.addEventListener("pause",function(){n.gate&&(r._updateButtons(false),r._trigger(e.jPlayer.event.pause))},false);t.addEventListener("waiting",function(){n.gate&&(r._seeking(),r._trigger(e.jPlayer.event.waiting))},false);t.addEventListener("seeking",function(){n.gate&&(r._seeking(),r._trigger(e.jPlayer.event.seeking))},false);t.addEventListener("seeked",function(){n.gate&&(r._seeked(),r._trigger(e.jPlayer.event.seeked))},false);t.addEventListener("volumechange",function(){n.gate&&(r.options.volume=t.volume,r.options.muted=t.muted,r._updateMute(),r._updateVolume(),r._trigger(e.jPlayer.event.volumechange))},false);t.addEventListener("suspend",function(){n.gate&&(r._seeked(),r._trigger(e.jPlayer.event.suspend))},false);t.addEventListener("ended",function(){n.gate&&(e.jPlayer.browser.webkit||(r.htmlElement.media.currentTime=0),r.htmlElement.media.pause(),r._updateButtons(false),r._getHtmlStatus(t,true),r._updateInterface(),r._trigger(e.jPlayer.event.ended))},false);t.addEventListener("error",function(){n.gate&&(r._updateButtons(false),r._seeked(),r.status.srcSet&&(clearTimeout(r.internal.htmlDlyCmdId),r.status.waitForLoad=true,r.status.waitForPlay=true,r.status.video&&!r.status.nativeVideoControls&&r.internal.video.jq.css({width:"0px",height:"0px"}),r._validString(r.status.media.poster)&&!r.status.nativeVideoControls&&r.internal.poster.jq.show(),r.css.jq.videoPlay.length&&r.css.jq.videoPlay.show(),r._error({type:e.jPlayer.error.URL,context:r.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},false);e.each(e.jPlayer.htmlEvent,function(i,s){t.addEventListener(this,function(){n.gate&&r._trigger(e.jPlayer.event[s])},false)})},_getHtmlStatus:function(e,t){var n=0,r=0,i=0,s=0;isFinite(e.duration)&&(this.status.duration=e.duration);n=e.currentTime;r=0<this.status.duration?100*n/this.status.duration:0;"object"===typeof e.seekable&&0<e.seekable.length?(i=0<this.status.duration?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,s=0<this.status.duration?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(i=100,s=r);t&&(r=s=n=0);this.status.seekPercent=i;this.status.currentPercentRelative=s;this.status.currentPercentAbsolute=r;this.status.currentTime=n;this.status.videoWidth=e.videoWidth;this.status.videoHeight=e.videoHeight;this.status.readyState=e.readyState;this.status.networkState=e.networkState;this.status.playbackRate=e.playbackRate;this.status.ended=e.ended},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,n,r){t=e.Event(t);t.jPlayer={};t.jPlayer.version=e.extend({},this.version);t.jPlayer.options=e.extend(true,{},this.options);t.jPlayer.status=e.extend(true,{},this.status);t.jPlayer.html=e.extend(true,{},this.html);t.jPlayer.flash=e.extend(true,{},this.flash);n&&(t.jPlayer.error=e.extend({},n));r&&(t.jPlayer.warning=e.extend({},r));this.element.trigger(t)},jPlayerFlashEvent:function(t,n){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var r=this.status.currentTime,i=this.status.paused;this.setMedia(this.status.media);0<r&&(i?this.pause(r):this.play(r))}this._trigger(e.jPlayer.event.flashreset)}}else{this.internal.ready=true;this.internal.flash.jq.css({width:"0px",height:"0px"});this.version.flash=n.version;this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION});this._trigger(e.jPlayer.event.repeat);this._trigger(t)}if(this.flash.gate)switch(t){case e.jPlayer.event.progress:this._getFlashStatus(n);this._updateInterface();this._trigger(t);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(n);this._updateInterface();this._trigger(t);break;case e.jPlayer.event.play:this._seeked();this._updateButtons(true);this._trigger(t);break;case e.jPlayer.event.pause:this._updateButtons(false);this._trigger(t);break;case e.jPlayer.event.ended:this._updateButtons(false);this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=true;this.status.waitForPlay=true;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(false);this._error({type:e.jPlayer.error.URL,context:n.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking();this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked();this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return false},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent;this.status.currentPercentRelative=e.currentPercentRelative;this.status.currentPercentAbsolute=e.currentPercentAbsolute;this.status.currentTime=e.currentTime;this.status.duration=e.duration;this.status.videoWidth=e.videoWidth;this.status.videoHeight=e.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=false},_updateButtons:function(e){e===t?e=!this.status.paused:this.status.paused=!e;this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));this.css.jq.currentTime.length&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime));this.css.jq.duration.length&&this.css.jq.duration.text(this._convertTime(this.status.duration))},_convertTime:n.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=false;this.html.video.gate=false;this.flash.gate=false},_resetActive:function(){this.html.active=false;this.flash.active=false},setMedia:function(t){var n=this,r=false,i=this.status.media.poster!==t.poster;this._resetMedia();this._resetGate();this._resetActive();e.each(this.formats,function(i,s){var o="video"===n.format[s].media;e.each(n.solutions,function(e,i){if(n[i].support[s]&&n._validString(t[s])){var u="html"===i;o?(u?(n.html.video.gate=true,n._html_setVideo(t),n.html.active=true):(n.flash.gate=true,n._flash_setVideo(t),n.flash.active=true),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n.status.video=true):(u?(n.html.audio.gate=true,n._html_setAudio(t),n.html.active=true):(n.flash.gate=true,n._flash_setAudio(t),n.flash.active=true),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.hide(),n.status.video=false);r=true;return false}});if(r)return false});if(r){if((!this.status.nativeVideoControls||!this.html.video.gate)&&this._validString(t.poster))i?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show();this.status.srcSet=true;this.status.media=e.extend({},t);this._updateButtons(false);this._updateInterface()}else this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(false);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(e.jPlayer.focus=this)},play:function(e){e="number"===typeof e?e:NaN;this.status.srcSet?(this.focus(),this.html.active?this._html_play(e):this.flash.active&&this._flash_play(e)):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(e){e="number"===typeof e?e:NaN;this.status.srcSet?this.html.active?this._html_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},pauseOthers:function(){var t=this;e.each(this.instances,function(e,n){t.element!==n&&n.data("jPlayer").status.srcSet&&n.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100);this.status.srcSet?this.html.active?this._html_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(t){this.options.muted=t;this.html.used&&this._html_mute(t);this.flash.used&&this._flash_mute(t);!this.html.video.gate&&!this.html.audio.gate&&(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){e=e===t?true:!!e;this._muted(e)},unmute:function(e){e=e===t?true:!!e;this._muted(!e)},_updateMute:function(e){e===t&&(e=this.options.muted);this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){t=this._limitValue(t,0,1);this.options.volume=t;this.html.used&&this._html_volume(t);this.flash.used&&this._flash_volume(t);!this.html.video.gate&&!this.html.audio.gate&&(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(t){if(this.css.jq.volumeBar.length){var n=e(t.currentTarget),r=n.offset(),i=t.pageX-r.left,s=n.width();t=n.height()-t.pageY+r.top;n=n.height();this.options.verticalVolume?this.volume(t/n):this.volume(i/s)}this.options.muted&&this._muted(false)},volumeBarValue:function(){},_updateVolume:function(e){e===t&&(e=this.options.volume);e=this.options.muted?0:e;this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);this.options.muted&&this._muted(false)},_cssSelectorAncestor:function(t){var n=this;this.options.cssSelectorAncestor=t;this._removeUiClass();this.ancestorJq=t?e(t):[];t&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();e.each(this.options.cssSelector,function(e,t){n._cssSelector(e,t)});this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(t,n){var r=this;"string"===typeof n?e.jPlayer.prototype.options.cssSelector[t]?(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=n,this.css.cs[t]=this.options.cssSelectorAncestor+" "+n,this.css.jq[t]=n?e(this.css.cs[t]):[],this.css.jq[t].length&&this.css.jq[t].bind("click.jPlayer",function(n){n.preventDefault();r[t](n);e(this).blur()}),n&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:n,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(t){if(this.css.jq.seekBar.length){var n=e(t.currentTarget),r=n.offset();t=t.pageX-r.left;n=n.width();this.playHead(100*t/n)}},playBar:function(){},repeat:function(){this._loop(true)},repeatOff:function(){this._loop(false)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(n,r){var i=n;if(0===arguments.length)return e.extend(true,{},this.options);if("string"===typeof n){var s=n.split(".");if(r===t){i=e.extend(true,{},this.options);for(var o=0;o<s.length;o++)if(i[s[o]]!==t)i=i[s[o]];else return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:n,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;return i}o=i={};for(var u=0;u<s.length;u++)u<s.length-1?(o[s[u]]={},o=o[s[u]]):o[s[u]]=r}this._setOptions(i);return this},_setOptions:function(t){var n=this;e.each(t,function(e,t){n._setOption(e,t)});return this},_setOption:function(t,n){var r=this;switch(t){case"volume":this.volume(n);break;case"muted":this._muted(n);break;case"cssSelectorAncestor":this._cssSelectorAncestor(n);break;case"cssSelector":e.each(n,function(e,t){r._cssSelector(e,t)});break;case"fullScreen":if(this.options[t]!==n){var i=e.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!i||i&&!this.status.waitForPlay){i||(this.options[t]=n);n?this._requestFullscreen():this._exitFullscreen();i||this._setOption("fullWindow",n)}}break;case"fullWindow":this.options[t]!==n&&(this._removeUiClass(),this.options[t]=n,this._refreshSize());break;case"size":!this.options.fullWindow&&this.options[t].cssClass!==n.cssClass&&this._removeUiClass();this.options[t]=e.extend({},this.options[t],n);this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[t].cssClass!==n.cssClass&&this._removeUiClass();this.options[t]=e.extend({},this.options[t],n);this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],n);this._updateAutohide();break;case"loop":this._loop(n);break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],n);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case"noFullWindow":this.options[t]=e.extend({},this.options[t],n);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],n);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case"emulateHtml":this.options[t]!==n&&((this.options[t]=n)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[t]=e.extend({},this.options[t],n);break;case"keyEnabled":this.options[t]=n;!n&&this===e.jPlayer.focus&&(e.jPlayer.focus=null);break;case"keyBindings":this.options[t]=e.extend(true,{},this.options[t],n);break;case"audioFullScreen":this.options[t]=n}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,t=function(){e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId);e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(true,true),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",t),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",t),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(){this._setOption("fullScreen",true)},restoreScreen:function(){this._setOption("fullScreen",false)},_fullscreenAddEventListeners:function(){var t=this,n=e.jPlayer.nativeFeatures.fullscreen;n.api.fullscreenEnabled&&n.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){t._fullscreenchange()}),document.addEventListener(n.event.fullscreenchange,this.internal.fullscreenchangeHandler,false))},_fullscreenRemoveEventListeners:function(){var t=e.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.addEventListener(t.event.fullscreenchange,this.internal.fullscreenchangeHandler,false)},_fullscreenchange:function(){this.options.fullScreen&&!e.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",false)},_requestFullscreen:function(){var t=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],n=e.jPlayer.nativeFeatures.fullscreen;n.used.webkitVideo&&(t=this.htmlElement.video);n.api.fullscreenEnabled&&n.api.requestFullscreen(t)},_exitFullscreen:function(){var t=e.jPlayer.nativeFeatures.fullscreen,n;t.used.webkitVideo&&(n=this.htmlElement.video);t.api.fullscreenEnabled&&t.api.exitFullscreen(n)},_html_initMedia:function(t){var n=e(this.htmlElement.media).empty();e.each(t.track||[],function(e,t){var r=document.createElement("track");r.setAttribute("kind",t.kind?t.kind:"");r.setAttribute("src",t.src?t.src:"");r.setAttribute("srclang",t.srclang?t.srclang:"");r.setAttribute("label",t.label?t.label:"");t.def&&r.setAttribute("default",t.def);n.append(r)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&this._html_load();this._trigger(e.jPlayer.event.timeupdate)},_html_setFormat:function(t){var n=this;e.each(this.formats,function(e,r){if(n.html.support[r]&&t[r])return n.status.src=t[r],n.status.format[r]=true,n.status.formatType=r,false})},_html_setAudio:function(e){this._html_setFormat(e);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(e)},_html_setVideo:function(e){this._html_setFormat(e);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(e.poster)?e.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(e)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&!this.status.nativeVideoControls&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=false,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this,n=this.htmlElement.media;this._html_load();if(isNaN(e))n.play();else{this.internal.cmdsIgnored&&n.play();try{if(!n.seekable||"object"===typeof n.seekable&&0<n.seekable.length){n.currentTime=e;n.play()}else throw 1}catch(r){this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},250);return}}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this,n=this.htmlElement.media;0<e?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);n.pause();if(!isNaN(e))try{if(!n.seekable||"object"===typeof n.seekable&&0<n.seekable.length)n.currentTime=e;else throw 1}catch(r){this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},250);return}0<e&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this,n=this.htmlElement.media;this._html_load();try{if("object"===typeof n.seekable&&0<n.seekable.length)n.currentTime=e*n.seekable.end(n.seekable.length-1)/100;else if(0<n.duration&&!isNaN(n.duration))n.currentTime=e*n.duration/100;else throw"e"}catch(r){this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=false,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(e){this.html.audio.available&&(this.htmlElement.audio.volume=e);this.html.video.available&&(this.htmlElement.video.volume=e)},_html_mute:function(e){this.html.audio.available&&(this.htmlElement.audio.muted=e);this.html.video.available&&(this.htmlElement.video.muted=e)},_flash_setAudio:function(t){var n=this;try{e.each(this.formats,function(e,r){if(n.flash.support[r]&&t[r]){switch(r){case"m4a":case"fla":n._getMovie().fl_setAudio_m4a(t[r]);break;case"mp3":n._getMovie().fl_setAudio_mp3(t[r]);break;case"rtmpa":n._getMovie().fl_setAudio_rtmp(t[r])}n.status.src=t[r];n.status.format[r]=true;n.status.formatType=r;return false}});"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=false)}catch(r){this._flashError(r)}},_flash_setVideo:function(t){var n=this;try{e.each(this.formats,function(e,r){if(n.flash.support[r]&&t[r]){switch(r){case"m4v":case"flv":n._getMovie().fl_setVideo_m4v(t[r]);break;case"rtmpv":n._getMovie().fl_setVideo_rtmp(t[r])}n.status.src=t[r];n.status.format[r]=true;n.status.formatType=r;return false}});"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=false)}catch(r){this._flashError(r)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=false},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(t){this._flashError(t)}this.status.waitForLoad=false;this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(t){this._flashError(t)}0<e&&(this.status.waitForLoad=false,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=false,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(t){this._flashError(t)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var e=0,t;if(window.ActiveXObject)try{if(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var n=t.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),e=parseInt(n[0],10)+"."+parseInt(n[1],10))}}catch(r){}else navigator.plugins&&0<navigator.mimeTypes.length&&navigator.plugins["Shockwave Flash"]&&(e=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*e},_checkForFlash:function(e){var t=false;this._getFlashPluginVersion()>=e&&(t=true);return t},_validString:function(e){return e&&"string"===typeof e},_limitValue:function(e,t,n){return e<t?t:e>n?n:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var n;n=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:e.jPlayer.error[n],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[n]+t.message,hint:e.jPlayer.errorHint[n]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t);this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n\n"+t.message:"")+(t.hint?"\n\n"+t.hint:"")+"\n\nContext: "+t.context)},_warning:function(n){this._trigger(e.jPlayer.event.warning,t,n);this.options.warningAlerts&&this._alert("Warning!"+(n.message?"\n\n"+n.message:"")+(n.hint?"\n\n"+n.hint:"")+"\n\nContext: "+n.context)},_alert:function(e){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,n){t.internal.domNode[n]=function(e){t[n](e)}});e.each(e.jPlayer.event,function(n,r){var i=true;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){if(t===n)return i=false});i&&t.element.bind(r+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(n,false,true);t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.status[n]});e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.options[n]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml");e.each((e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions).split(/\s+/g),function(e,n){delete t.internal.domNode[n]})}};e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "};e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});Calendar.getWeekNumber=function(e,t){t=typeof t=="number"?t:1;t=t==0?7:t;var n=Calendar.calculateWeekNumber(e,t);if(e.getMonth()==11){var r=new Date(e.getFullYear()+1,0,1);if(t==7){r=new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());if((new Date(r.getFullYear(),r.getMonth(),r.getDate()+6)).getFullYear()>r.getFullYear())n=1}else{r=r.getIsoDay();var i=new Date(e.getFullYear(),e.getMonth(),e.getDate()-(e.getIsoDay()-1));if((new Date(i.getFullYear(),i.getMonth(),i.getDate()+6)).getFullYear()>i.getFullYear()&&r<5)n=1}}if(n==0){n=new Date(e.getFullYear(),e.getMonth(),e.getDate()-7);n=Calendar.calculateWeekNumber(n,t)}return n};Calendar.calculateWeekNumber=function(e,t){var n=[0,31,59,90,120,151,181,212,243,273,304,334],r=[0,31,60,91,121,152,182,213,244,274,305,335];n=(new Date(e.getFullYear(),1,29)).getMonth()==1?e.getDate()+r[e.getMonth()]:e.getDate()+n[e.getMonth()];r=e.getIsoDay();r=Calendar.getShiftBetweenNumbers(t,r);r=Calendar.shiftNumber(1,r);return Math.floor((n-r+(t==7?13:10))/7)};Calendar.getShiftBetweenNumbers=function(e,t){for(var n=0;n<7;n++){if(e==t)return n;e++;if(e==8)e=1}return 0};Calendar.shiftNumber=function(e,t){if(t==0)return e;for(var n=0;n<t;n++){e++;if(e==8)e=1}return e};Date.prototype.getIsoDay=function(){var e=this.getDay();return e==0?7:e};ClientInlineEditor.prototype={isIos:undefined,hiddenCssClass:"h-hidden",createEditor:function(e){this.options.renderRightLinkWithIcon||this.initDeviceChecks();this.editField=$(e.multiline?"<textarea/>":'<input type="text"/>').css("resize","none").addClass(this.hiddenCssClass);e.editFieldAutoWidth&&this.editField.width(this.viewField.width());e.useEditFieldCssClass&&this.editField.addClass(e.editFieldCssClass);!e.multiline&&e.maxLength&&this.editField.attr("maxlength",e.maxLength);e.multiline&&e.maxLength&&this.editField.maxlength({max:e.maxLength});this.editHidden=this.isGetInitialTextFromHidden?$(this.hiddenField):$('<input type="hidden"/>').val(this.viewField.text());this.setNewText(e.ignoreViewModeText?"":$.trim(this.editHidden.val()));this.viewField.after(this.editField);this.isGetInitialTextFromHidden||this.viewField.after(this.editHidden);e.multiline&&e.autoResize&&this.editField.autogrow();this.switchToViewMode(false);this.editField.removeClass(this.hiddenCssClass).keyup({self:this},this.editFieldKeyUp).keypress({self:this},this.editFieldKeyPress).on("paste",$.proxy(this.hideWatermark,this)).focus({self:this},this.editFieldFocus).blur({self:this},this.editFieldBlur)},setNewText:function(e){if(!this.options.ignoreViewModeText&&!this.options.supressOriginalBehaviour)if(e)this.options.multiline?this.viewField.html(CommonFunctions.replaceLineBreaksWithBrTags(e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;"))):this.viewField.text(e);else this.viewField.html("");this.editField||this.createEditor(this.options);this.editField.val(e);this.editHidden.val(e)},switchToViewMode:function(e,t){this.editField.hide();e&&this.options.highlightOnSave?this.viewField.fadeIn("slow"):this.viewField.show();this.toggleActivatorTooltip(true);this.fireChangeMode(false,e,t);this.toggleRightLinkMode(true)},switchToEditMode:function(){this.editField||this.createEditor(this.options);if(this.isViewMode()){this.viewField.hide();this.editField.show();this.options.editFieldDisplayInline&&this.editField.css("display","inline");this.toggleActivatorTooltip(false);this.fireChangeMode(true,false);this.editField.focus();this.toggleRightLinkMode(false)}},fireChangeMode:function(e,t,n){if(this.onChangeModeFunction){var r=this;setTimeout(function(){r.onChangeModeFunction({isEditMode:e,isNewTextSaved:t,actualText:n,source:r.viewField,currentOptions:r.options,userData:r.userData})})}},isViewMode:function(){return this.editField.is(":hidden")},updateText:function(){var e=this,t={isUpdateSuccess:true,stopOnEdit:false,actualText:e.isWatermarkMode?"":e.editField.val(),source:e.viewField,currentOptions:e.options,userData:e.userData};if(t.actualText===e.editHidden.val())setTimeout(function(){e.switchToViewMode(false)},e.options.renderRightLinkWithIcon?100:0);else{e.toggleEditField(false);e.onEditFunction?e.onEditFunction(t,$.proxy(e.onUpdateComplete,e)):setTimeout(function(){e.onUpdateComplete(t)})}},onUpdateComplete:function(e){this.toggleEditField(true);if(e.isUpdateSuccess){this.setNewText(e.actualText);this.switchToViewMode(true,e.actualText)}else e.stopOnEdit||this.rollbackText()},rollbackText:function(){this.editField.val(this.editHidden.val());this.switchToViewMode(false)},toggleEditField:function(e){this.editField.prop("disabled",!e)},toggleActivatorTooltip:function(e){this.editModeActivator.css("cursor",e?"pointer":"default");if(this.options.useClickToEditToolTip)this.editModeActivator.attr("title",e?this.options.clickToEditToolTip:null)},isEnterKeyAndNeedToSubmit:function(e){return this.options.submitOnEnter&&e.which===CommonConstants.keyCodes.enter&&!e.shiftKey},showWatermark:function(){if(!(!this.options.useWatermark||this.isWatermarkMode||this.editField.val())){this.options.useWatermarkCssClass&&this.editField.addClass(this.options.watermarkCssClass);this.editField.val(this.options.watermark);this.isWatermarkMode=true}},hideWatermark:function(){if(this.options.useWatermark&&this.isWatermarkMode){this.options.useWatermarkCssClass&&this.editField.removeClass(this.options.watermarkCssClass);this.editField.val("");this.isWatermarkMode=false}},editModeActivatorKeyDown:function(e){var t=e.data.self;t.fireClickByKeyDown(e,t.editModeActivator)},rightLinkKeyDown:function(e){var t=e.data.self;t.fireClickByKeyDown(e,t.editLink)},fireClickByKeyDown:function(e,t){if(e.which===CommonConstants.keyCodes.enter){e.preventDefault();setTimeout(function(){t.click()},400)}},editFieldFocus:function(e){e=e.data.self;var t=e.editField.get(0);e.showWatermark();CommonFunctions.setFocusTo(t,!e.isWatermarkMode);if(e.options.highlightOnFocus)e.isIos?t.setSelectionRange(0,t.value.length):e.editField.select();e.options.multiline&&e.options.autoResize&&e.editField.change()},editFieldBlur:function(e){e.data.self.updateTextOnBlur();e.stopPropagation()},updateTextOnBlur:function(){if(!this.editField.prop("disabled")){this.hideWatermark();this.updateText()}},editFieldKeyUp:function(e){var t=e.data.self;if(!t.isViewMode()){if(t.editField.prop("disabled"))return true;if(e.which===CommonConstants.keyCodes.escape)t.rollbackText();else if(t.isEnterKeyAndNeedToSubmit(e)){e.stopPropagation();t.updateText();return false}}return true},editFieldKeyPress:function(e){var t=e.data.self;t.hideWatermark();return!t.isEnterKeyAndNeedToSubmit(e)},initDeviceChecks:function(){this.isAndroidDevice=(this.isIos=CommonFunctions.isIos())?false:CommonFunctions.isAndroidDevice()},rightLinkClick:function(e){var t=e.data.self;if(!t.editField||t.isViewMode())t.switchToEditMode();else t.isIos&&t.updateTextOnBlur();e.preventDefault()},toggleRightLinkMode:function(e,t){this.editLink.toggleClass(this.options.rightLinkEditModeCssClass,!e).prop("title",e?this.options.clickToEditToolTip:this.options.clickToSaveToolTip);!this.isIos&&!this.isAndroidDevice&&this.editLink.toggleClass(this.options.rightLinkViewModeCssClass,e);e&&!t&&this.editLink.focus().blur()},getEditFieldText:function(){return this.editField.val()}};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1};Array.prototype.remove=function(){for(var e,t=arguments,n=t.length,r;n&&this.length;)for(e=t[--n];(r=this.indexOf(e))!=-1;)this.splice(r,1);return this};if(!String.format)String.format=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/\{(\d+)\}/g,function(e,n){return n in t?t[n]:e})};var CommonConstants={keyCodes:{backspace:8,enter:13,escape:27,space:32,arrowUp:38,arrowDown:40,del:46},mediaScreenSizes:{mobile:568,iPadPortraitMode:768},onePixelTransparentImageSource:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII="},CommonWindowMessages={collapseContentAreaFrame:{messageName:"collapseContentAreaFrame"},expandContentAreaFrame:{messageName:"expandContentAreaFrame"},contentAreaFrameHasCollapsed:{messageName:"contentAreaFrameHasCollapsed"},contentAreaFrameHasExpanded:{messageName:"contentAreaFrameHasExpanded"},collapseExtensionIframe:{messageName:"collapseExtensionIframe"},expandExtensionIframe:{messageName:"expandExtensionIframe"},unreadNotificationCounterChanged:{messageName:"unreadNotificationCounterChanged",counter:0},unreadMessageCounterChanged:{messageName:"unreadMessageCounterChanged",counter:0}},CommonTriggers={clickInInnerFrame:"clickInInnerFrame"},CommonFunctions={setFocusTo:function(e,t){if(e.setSelectionRange){e.focus();var n=t?e.value.length:0;e.setSelectionRange(n,n)}else if(e.createTextRange){n=e.createTextRange();t&&n.collapse(false);n.select()}},makePostMessageCall:function(e,t){e.postMessage(JSON.stringify(t),"*")},attachPostMessageEventListener:function(e,t,n){e.on("message",function(e){var r,i=e.originalEvent.source;if(e.originalEvent.data&&(r=JSON.parse(e.originalEvent.data))&&r.messageName&&(typeof t==="string"?r.messageName===t:t.indexOf(r.messageName)!=-1))n(r,i)})},addIdToHidden:function(e,t){if(e&&t){for(var n=document.getElementById(e),r=n.value.split(","),i=false,s=0;s<r.length;s++)if(t==r[s]){i=true;break}i||(n.value+=t+",")}},removeIdFromHidden:function(e,t){if(e&&t){var n=document.getElementById(e);if(n&&n.value){for(var r=n.value.split(","),i="",s=0;s<r.length;s++)if(t!=r[s]&&r[s].length>0)i+=r[s]+",";n.value=i}}},setupDropDownMenu:function(e,t,n){var r=e?"touchstart":"click";n.find("a").click(function(){n.hide()});t.on(r+" keydown",function(e){if(e.type===r||e.which===CommonConstants.keyCodes.arrowDown||e.which===CommonConstants.keyCodes.enter)n.toggle()});$(document).on(r+" "+CommonTriggers.clickInInnerFrame,function(e){if(n.is(":visible")){var r=e.target,i=$(r);e=r===t.get(0)||i.closest(t).length===1;r=!e&&(r===n.get(0)||i.closest(n).length===1);!e&&!r&&n.hide()}})},safeExecuteFunction:function(e){if(e)try{return e()}catch(t){}return true},htmlEncode:function(e){return $("<div/>").text(e).html()},replaceLineBreaksWithBrTags:function(e){return e.replace(/\r?\n/g,"<br />")},isPlainText:function(e){var t=RegExp("^s*<[a-z]+>[^<]*</[a-z]+>(s|\n)*$","ig");e=e.replace(/<br((\s*)|(\s[^>]*))\/?>/gi,"");e=e.replace(/<\/p>\s*<p(\s+[^>]*)?>/gi,"\n");return e.indexOf("<")==-1||e.match(t)!=null},isIos:function(){return navigator.userAgent.match(/iPod|iPhone|iPad/i)!=null},isAndroidDevice:function(){return navigator.userAgent.match(/Android/i)!=null},setEmbeddedObjectsVisibility:function(e,t,n){if(t)t.find("applet")[e?"show":"hide"]();if(n)n.find("iframe,object").css("visibility",e?"visible":"hidden")},alertAjaxError:function(e){e.status>=400&&e.responseText&&alert($("<div/>").html(e.responseText).text())},getMessageCountTemplate:function(e,t){return t?" ("+e+")":e>=100?"99+":e}};(function(e){e.fn.setCursorPosition=function(e){this.each(function(t,n){if(n.setSelectionRange)n.setSelectionRange(e,e);else if(n.createTextRange){var r=n.createTextRange();r.collapse(true);r.moveEnd("character",e);r.moveStart("character",e);r.select()}});return this};e.fn.scrollMinimal=function(){var t=this.offset().top,n=this.outerHeight(true),r=e(window).scrollTop(),i=e(window).height();if(t<r)e(window).scrollTop(t);else t+n>r+i&&e(window).scrollTop(t-i+n)};e.fn.toggleHyperlink=function(e){if(e){this.removeAttr("disabled");this.removeData("disabled")}else{this.attr("disabled","disabled");this.data("disabled",true)}return this};e.fn.getIfHyperLinkEnabled=function(){return this.attr("disabled")!=="disabled"&&!this.data("disabled")};e.fn.maxlength=function(t){t=e.extend({max:200},t);return this.each(function(){obj=e(this);obj.keypress(function(n){var r=t.max,i=e(n.target),s=i.val().length;s=n.which;if(s>=CommonConstants.keyCodes.space||s===CommonConstants.keyCodes.enter){s=i.val().length;s>=r&&n.preventDefault()}});obj.change(function(n){var r=t.max;n=e(n.target);var i=n.val().length;i=n.val().length;if(i>r){r=n.val().substr(0,r);n.val(r)}})})}})(jQuery);CssModal.commonSettings=undefined;CssModal.modes=undefined;CssModal.closeDialog=function(){window.location.hash="!"};CssModal.instances=[];(function(e,t){function n(e,n){n=n?n:0;if(n<e.length)for(var i=r.length-1;i>=0;i--)if(r[i].jQueryInput.get(0)===e.get(n))return r[i].datePickerFunction;return t}var r=[];e.DatePickerPool={add:function(e,t){r.push({jQueryInput:e,datePickerFunction:t})},getDateAsString:function(e){return(e=n(e))?e.getDateAsString():""},getDate:function(e){return n(e)?n(e).getDate():t},setDate:function(e,t){for(var r=e.length-1;r>=0;r--){var i=n(e,r);i&&i.setDate(t)}}}})(window);DropDownMenu.instances=[];DropDownMenu.initialize=function(){for(var e=0,t=this.instances.length;e<t;e+=1)this.instances[e].initialize()};ExpandableContainer.defaults={isExpanded:false,expander:".ccl-expandable-container-header",target:".ccl-expandable-container-content",keepStateInCookie:false,cookieName:"ExpandableContainerState",accessibleExpander:"a",expandTooltip:undefined,collapseTooltip:undefined};$.widget("itslccl.extendedTextBox",{options:{watermarkText:"",watermarkCssClass:""},_input:undefined,_isWatermarkMode:false,_create:function(){var e=this;this._input=this.element;this._input.is(":focus")?this._input.setCursorPosition(this._input.val().length):this._showWatermark();this._input.keypress(function(t){t=t?t:window.event;e._hideWatermark();return t.which!==CommonConstants.keyCodes.enter||t.shiftKey});this._input.blur(function(){e._input.is(":visible")&&e._showWatermark()});this._input.focus(function(){e._hideWatermark()});this._input.on("paste",function(){e._hideWatermark()})},_showWatermark:function(){if(!(this._isWatermarkMode||this._input.val())){this._input.val(this.options.watermarkText);this._input.addClass(this.options.watermarkCssClass);this._isWatermarkMode=true}},_hideWatermark:function(){if(this._isWatermarkMode){this._input.val("");this._input.removeClass(this.options.watermarkCssClass);this._isWatermarkMode=false}}});(function(e){typeof define==="function"&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],e):e(window.jQuery,window.tmpl,window.loadImage)})(function(e,t,n){e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{autoUpload:true,maxNumberOfFiles:undefined,maxFileSize:undefined,minFileSize:undefined,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5e6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:true,filesContainer:undefined,prependFiles:false,dataType:"json",kbText:"KB",mbText:"MB",confirmReplaceFile:function(){return true},customErrors:undefined,drop:function(t,n){var r=(e(this).data("blueimp-fileupload")||e(this).data("fileupload")).options,i=[],s=false;e.each(n.files,function(e,t){if(!t.type&&(t.size===undefined||t.size<1||t.size%4096==0&&t.name.split(".").length<2))s=true;else i.push(t)});if(s)n.files=i;if(r.singleFileMode&&n.files.length>1)n.files=n.files.slice(0,1)},add:function(t,n){var r=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),i=r.options,s=n.files;e(this).fileupload("process",n).done(function(){if(i.singleFileMode&&i.maxNumberOfFiles==0)if(i.confirmReplaceFile())r.emptyFileList();else return false;r._adjustMaxNumberOfFiles(-s.length);n.maxNumberOfFilesAdjusted=true;n.files.valid=n.isValidated=r._validate(s);if(n.files.length>0&&r.options.defaultThumbnailUrl)n.files[0].thumbnailUrl=r.options.defaultThumbnailUrl;n.context=r._renderUpload(s).data("data",n);i.filesContainer[i.prependFiles?"prepend":"append"](n.context);r._renderPreviews(n);r._forceReflow(n.context);r._transition(n.context).done(function(){if(r._trigger("added",t,n)!==false&&(i.autoUpload||n.autoUpload)&&n.autoUpload!==false&&n.isValidated)n.submit()})})},send:function(t,n){var r=e(this).data("blueimp-fileupload")||e(this).data("fileupload");if(r._additionalClientValidationCallback&&!r._additionalClientValidationCallback(n))return false;if(!n.isValidated){if(!n.maxNumberOfFilesAdjusted){r._adjustMaxNumberOfFiles(-n.files.length);n.maxNumberOfFilesAdjusted=true}if(!r._validate(n.files))return false}if(n.context&&n.dataType&&n.dataType.substr(0,6)==="iframe"){n.context.find(".ccl-progressbar").addClass(!e.support.transition&&"progress-animated").find(".ui-progressbar-value").css("width","100%");n.context.find(".ccl-progressbar-labelcontainer").html("100%")}r._addUploadToList(t,n);return r._trigger("sent",t,n)},done:function(t,n){var r=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),i=r._getFilesFromResponse(n),s,o;if(n.context)n.context.each(function(o){var u=i[o]||{error:"Empty file upload result"},f=r._addFinishedDeferreds();u.error||r._addFilesToList(i);r._transition(e(this)).done(function(){var i=e(this);s=r._renderDownload([u]).replaceAll(i);r._forceReflow(s);r._transition(s).done(function(){n.context=e(this);r._renderPreviews(n);r._trigger("completed",t,n);r._trigger("finished",t,n);f.resolve()})})});else{if(i.length){e.each(i,function(e,t){if(n.maxNumberOfFilesAdjusted&&t.error)r._adjustMaxNumberOfFiles(1);else!n.maxNumberOfFilesAdjusted&&!t.error&&r._adjustMaxNumberOfFiles(-1)});n.maxNumberOfFilesAdjusted=true}s=r._renderDownload(i).appendTo(r.options.filesContainer);r._renderPreviews(n);r._forceReflow(s);o=r._addFinishedDeferreds();r._transition(s).done(function(){n.context=e(this);r._trigger("completed",t,n);r._trigger("finished",t,n);o.resolve()})}},fail:function(t,n){var r=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),i,s;n.maxNumberOfFilesAdjusted&&r._adjustMaxNumberOfFiles(n.files.length);if(n.context)n.context.each(function(o){if(n.errorThrown!=="abort"){var u=n.files[o];o=n.jqXHR&&n.jqXHR.responseText?e.parseJSON(n.jqXHR.responseText).message:undefined;u.error=u.error||o||n.errorThrown||r.options.customErrors.unknownError;s=r._addFinishedDeferreds();r._transition(e(this)).done(function(){var o=e(this);i=r._renderDownload([u]).replaceAll(o);r._forceReflow(i);r._transition(i).done(function(){n.context=e(this);r._trigger("failed",t,n);r._trigger("finished",t,n);s.resolve()})})}else{s=r._addFinishedDeferreds();r._transition(e(this)).done(function(){e(this).remove();r._trigger("failed",t,n);r._trigger("finished",t,n);s.resolve()})}});else if(n.errorThrown!=="abort"){n.context=r._renderUpload(n.files).appendTo(r.options.filesContainer).data("data",n);r._forceReflow(n.context);s=r._addFinishedDeferreds();r._transition(n.context).done(function(){n.context=e(this);r._trigger("failed",t,n);r._trigger("finished",t,n);s.resolve()})}else{r._trigger("failed",t,n);r._trigger("finished",t,n);r._addFinishedDeferreds().resolve()}},progress:function(e,t){if(t.context){var n=parseInt(t.loaded/t.total*100,10);t.context.find(".ccl-progressbar .ui-progressbar-value").css("width",n+"%");t.context.find(".ccl-progressbar-labelcontainer").html(n+"%")}},progressall:function(t,n){var r=e(this),i=parseInt(n.loaded/n.total*100,10),s=r.find(".fileupload-progress"),o=s.find(".progress-extended");if(o.length)o.html((r.data("blueimp-fileupload")||r.data("fileupload"))._renderExtendedProgress(n));s.find(".ccl-progressbar .ui-progressbar-value").css("width",i+"%");s.find(".ccl-progressbar-labelcontainer").html(i+"%")},start:function(t){var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload");n._resetFinishedDeferreds();n._transition(e(this).find(".fileupload-progress")).done(function(){n._trigger("started",t)});n._startUploadCallback&&n._startUploadCallback()},stop:function(t){var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),r=n._addFinishedDeferreds();e.when.apply(e,n._getFinishedDeferreds()).done(function(){n._trigger("stopped",t)});n._transition(e(this).find(".fileupload-progress")).done(function(){var t=e(this);t.find(".ccl-progressbar .ui-progressbar-value").css("width","0");t.find(".ccl-progressbar-labelcontainer").html("0%");t.find(".progress-extended").html("&nbsp;");r.resolve()});n._stopUploadCallback&&n._stopUploadCallback()},destroy:function(t,n){var r=e(this).data("blueimp-fileupload")||e(this).data("fileupload");n.url&&e.ajax(n);n.filekey&&r._adjustMaxNumberOfFiles(1);r._removeFilesFromList(n.filekey);r._transition(n.context).done(function(){e(this).remove();r._trigger("destroyed",t,n)})}},_addFilesToList:function(t){var n=this;if(!n._fileList){n._fileList=[];n._fileListKeys=[]}e.each(t,function(e,t){n._fileList.push(t);n._fileListKeys.push(t.id)});n.options.stateHiddenField.val(JSON.stringify(n._fileList));n._notifyAboutResultChanges();n._addFileCallback&&n._addFileCallback()},_addUploadToList:function(e,t){if(!this._uploadsList)this._uploadsList=[];this._uploadsList.push({element:e,data:t})},_removeFilesFromList:function(e){if(this._fileList&&this._fileList.length>0){e=this._fileListKeys.indexOf(e);if(e>-1){this._fileList=this._fileList.remove(this._fileList[e]);this._fileListKeys=this._fileListKeys.remove(this._fileListKeys[e])}}this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback()},_notifyAboutResultChanges:function(){this._trigger("resultschanged",null,{results:this._fileList})},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(t){t||(t=e.Deferred());this._finishedUploads.push(t);return t},_getFinishedDeferreds:function(){return this._finishedUploads},_getFilesFromResponse:function(t){if(t.result&&e.isArray(t.result.files))return t.result.files;return[]},_enableDragToDesktop:function(){var t=e(this),n=t.prop("href"),r=t.prop("download");t.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",r,n].join(":"))}catch(t){}})},_adjustMaxNumberOfFiles:function(e){if(typeof this.options.maxNumberOfFiles==="number"){this.options.maxNumberOfFiles+=e;this.options.maxNumberOfFiles<1&&!this.options.singleFileMode?this._disableFileInputButton():this._enableFileInputButton()}},_formatFileSize:function(e){if(typeof e!=="number")return"";if(e>=1048576)return(e/1048576).toFixed(2)+" "+this.options.mbText;return(e/1024).toFixed(2)+" "+this.options.kbText},_formatBitrate:function(e){if(typeof e!=="number")return"";if(e>=1e9)return(e/1e9).toFixed(2)+" Gbit/s";if(e>=1e6)return(e/1e6).toFixed(2)+" Mbit/s";if(e>=1e3)return(e/1e3).toFixed(2)+" kbit/s";return e.toFixed(2)+" bit/s"},_formatTime:function(e){var t=new Date(e*1e3);e=(e=parseInt(e/86400,10))?e+"d ":"";return e+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(e*100).toFixed(2)+" %"},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+" | "+this._formatTime((e.total-e.loaded)*8/e.bitrate)+" | "+this._formatPercentage(e.loaded/e.total)+" | "+this._formatFileSize(e.loaded)+" / "+this._formatFileSize(e.total)},_hasError:function(e){if(e.error)return e.error;if(this.options.maxNumberOfFiles<0)return this.options.customErrors&&this.options.customErrors.maxNumberOfFilesExceeded?this.options.customErrors.maxNumberOfFilesExceeded:"Maximum number of files exceeded";if(!(this.options.acceptFileTypes.test(e.type)||this.options.acceptFileTypes.test(e.name)))return"Filetype not allowed";if(this.options.maxFileSize&&e.size>this.options.maxFileSize){this._errorCallback&&this._errorCallback();return this.options.customErrors&&this.options.customErrors.fileIsTooBig?this.options.customErrors.fileIsTooBig:"File is too big"}if(typeof e.size==="number"&&e.size<this.options.minFileSize)return"File is too small";return null},_validate:function(t){var n=this,r=!!t.length;e.each(t,function(e,t){t.error=n._hasError(t);if(t.error)r=false});return r},_renderTemplate:function(t,n){if(!t)return e();var r=t({files:n,formatFileSize:this._formatFileSize,options:this.options});if(r instanceof e)return r;return e(this.options.templatesContainer).html(r).children()},_renderPreview:function(t,r){var i=this,s=this.options,o=e.Deferred();return(n&&n(t,function(t){r.empty();r.append(t);i._forceReflow(r);i._transition(r).done(function(){o.resolveWith(r)});e.contains(i.document[0].body,r[0])||o.resolveWith(r)},{maxWidth:s.previewMaxWidth,maxHeight:s.previewMaxHeight,canvas:s.previewAsCanvas})||o.resolveWith(r))&&o},_renderPreviews:function(t){var n=this,r=this.options;t.context.find(".preview span").each(function(i,s){var o=t.files[i];if(r.previewSourceFileTypes.test(o.type)&&(e.type(r.previewSourceMaxFileSize)!=="number"||o.size<r.previewSourceMaxFileSize))n._processingQueue=n._processingQueue.pipe(function(){var r=e.Deferred(),i=e.Event("previewdone",{target:s});n._renderPreview(o,e(s)).done(function(){n._trigger(i.type,i,t);r.resolveWith(n)});return r.promise()})});return this._processingQueue},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(t){t.preventDefault();t=e(t.currentTarget);var n=t.closest(".template-upload").data("data");n&&n.submit&&!n.jqXHR&&n.submit()&&t.prop("disabled",true)},_cancelHandler:function(t){t.preventDefault();var n=e(t.currentTarget).closest(".template-upload").data("data")||{};this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback();if(n.jqXHR)n.jqXHR.abort();else{n.errorThrown="abort";this._trigger("fail",t,n)}},_deleteHandler:function(t){t.preventDefault();var n=e(t.currentTarget);this._trigger("destroy",t,e.extend({context:n.closest(".template-download"),type:"POST",dataType:this.options.dataType},n.data()))},_forceReflow:function(t){return e.support.transition&&t.length&&t[0].offsetWidth},_transition:function(t){var n=e.Deferred();if(e.support.transition&&t.hasClass("fade"))t.bind(e.support.transition.end,function(r){if(r.target===t[0]){t.unbind(e.support.transition.end);n.resolveWith(t)}}).toggleClass("in");else{t.toggleClass("in");n.resolveWith(t)}return n},_initButtonBarEventHandlers:function(){var t=this.element.find(".fileupload-buttonbar"),n=this.options.filesContainer;this._on(t.find(".start"),{click:function(e){e.preventDefault();n.find(".start button").click()}});this._on(t.find(".cancel"),{click:function(e){e.preventDefault();n.find(".cancel button").click()}});this._on(t.find(".delete"),{click:function(e){e.preventDefault();n.find(".delete input:checked").siblings("button").click();t.find(".toggle").prop("checked",false)}});this._on(t.find(".toggle"),{change:function(t){n.find(".delete input").prop("checked",e(t.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete .button":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var e=this.options;e.templatesContainer=this.document[0].createElement(e.filesContainer.prop("nodeName"));if(t){if(e.uploadTemplateId)e.uploadTemplate=t(e.uploadTemplateId);if(e.downloadTemplateId)e.downloadTemplate=t(e.downloadTemplateId)}},_initFilesContainer:function(){var t=this.options;if(t.filesContainer===undefined)t.filesContainer=this.element.find(".files");else if(!(t.filesContainer instanceof e))t.filesContainer=e(t.filesContainer)},_stringToRegExp:function(e){e=e.split("/");var t=e.pop();e.shift();return RegExp(e.join("/"),t)},_initRegExpOptions:function(){var t=this.options;if(e.type(t.acceptFileTypes)==="string")t.acceptFileTypes=this._stringToRegExp(t.acceptFileTypes);if(e.type(t.previewSourceFileTypes)==="string")t.previewSourceFileTypes=this._stringToRegExp(t.previewSourceFileTypes)},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates();this._initRegExpOptions()},_setOption:function(e,t){this._super(e,t);e==="maxNumberOfFiles"&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super();this._refreshOptionsList.push("filesContainer","uploadTemplateId","downloadTemplateId");if(!this._processingQueue){this._processingQueue=e.Deferred().resolveWith(this).promise();this.process=function(){return this._processingQueue}}this._resetFinishedDeferreds()},enable:function(){var e=false;if(this.options.disabled)e=true;this._super();if(e){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()},emptyFileList:function(){this.options.filesContainer.find(".delete .button, .cancel button").click()},clearResults:function(){e(this.options.filesContainer[0]).find("tr").each(function(){var t=e(this);t.hasClass("clearme")||t.find(".error").length===0?t.remove():t.addClass("clearme")});if(this._fileList){this._adjustMaxNumberOfFiles(this._fileList.length);this._fileList.length=0;this._fileListKeys.length=0}this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges()},allowHide:function(){return e(this.options.filesContainer[0]).find("tr .error").length===0},abortAllUploads:function(){if(this._uploadsList){var t=this;e.each(this._uploadsList,function(e,n){if(n.data.jqXHR)n.data.jqXHR.abort();else{n.data.errorThrown="abort";t._trigger("fail",n,n.data)}})}},getUploadedFiles:function(){return this._fileList||[]},setStartUploadCallback:function(e){if(typeof e=="function")this._startUploadCallback=e},setStopUploadCallback:function(e){if(typeof e=="function")this._stopUploadCallback=e},setAddFileCallback:function(e){if(typeof e=="function")this._addFileCallback=e},setRemoveFileCallback:function(e){if(typeof e=="function")this._removeFileCallback=e},setErrorCallback:function(e){if(typeof e=="function")this._errorCallback=e},setAdditionalClientValidationCallback:function(e){if(typeof e=="function")this._additionalClientValidationCallback=e},renderHiddenFieldContent:function(){var t=this.options,n=this.options.stateHiddenField.val();if((n=n?JSON.parse(n):[])&&n.length>0){var r=this._renderDownload(n);r.appendTo(t.filesContainer);var i=[];e.each(n,function(e,t){if(!t.error||t.error.length==0)i.push(t)});i.length>0&&this._addFilesToList(i);this._adjustMaxNumberOfFiles(t.singleFileMode?-n.length:-i.length);var s=[];e.each(n,function(e,n){if(n.type&&t.previewSourceFileTypes.test(n.type)&&n.fileUrl){s.push(n);s[s.length-1].toString=function(){return n.fileUrl}}});s.length>0&&this._renderPreviews({context:r.data("data",{files:n}),files:s})}}})});var FixedHeader;(function(e,t,n){FixedHeader=function(e,t){if(e)if(!this instanceof FixedHeader)alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword.");else{var n={aoCache:[],oSides:{top:true,bottom:false,left:0,right:0},oZIndexes:{top:104,bottom:103,left:102,right:101,topLeft:105},oCloneOnDraw:{top:false,bottom:false,left:true,right:true},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bFooter:false,bInitComplete:false};this.fnGetSettings=function(){return n};this.fnUpdate=function(){this._fnUpdateClones();this._fnUpdatePositions()};this.fnPosition=function(){this._fnUpdatePositions()};this.fnInit(e,t);if(typeof e.fnSettings=="function")e._oPluginFixedHeader=this}};FixedHeader.prototype={fnInit:function(t,r){var i=this.fnGetSettings(),s=this;this.fnInitSettings(i,r);i.nTable=t;i.bFooter=n(">tfoot",i.nTable).length>0?true:false;i.oSides.left&&i.aoCache.push(s._fnCloneTable("fixedLeft","FixedHeader_Left",s._fnCloneTLeft,i.oSides.left));i.oSides.top&&i.oSides.left&&i.aoCache.push(s._fnCloneTable("fixedTopLeft","FixedHeader_TopLeft",s._fnCloneTTopLeft,i.oSides.left));i.oSides.top&&i.aoCache.push(s._fnCloneTable("fixedHeader","FixedHeader_Header",s._fnCloneThead));FixedHeader.afnScroll.push(function(){s._fnUpdatePositions.call(s)});n(e).resize(function(){FixedHeader.fnCalculatePosition()});i.frameSizeChangedEvent&&n(e).bind(i.frameSizeChangedEvent,function(){FixedHeader.fnCalculatePosition()});n(i.nTable).on("column-reorder column-visibility",function(){FixedHeader.fnMeasure();s._fnUpdateClones(true);s._fnUpdatePositions()}).on("row-resize",function(){s._fnFindEqualiseTLeftRowsHeight()});FixedHeader.fnMeasure();s._fnUpdateClones();s._fnUpdatePositions();s._fnRemoveExcessIdentifiers();i.bInitComplete=true},fnInitSettings:function(e,t){if(t!==undefined){if(t.top!==undefined)e.oSides.top=t.top;if(t.bottom!==undefined)e.oSides.bottom=t.bottom;if(typeof t.left=="boolean")e.oSides.left=t.left?1:0;else if(t.left!==undefined)e.oSides.left=t.left;if(typeof t.right=="boolean")e.oSides.right=t.right?1:0;else if(t.right!==undefined)e.oSides.right=t.right;if(t.zTop!==undefined)e.oZIndexes.top=t.zTop;if(t.zBottom!==undefined)e.oZIndexes.bottom=t.zBottom;if(t.zLeft!==undefined)e.oZIndexes.left=t.zLeft;if(t.zRight!==undefined)e.oZIndexes.right=t.zRight;if(t.offsetTop!==undefined)e.oOffset.top=t.offsetTop;if(t.alwaysCloneTop!==undefined)e.oCloneOnDraw.top=t.alwaysCloneTop;if(t.alwaysCloneBottom!==undefined)e.oCloneOnDraw.bottom=t.alwaysCloneBottom;if(t.alwaysCloneLeft!==undefined)e.oCloneOnDraw.left=t.alwaysCloneLeft;if(t.alwaysCloneRight!==undefined)e.oCloneOnDraw.right=t.alwaysCloneRight;if(t.frameSizeChangedEvent!=undefined)e.frameSizeChangedEvent=t.frameSizeChangedEvent}},_fnCloneTable:function(e,n,r,i){var s=this.fnGetSettings(),o;o=s.nTable.cloneNode(false);o.removeAttribute("id");var u=t.createElement("div");u.style.position="absolute";u.style.top="0px";u.style.left="0px";u.className+=" FixedHeader_Cloned "+e+" "+n;if(e=="fixedHeader")u.style.zIndex=s.oZIndexes.top;if(e=="fixedLeft")u.style.zIndex=s.oZIndexes.left;if(e=="fixedTopLeft")u.style.zIndex=s.oZIndexes.topLeft;o.style.margin="0";u.appendChild(o);t.body.appendChild(u);return{nNode:o,nWrapper:u,sType:e,sPosition:"",sTop:"",sLeft:"",fnClone:r,iCells:i}},_fnMeasure:function(){var e=this.fnGetSettings(),t=e.oMes,r=n(e.nTable),i=r.offset(),s=this._fnSumScroll(e.nTable.parentNode,"scrollTop");this._fnSumScroll(e.nTable.parentNode,"scrollLeft");t.iTableWidth=r.outerWidth();t.iTableHeight=r.outerHeight();t.iTableLeft=i.left+e.nTable.parentNode.scrollLeft;t.iTableTop=i.top+s;t.iTableRight=t.iTableLeft+t.iTableWidth;t.iTableRight=FixedHeader.oDoc.iWidth-t.iTableLeft-t.iTableWidth;t.iTableBottom=FixedHeader.oDoc.iHeight-t.iTableTop-t.iTableHeight},_fnSumScroll:function(e,t){for(var n=e[t];e=e.parentNode;){if(e.nodeName=="HTML"||e.nodeName=="BODY")break;n=e[t]}return n},_fnUpdatePositions:function(){var e=this.fnGetSettings();this._fnMeasure();for(var t=0,n=e.aoCache.length;t<n;t++)if(e.aoCache[t].sType=="fixedHeader")this._fnScrollFixedHeader(e.aoCache[t]);else if(e.aoCache[t].sType=="fixedLeft")this._fnScrollHorizontalLeft(e.aoCache[t]);else e.aoCache[t].sType=="fixedTopLeft"&&this._fnScrollHorisontalOrVerticalTopLeft(e.aoCache[t])},_fnRemoveExcessIdentifiers:function(){var e=this.fnGetSettings();n("thead",e.nTable).find(":not(input[type=hidden])").removeAttr("id").removeAttr("name");n("td:nth-child(-n+"+e.oSides.left+")",e.nTable).find(":not(input[type=hidden])").andSelf().removeAttr("id").removeAttr("name");for(var t=0,r=e.aoCache.length;t<r;t++){var i=e.aoCache[t].nNode;n("input[type=hidden]",i).remove();switch(e.aoCache[t].sType){case"fixedHeader":n("th:nth-child(-n+"+e.oSides.left+")",i).children().andSelf().removeAttr("id").removeAttr("name");break;case"fixedLeft":n("thead",i).find("*").removeAttr("id").removeAttr("name")}}},_fnUpdateClones:function(e){var t=this.fnGetSettings();if(e)t.bInitComplete=false;for(var n=0,r=t.aoCache.length;n<r;n++)t.aoCache[n].fnClone.call(this,t.aoCache[n]);if(e)t.bInitComplete=true},_fnClearTableColumnWidths:function(){},_fnScrollHorizontalLeft:function(e){var t=this.fnGetSettings().oMes,r=FixedHeader.oWin,i=e.nWrapper,s=n(i).outerWidth();if(r.iScrollLeft<t.iTableLeft){this._fnUpdateCache(e,"sPosition","absolute","position",i.style);this._fnUpdateCache(e,"sTop",t.iTableTop+"px","top",i.style);this._fnUpdateCache(e,"sLeft",t.iTableLeft+"px","left",i.style)}else if(r.iScrollLeft<t.iTableLeft+t.iTableWidth-s){this._fnUpdateCache(e,"sPosition","fixed","position",i.style);this._fnUpdateCache(e,"sTop",t.iTableTop-r.iScrollTop+"px","top",i.style);this._fnUpdateCache(e,"sLeft","0px","left",i.style)}else{this._fnUpdateCache(e,"sPosition","absolute","position",i.style);this._fnUpdateCache(e,"sTop",t.iTableTop+"px","top",i.style);this._fnUpdateCache(e,"sLeft",t.iTableLeft+t.iTableWidth-s+"px","left",i.style)}},_fnScrollHorisontalOrVerticalTopLeft:function(e){var t=this.fnGetSettings(),r=t.oMes,i=FixedHeader.oWin,s=e.nWrapper,o=n(s).outerWidth();t.nTable.getElementsByTagName("tbody");if(i.iScrollLeft<r.iTableLeft&&r.iTableTop>i.iScrollTop+t.oOffset.top){this._fnUpdateCache(e,"sPosition","absolute","position",s.style);this._fnUpdateCache(e,"sTop",r.iTableTop+"px","top",s.style);this._fnUpdateCache(e,"sLeft",r.iTableLeft+"px","left",s.style)}else if(r.iTableTop>i.iScrollTop+t.oOffset.top)if(i.iScrollLeft<r.iTableLeft){this._fnUpdateCache(e,"sPosition","absolute","position",s.style);this._fnUpdateCache(e,"sTop",r.iTableTop+"px","top",s.style);this._fnUpdateCache(e,"sLeft",r.iTableLeft+"px","left",s.style)}else if(i.iScrollLeft<r.iTableLeft+r.iTableWidth-o){this._fnUpdateCache(e,"sPosition","fixed","position",s.style);this._fnUpdateCache(e,"sTop",r.iTableTop-i.iScrollTop+"px","top",s.style);this._fnUpdateCache(e,"sLeft","0px","left",s.style)}else{this._fnUpdateCache(e,"sPosition","absolute","position",s.style);this._fnUpdateCache(e,"sTop",r.iTableTop+"px","top",s.style);this._fnUpdateCache(e,"sLeft",r.iTableLeft+r.iTableWidth-o+"px","left",s.style)}else{this._fnUpdateCache(e,"sPosition","fixed","position",s.style);this._fnUpdateCache(e,"sTop",t.oOffset.top+"px","top",s.style);i.iScrollLeft<r.iTableLeft?this._fnUpdateCache(e,"sLeft",r.iTableLeft-i.iScrollLeft+"px","left",s.style):this._fnUpdateCache(e,"sLeft","0px","left",s.style)}},_fnScrollFixedHeader:function(e){for(var t=this.fnGetSettings(),n=t.oMes,r=FixedHeader.oWin,i=e.nWrapper,s=0,o=t.nTable.getElementsByTagName("tbody"),u=0;u<o.length;++u)s+=o[u].offsetHeight;if(n.iTableTop>r.iScrollTop+t.oOffset.top){this._fnUpdateCache(e,"sPosition","absolute","position",i.style);this._fnUpdateCache(e,"sTop",n.iTableTop+"px","top",i.style);this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",i.style)}else if(r.iScrollTop+t.oOffset.top>n.iTableTop+s){this._fnUpdateCache(e,"sPosition","absolute","position",i.style);this._fnUpdateCache(e,"sTop",n.iTableTop+s+"px","top",i.style);this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",i.style)}else{this._fnUpdateCache(e,"sPosition","fixed","position",i.style);this._fnUpdateCache(e,"sTop",t.oOffset.top+"px","top",i.style);this._fnUpdateCache(e,"sLeft",n.iTableLeft-r.iScrollLeft+"px","left",i.style)}},_fnUpdateCache:function(e,t,n,r,i){if(e[t]!=n){i[r]=n;e[t]=n}},_fnClassUpdate:function(e,t){var r=this;if(e.nodeName.toUpperCase()==="TR"||e.nodeName.toUpperCase()==="TH"||e.nodeName.toUpperCase()==="TD"||e.nodeName.toUpperCase()==="SPAN")t.className=e.className;n(e).children().each(function(i){r._fnClassUpdate(n(e).children()[i],n(t).children()[i])})},_fnCloneThead:function(e){var t=this.fnGetSettings(),r=e.nNode;if(t.bInitComplete&&!t.oCloneOnDraw.top)this._fnClassUpdate(n("thead",t.nTable)[0],n("thead",r)[0]);else{var i=n(t.nTable).outerWidth();e.nWrapper.style.width=i+"px";for(r.style.width=i+"px";r.childNodes.length>0;){n("thead th",r).unbind("click");r.removeChild(r.childNodes[0])}e=n("thead",t.nTable).clone(true,true)[0];r.appendChild(e);var s=[],o=[];n("thead>tr th",t.nTable).each(function(){s.push(n(this).width())});n("thead>tr td",t.nTable).each(function(){o.push(n(this).width())});n("thead>tr th",t.nTable).each(function(e){n("thead>tr th:eq("+e+")",r).width(s[e]);n(this).width(s[e])});n("thead>tr td",t.nTable).each(function(e){n("thead>tr td:eq("+e+")",r).width(o[e]);n(this).width(o[e])})}},_fnCloneTLeft:function(e){for(var t=this.fnGetSettings(),r=e.nNode,i=n("tbody",t.nTable)[0];r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(n("thead",t.nTable).clone(true)[0]);r.appendChild(n("tbody",t.nTable).clone(true)[0]);var s="gt("+(e.iCells-1)+")";n("thead tr",r).each(function(){n("th:"+s,this).remove()});n("tbody tr",r).each(function(){n("td:"+s,this).remove()});this._fnEqualiseRowsHeight(t,e,i,r);for(var o=i=0;o<e.iCells;o++)i+=n("thead tr th:eq("+o+")",t.nTable).outerWidth();r.style.width=i+"px";e.nWrapper.style.width=i+"px"},_fnEqualiseRowsHeight:function(e,t,r,i){n("tr",i).removeClass("ccl-table-highlight");n("tr",e.nTable).height("auto");this._fnEqualiseHeights("thead",r.parentNode,i);this._fnEqualiseHeights("tbody",r.parentNode,i)},_fnFindEqualiseTLeftRowsHeight:function(){var e=this.fnGetSettings();this._fnMeasure();for(var t=0,r=e.aoCache.length;t<r;t++)if(e.aoCache[t].sType=="fixedLeft"){var i=e.aoCache[t],s=n("tbody",e.nTable)[0];this._fnEqualiseRowsHeight(e,i,s,i.nNode)}},_fnCloneTTopLeft:function(e){var t=this.fnGetSettings(),r=e.nNode;for(n("tbody",t.nTable);r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(n("thead",t.nTable).clone(true)[0]);var i="gt("+(e.iCells-1)+")";n("thead tr",r).each(function(){n("th:"+i,this).remove()});for(var s=0,o=0;o<e.iCells;o++)s+=n("thead tr th:eq("+o+")",t.nTable).outerWidth();r.style.width=s+"px";e.nWrapper.style.width=s+"px"},_fnEqualiseHeights:function(e,t,r){var i=n(e+" tr",t),s;n(e+" tr",r).each(function(e){s=i.eq(e).css("height");if(navigator.appName=="Microsoft Internet Explorer")s=parseInt(s,10)+1;n(this).css("height",s);i.eq(e).css("height",s)})}};FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0};FixedHeader.oDoc={iHeight:0,iWidth:0};FixedHeader.afnScroll=[];FixedHeader.fnMeasure=function(){var r=n(e),i=n(t),s=FixedHeader.oWin,o=FixedHeader.oDoc;o.iHeight=i.height();o.iWidth=i.width();s.iHeight=r.height();s.iWidth=r.width();s.iScrollTop=r.scrollTop();s.iScrollLeft=r.scrollLeft();s.iScrollRight=o.iWidth-s.iScrollLeft-s.iWidth;s.iScrollBottom=o.iHeight-s.iScrollTop-s.iHeight};FixedHeader.VERSION="2.1.0-dev";FixedHeader.prototype.VERSION=FixedHeader.VERSION;FixedHeader.fnCalculatePosition=function(){FixedHeader.fnMeasure();for(var e=0,t=FixedHeader.afnScroll.length;e<t;e++)FixedHeader.afnScroll[e]()};n(e).scroll(function(){FixedHeader.fnCalculatePosition()})})(window,document,jQuery);(function(e,t){e(document).on("click","div[data-hybrid-editor-settings]>div.ccl-hybrideditoritem-text-container, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(t){var n=e(t.currentTarget).parent("div.ccl-hybrideditoritem");n.hybridEditorItem();n.hybridEditorItem("edit",t.currentTarget,t.target)});e(document).on("keydown","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(e){if(e.which===CommonConstants.keyCodes.enter){e.preventDefault();setTimeout(function(){e.target.click()},400)}});e(document).on("mouseenter mouseleave focus","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(t){e(t.currentTarget).siblings("div.ccl-hybrideditoritem-text-container:first").toggleClass("ccl-hybrideditoritem-text-container-hovered",t.type=="mouseenter"||t.type=="focusin")});e.widget("ccl.hybridEditor",{options:{editorClientId:t,editorSetContentFuncName:t,editorGetContentFuncName:t,dialogClientId:t,saveButtonClientId:t,modalDialogCloseHref:t,textUpdateCompleted:e.noop,ckePopupFixClass:t,isIos:false},_create:function(){e("#"+this.options.saveButtonClientId).on("click",e.proxy(this._handleSaveClick,this));if(this.options.isIos){var t=this,n=e("html");e(document).on("cssmodal:show",function(e,r,i){i==t.options.dialogClientId&&n.addClass(t.options.ckePopupFixClass)}).on("cssmodal:hide",function(e,r,i){i==t.options.dialogClientId&&n.removeClass(t.options.ckePopupFixClass)})}},_handleSaveClick:function(e){var t="";if(this.options.editorClientId&&this.options.editorGetContentFuncName)t=this.options.editorGetContentFuncName(this.options.editorClientId);this._trigger("textUpdateCompleted",e,t);this._closeDialog();return false},_closeDialog:function(){window.location.href=this.options.modalDialogCloseHref},openEditor:function(e,t){this.updateEditorText(e);t&&t!=""&&window[this.options.dialogClientId].setTitle(t);window.location.href="#"+this.options.dialogClientId},updateEditorText:function(e){if(this.options.editorClientId&&this.options.editorSetContentFuncName){this.options.editorSetContentFuncName(e,this.options.editorClientId);window[this.options.dialogClientId].adjustWindowSize()}}})})(jQuery);(function(e,t){e.widget("ccl.hybridEditorItem",{options:{groupSettingsFunctionName:t,groupSettingsFunctionParam:t,textContainerId:t,editLinkId:t,hybridEditorClientId:t,editModeEnabled:"hybrid",webMethodParams:t,saveContentWebUrl:t,inlineEditorOptions:t,editorDialogTitle:"",editToolTipText:t,textContainerWatermark:t,textContainerWatermarkCssClass:t,watermarkDataAttributeName:t},widgetState:{idle:0,inlineEditorOpened:1,savingPlainText:2,savingRichContent:3},_editor:t,_inlineEditor:t,_textContainer:t,_editLink:t,_isAjaxEnabled:false,_isWatermarkUsed:false,_groupSettingsAreUsed:false,_currentState:t,_create:function(){this._initializeSettings();this.options.webMethodParams=!this._groupSettingsAreUsed?JSON.parse(this.options.webMethodParams):this.options.webMethodParams;this._isAjaxEnabled=!!this.options.saveContentWebUrl;this._textContainer=e("#"+this.options.textContainerId);this._textValueHidden=e("#"+this.options.textValueHiddenId);this._editLink=e("#"+this.options.editLinkId);this._isWatermarkUsed=this.options.textContainerWatermark!=t&&this.options.textContainerWatermark!="";if((this.options.editModeEnabled==="hybrid"||this.options.editModeEnabled==="inline")&&this.options.inlineEditorOptions){var n=!this._groupSettingsAreUsed?JSON.parse(this.options.inlineEditorOptions):this.options.inlineEditorOptions;this._inlineEditor=new ClientInlineEditor(this._textContainer,null,this._textValueHidden,n,e.proxy(this._savePlainText,this),e.proxy(this._inlineEditorModeChanged,this),null)}if(this.options.hybridEditorClientId)this._editor=e("#"+this.options.hybridEditorClientId);if(!this._editor||this._editor.length==0)this.options.editModeEnabled="inline";this._currentState=this.widgetState.idle},edit:function(t,n){if(t===this._textContainer.get(0)){if(n&&e(n).closest("a,input,button,textarea").length>0)return;this._handleTextContainerClick()}t===this._editLink.get(0)&&this._handleIconClick()},updateTextContainer:function(e,t){this._updateText(e,t)},_initializeSettings:function(){var t=this.element.data("hybrid-editor-settings");if(e.isFunction(window[t.groupSettingsFunctionName])){var n;n=t.groupSettingsFunctionParam?window[t.groupSettingsFunctionName](t.groupSettingsFunctionParam):window[t.groupSettingsFunctionName]();e.extend(this.options,n);this.options.textContainerId=t.textContainerId;this.options.textValueHiddenId=t.textValueHiddenId;this.options.editLinkId=t.editLinkId;this.options.hybridEditorClientId=t.hybridEditorClientId;this.options.watermarkDataAttributeName=t.watermarkDataAttributeName;e.extend(this.options.inlineEditorOptions,{supressOriginalBehaviour:true,editFieldAutoWidth:false});this._groupSettingsAreUsed=true}else e.extend(this.options,t)},_handleTextContainerClick:function(){if(this._editor)switch(this.options.editModeEnabled){case"dialog":this._openHybridEditor();break;case"hybrid":var e=this._textContainer.html();e===""||this._isWatermarkApplied()||CommonFunctions.isPlainText(e)?this._openInlineEditor():this._openHybridEditor();break;default:this._openInlineEditor()}else this._openInlineEditor()},_handleIconClick:function(){this._editor&&(this.options.editModeEnabled==="hybrid"||this.options.editModeEnabled==="dialog")?this._openHybridEditor():this._openInlineEditor()},_openInlineEditor:function(){if(!(!this._inlineEditor||this._currentState!=this.widgetState.idle)){this._removeWatermark();this._inlineEditor.switchToEditMode();this._currentState=this.widgetState.inlineEditorOpened}},_openHybridEditor:function(){if(!(!this._editor||this._currentState==this.widgetState.savingRichContent)){var t=this._currentState==this.widgetState.inlineEditorOpened||this._currentState==this.widgetState.savingPlainText,n=e.proxy(this._saveRichContent,this);this._editor.off("hybrideditortextupdatecompleted").one("hybrideditortextupdatecompleted",n);n=this._textValueHidden.val();if(CommonFunctions.isPlainText(n))n=this._textContainer.html();if(t)n=CommonFunctions.replaceLineBreaksWithBrTags(this._inlineEditor.getEditFieldText());this._editor.hybridEditor("openEditor",this._isWatermarkApplied()&&!t?"":n,this.options.editorDialogTitle)}},_savePlainText:function(t,n){var r=e.trim(t.actualText);if(this._isAjaxEnabled){if(this.options.saveContentWebUrl&&this.options.webMethodParams){var i=this;r={data:encodeURIComponent(this._processPlainText(r))};r=e.extend(this.options.webMethodParams,r);this._currentState=this.widgetState.savingPlainText;e.ajax({type:"POST",url:this.options.saveContentWebUrl,data:r,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(e){if(e)if(e.IsSuccessfull){t.actualText=e.Value;i._textUpdated(e.SafeHtml,e.Value)}else{t.isUpdateSuccess=false;t.stopOnEdit=true;i._handleError(e.ErrorText)}},error:function(e,n,r){t.isUpdateSuccess=false;t.stopOnEdit=true;i._handleAjaxError(e,n,r)},complete:function(){n(t)}})}}else{this._textUpdated(this._processPlainText(r),r);n(t)}},_saveRichContent:function(t,n){if(e.isPlainObject(n))n="";if(this._isAjaxEnabled){if(this.options.saveContentWebUrl&&this.options.webMethodParams){var r=this,i={data:encodeURIComponent(n)};i=e.extend(this.options.webMethodParams,i);this._currentState=this.widgetState.savingRichContent;e.ajax({type:"POST",url:this.options.saveContentWebUrl,data:i,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(e){if(e)if(e.IsSuccessfull){r._textUpdated(e.SafeHtml,e.Value);CommonFunctions.isPlainText(e.SafeHtml)&&r._inlineEditor.setNewText(e.Value)}else r._handleError(e.ErrorText);r._addWatermark();r._currentState=r.widgetState.idle},error:function(e,t,n){r._handleAjaxError(e,t,n)}})}}else{this._textUpdated(n,n);this._addWatermark()}},_addWatermark:function(){if(!(!this._isWatermarkUsed||this._isWatermarkApplied())){var t=this._textContainer.html();if(!t||t==""){t=e("<span "+this.options.watermarkDataAttributeName+"='true'/>").text(this.options.textContainerWatermark);this.options.textContainerWatermarkCssClass&&t.addClass(this.options.textContainerWatermarkCssClass);this._textContainer.prepend(t)}}},_removeWatermark:function(){if(this._isWatermarkUsed){var e=this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]");e.length>0&&e.remove()}},_isWatermarkApplied:function(){return this._isWatermarkUsed&&this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]").length>0},_inlineEditorModeChanged:function(e){if(!e.isEditMode){this._addWatermark();this._currentState=this.widgetState.idle}this._trigger("inlinemodechanged",null,e)},_textUpdated:function(e,t){this._updateText(e,t);this._trigger("textupdated",null,{html:e,value:t})},_updateText:function(e,t){this._textValueHidden.val(t);this._textContainer.html(e)},_processPlainText:function(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;")},_handleAjaxError:function(e){this._trigger("ajaxerror",null,{xhrObject:e})},_handleError:function(e){this._trigger("saveerror",null,{errorText:e})}})})(jQuery);(function(e){var t=$(e.document);e.IframeClickEventHelper={registerDocumentClickBubblingOnTop:function(){t.on("click touchstart",function(){var t;if((t=e.top)!=e)CommonFunctions.makePostMessageCall(t,{messageName:"iframeClickBubble"})})},handleDocumentClickBubblingOnTop:function(){CommonFunctions.attachPostMessageEventListener($(e),"iframeClickBubble",function(){t.trigger(CommonTriggers.clickInInnerFrame)})}}})(window);(function(e){e.IframeResizer={reportSetIframeDefaultHeight:function(){var t;if((t=e.parent)&&e!=t)CommonFunctions.makePostMessageCall(t,{messageName:"setIframeDefaultHeight"})},registerDefaultHeight:function(t,n){var r=$(e),i=$("#"+t.iframeClientId),s,o,u=IframeResizer.calculateBottomOffset(i);o=e[t.setIframeDefaultHeightFunctionName]=function(){var e=IframeResizer.getIframeDefaultHeight(r,i,u)-8;i.height(e);n&&n(e+8)};o();r.resize(function(){s&&clearTimeout(s);s=setTimeout(o,200)});CommonFunctions.attachPostMessageEventListener(r,"setIframeDefaultHeight",function(){o()})},getIframeDefaultHeight:function(e,t,n){return e.innerHeight()-t.offset().top-n},calculateBottomOffset:function(e){function t(e,t){var n=parseInt(e.css(t));return isNaN(n)?0:n}var n=0;e.parentsUntil("html").each(function(e,r){var i=$(r);n+=t(i,"padding-bottom")+t(i,"margin-bottom")+t(i,"border-bottom-width")});return n},registerExtensionIframeListener:function(t){var n=$("#"+t.iframeClientId);CommonFunctions.attachPostMessageEventListener($(e),[CommonWindowMessages.expandExtensionIframe.messageName,CommonWindowMessages.collapseExtensionIframe.messageName],function(e){var t=(e=e.messageName===CommonWindowMessages.expandExtensionIframe.messageName)?"0":"";n.css({position:e?"absolute":"",top:t,right:t,bottom:t,left:t});IframeResizer.reportSetIframeDefaultHeight()})}}})(window);(function(e){e.InlineReplyManager={sendButtonClick:function(e,t){var n=$(e),r=n.parent().prev(),i=r.val();if(i){n.prop("disabled",true);t({target:n,messageBody:CommonFunctions.replaceLineBreaksWithBrTags(CommonFunctions.htmlEncode(i)),sendMessageCompleteCallback:function(){n.prop("disabled",false)},sendMessageSuccessCallback:function(){r.val("")}})}}}})(window);(function(e){typeof define==="function"&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){if(!(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)){var t=/^https?:\/\//i,n=/^get|post$/i,r=RegExp("^"+location.protocol,"i");e.ajaxTransport("* text html xml json",function(i,s){if(!(!i.crossDomain||!i.async||!n.test(i.type)||!t.test(i.url)||!r.test(i.url))){var o=null;return{send:function(t,n){var r="",u=(s.dataType||"").toLowerCase();o=new XDomainRequest;if(/^\d+$/.test(s.timeout))o.timeout=s.timeout;o.ontimeout=function(){n(500,"timeout")};o.onload=function(){var t="Content-Length: "+o.responseText.length+"\r\nContent-Type: "+o.contentType,r={code:200,message:"success"},i={text:o.responseText};try{if(u==="html"||/text\/html/i.test(o.contentType))i.html=o.responseText;else if(u==="json"||u!=="text"&&/\/json/i.test(o.contentType))try{i.json=e.parseJSON(o.responseText)}catch(s){r.code=500;r.message="parseerror"}else if(u==="xml"||u!=="text"&&/\/xml/i.test(o.contentType)){var f=new ActiveXObject("Microsoft.XMLDOM");f.async=false;try{f.loadXML(o.responseText)}catch(c){f=undefined}if(!f||!f.documentElement||f.getElementsByTagName("parsererror").length){r.code=500;r.message="parseerror";throw"Invalid XML: "+o.responseText}i.xml=f}}catch(h){throw h}finally{n(r.code,r.message,i,t)}};o.onprogress=function(){};o.onerror=function(){n(500,"error",{text:o.responseText})};if(s.data)r=e.type(s.data)==="string"?s.data:e.param(s.data);o.open(i.type,i.url);o.send(r)},abort:function(){o&&o.abort()}}}})}});(function(e,t){function n(e){return e.find("object, embed")}function r(e){return e.find("video")}var i=e.PlayerManager={commonSettings:t,addPlayer:function(e,t){return e.jPlayer({ready:function(){var s={};s[t.format]=t.url;$(this).jPlayer("setMedia",s);if(t.isVideo){e.css({"line-height":0});s=r(e);var o=n(e);o.add(s).removeAttr("style");if(t.width&&!t.cssClassSize)$("#"+t.playerContainerId).css(t.autoResizable?"maxWidth":"width",t.width);if(o.length>0){s=t.width?t.width:e.width();e.css({"padding-top":(t.height?t.height:Math.round(s/16*9))/s*100+"%",position:"relative"})}else if(i.commonSettings.isIpad){s=$("<canvas>");s.css({height:"auto"});e.prepend(s);e.css({position:"relative","padding-top":"6.2%"})}else s.css({position:"inherit"})}},swfPath:i.commonSettings.swfPath,cssSelectorAncestor:"#"+t.playerContainerId,supplied:t.format,size:t.isVideo?{width:"100%",height:n(e).length>0?"100%":"auto",cssClass:t.cssClassSize?t.cssClassSize:i.commonSettings.defaultCssClassSize}:{},sizeFull:t.isVideo?{width:"100%",height:"auto"}:{},noFullWindow:{msie:/msie/,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/}}).on($.jPlayer.event.play,function(){t.isVideo&&n(e).add(r(e)).removeAttr("style");i.commonSettings.isIpad||r(e).css({position:"inherit"});$(this).jPlayer("pauseOthers")}).on($.jPlayer.event.resize,function(s){if(t.isVideo){n(e).add(r(e)).removeAttr("style");e.css({position:s.jPlayer.options.fullScreen||s.jPlayer.options.fullWindow?"":"relative"});i.commonSettings.isIpad||r(e).css({position:"inherit"})}})}}})(window);$.widget("itslccl.searchTextBox",$.itslccl.extendedTextBox,{options:{searchInput:undefined,container:undefined,searchLink:undefined,fakeInput:undefined,searchKeyStorage:undefined,textSearchEvent:undefined,usePostBack:false,clearByEsc:false,postBackReference:undefined},_create:function(){this._super();var e=this,t=this.options.searchInput,n=this.options.searchLink,r=this.options.fakeInput;t.keydown(function(t){if(t.which===CommonConstants.keyCodes.enter&&!t.shiftKey){e._doSearch();return false}return true});t.keyup(function(t){e.options.clearByEsc&&t.which===CommonConstants.keyCodes.escape&&e._clearSearchBox();return true});n&&n.click(function(t){t.preventDefault();e._doSearch()});r&&r.focus(function(){t.focus()})},_clearSearchBox:function(){this.options.searchInput.val("");this.options.searchInput.focus()},_doSearch:function(){this.options.searchInput.focus();var j=this._isWatermarkMode?"":$.trim(this.options.searchInput.val());if(this.options.usePostBack){this._saveSearchTextToHiddenField();eval(this.options.postBackReference)}else this.options.container.trigger(this.options.textSearchEvent,j)},_saveSearchTextToHiddenField:function(e){!this.options.usePostBack&&e?this.options.searchKeyStorage.val($.trim(e)):this.options.searchKeyStorage.val($.trim(this.options.searchInput.val()))}});SearchTextBox.instances=[];SearchTextBox.initialize=function(){for(var e=0,t=this.instances.length;e<t;e+=1)this.instances[e].initialize()};(function(e,t){var n=e.TextBoxAutoCompleteManager={commonSettings:t,makeTextBoxAutocomplete:function(r,i,s,o){function u(){if(v.autocomplete("widget").is(":visible"))v.autocomplete("close");else{$(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close");v.autocomplete("option","minLength",0);v.autocomplete("search","")}v.focus()}function a(){var e=v.get(0);r.isIos?e.setSelectionRange(0,e.value.length):e.select()}function l(e,t){var n=false;$.each(e,function(e,i){var s=r.caseSensitiveSearch?t:t.toLowerCase();if((r.caseSensitiveSearch?i.value:i.value.toLowerCase())===s){n=true;return false}});return n}function c(){if(!r.allowCustomText)if(l(r.values,v.val()))r.defaultValue=v.val();else{r.defaultValue?v.val(r.defaultValue):v.val("");p(false)}i&&i();r.isAutoPostBack&&v.closest("form").submit()}function p(e){r.useHighlight&&m.toggleClass(n.commonSettings.cssClasses.highlight,e)}var d=true,v=$("#"+r.textboxId),m=v.parent(),g=e[r.textboxId]=v;if(r.isDropDown)r.minLength=0;v.autocomplete({autoFocus:true,source:function(e,i){i($.map(r.values,function(i){var s=r.caseSensitiveSearch?e.term:e.term.toLowerCase(),o=r.caseSensitiveSearch?i.value:i.value.toLowerCase();switch(r.filterType){case n.commonSettings.filterType.startsWith:return o.indexOf(s)==0?i:t;default:return o.indexOf(s)>=0?i:t}}))},delay:r.delay,minLength:r.minLength,change:function(){r.defaultValue!==v.val()&&c()},close:function(){s&&s();d=true},select:function(e,t){g.selectValue(t.item)},open:function(){r.zIndex&&v.autocomplete("widget").css("z-index",r.zIndex);d=false},messages:{noResults:r.terms.noResults,results:function(e){return e==1?r.terms.oneResult:r.terms.resultsTemplate.replace("{0}",e.toString())}}});v.keyup(function(){p(!!v.val()&&!l(r.values,v.val()))}).keydown(function(e){if(e.which===CommonConstants.keyCodes.enter){d||e.preventDefault();if(r.defaultValue!==v.val()){e.preventDefault();c()}v.autocomplete("close")}}).click(a).on("autocompletesearchcomplete",function(){});g.selectValue=function(e){p(false);v.val(e.value);$(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close");o&&o(e)};if(r.isDropDown){$("#"+r.buttonId).click(u).click(a);v.click(u)}}}})(window);(function(e){var t={},n=false,r=e.TextEditorManager={commonSettings:undefined,addStartupFunction:function(e,n){t[e]=n},textEditorSetup:function(){function e(e,t,n){if(e=e.getButton(t)){n=$("#"+e.domId).removeClass().addClass(n).removeAttr("title");e=n.find("span").removeClass();n.append(document.createTextNode(e.text()));e.text("")}}if(!n){n=true;CKEDITOR.on("dialogDefinition",function(t){t=t.data.definition;var n=t.onLoad;t.onLoad=function(){e(this,"ok",r.commonSettings.cssClasses.ok);e(this,"cancel",r.commonSettings.cssClasses.cancel);if(n)return n.apply(this,arguments)}});CKEDITOR.on("instanceReady",function(e){(e=t[e.editor.name])&&e()})}}}})(window);var focusListener=function(e){if(IsEditorEmpty(e.editor.name,e.editor.config.mask)){e.editor.document.getBody().setHtml("");e.editor.mayBeDirty=true;resetEditorIsDirty(e.editor.name)}},blurListener=function(e){if(IsEditorEmpty(e.editor.name))if(e.editor.config.mask&&e.editor.config.mask.length>0){e.editor.document.getBody().setHtml(e.editor.config.mask);resetEditorIsDirty(e.editor.name)}};(function(e){e.fn.autogrow=function(){this.filter("textarea").each(function(){var t=e(this),n=t.height();t.css("lineHeight");var r=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:e(this).width()-parseInt(t.css("paddingLeft"))-parseInt(t.css("paddingRight")),fontSize:t.css("fontSize"),fontFamily:t.css("fontFamily"),lineHeight:t.css("lineHeight"),resize:"none"}).appendTo(document.body);t=function(){var t=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){for(var t="",n=0;n<e.length-1;n++)t+="&nbsp;";return t+" "});r.html(t);e(this).css("height",Math.max(r.height()+20,n))};e(this).change(t).keyup(t).keydown(t);t.apply(this)});return this}})(jQuery);jQuery.cookie=function(e,t,n){if(arguments.length>1&&String(t)!=="[object Object]"){n=jQuery.extend({},n);if(t===null||t===undefined)n.expires=-1;if(typeof n.expires==="number"){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}t=String(t);return document.cookie=[encodeURIComponent(e),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};i=n.raw?function(e){return e}:decodeURIComponent;return(r=RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?i(r[1]):null};(function(e){function t(t){if(typeof t.data==="string"){var n=t.handler,r=t.data.toLowerCase().split(" ");t.handler=function(t){if(!(this!==t.target&&(/textarea|select/i.test(t.target.nodeName)||t.target.type==="text"||t.target.type==="password"))){var i=t.type!=="keypress"&&e.hotkeys.specialKeys[t.which],s=String.fromCharCode(t.which).toLowerCase(),o="",u={};if(t.altKey&&i!=="alt")o+="alt+";if(t.ctrlKey&&i!=="ctrl")o+="ctrl+";if(t.metaKey&&!t.ctrlKey&&i!=="meta")o+="meta+";if(t.shiftKey&&i!=="shift")o+="shift+";if(i)u[o+i]=true;else{u[o+s]=true;u[o+e.hotkeys.shiftNums[s]]=true;if(o==="shift+")u[e.hotkeys.shiftNums[s]]=true}i=0;for(s=r.length;i<s;i++)if(u[r[i]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})})(jQuery);(function(e,t){function n(t){e.extend(true,ut,t)}function r(n,r,f){function l(){n.addClass("fc");r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr");r.theme&&n.addClass("ui-widget");q=e("<div class='fc-content' style='position:relative'/>").prependTo(n);F=new i(D,r);(I=F.render())&&n.prepend(I);d(r.defaultView);if(r.handleWindowResize){e(window).resize(x);K=e(document).width();setTimeout(function(){if(K!=e(document).width()){K=e(document).width();x()}},200)}e("body").is(":visible")||c()}function c(){setTimeout(function(){!R.start&&e("body").is(":visible")&&m()},0)}function p(){return n.is(":visible")}function d(t){if(!R||t!=R.name){X++;if(R){_("viewDestroy",R,R,R.element);k();R.triggerEventDestroy();L();R.element.remove();F.deactivateButton(R.name)}F.activateButton(t);R=new lt[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(q),D);m();M();X--;_("viewChange",D,t)}}function m(e){if(!R.start||e||V<R.start||V>=R.end)p()&&g(e)}function g(e){X++;if(R.start){_("viewDestroy",R,R,R.element);k();C()}L();R.render(V,e||0);S();M();(R.afterRender||O)();F.updateTitle(R.title);e=new Date;(e=e>=R.start&&e<R.end)?F.disableButton("today"):F.enableButton("today");_("updateTodayButton",j,!e);_("viewRender",R,R,R.element);R.trigger("viewDisplay",j);X--;!r.lazyFetching||P(R.visStart,R.visEnd)?H(R.visStart,R.visEnd):N()}function y(){if(p()){k();C();b();S();N()}}function b(){z=r.contentHeight?r.contentHeight:r.height?r.height-(I?I.height():0)-A(q):Math.round(q.width()/Math.max(r.aspectRatio,.5))}function S(){z===t&&b();X++;R.setHeight(z);R.setWidth(q.width());X--;U=n.outerWidth()}function x(){if(!X)if(R.start){var e=++W;setTimeout(function(){if(e==W&&!X&&p())if(U!=(U=n.outerWidth())){X++;y();R.trigger("windowResize",j);X--}},200)}else c()}function T(e){C();N(e)}function N(t){if(p()){var n=e(document).height()>e(window).height();R.setEventData($);R.renderEvents($,t);Z()&&e("div.fc-event").trigger("mouseover");R.trigger("eventAfterAllRender");e(document).height()>e(window).height()!=n&&y()}}function C(){R.triggerEventDestroy();R.clearEvents();R.clearEventData()}function k(){R&&R.unselect()}function L(){q.css({width:"100%",height:q.height(),overflow:"hidden"})}function M(){q.css({width:"",height:"",overflow:""})}function _(e,t){if(r[e])return r[e].apply(t||j,Array.prototype.slice.call(arguments,2))}var D=this;D.options=r;D.render=function(e){if(q){if(p()){b();g(e)}}else l()};D.destroy=function(){if(R){_("viewDestroy",R,R,R.element);R.triggerEventDestroy()}e(window).unbind("resize",x);F.destroy();q.remove();n.removeClass("fc fc-rtl ui-widget")};D.refetchEvents=function(){C();H(R.visStart,R.visEnd)};D.reportEvents=function(e){$=e;N()};D.reportEventChange=function(e){T(e)};D.rerenderEvents=T;D.changeView=d;D.select=function(e,n,r){R.select(e,n,r===t?true:r)};D.unselect=k;D.prev=function(){m(-1)};D.next=function(){m(1)};D.prevYear=function(){o(V,-1);m()};D.nextYear=function(){o(V,1);m()};D.today=function(){V=new Date;m()};D.gotoDate=function(e,t,n){if(e instanceof Date)V=h(e);else v(V,e,t,n);m()};D.incrementDate=function(e,n,r){e!==t&&o(V,e);n!==t&&u(V,n);r!==t&&a(V,r);m()};D.formatDate=function(e,t){return w(e,t,r)};D.formatDates=function(e,t,n){return E(e,t,n,r)};D.getDate=function(){return h(V)};D.getView=function(){return R};D.option=function(e,n){if(n===t)return r[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio"){r[e]=n;y()}};D.trigger=_;D.calcSize=b;D.setSize=S;D.refetchSource=function(e){B(R.visStart,R.visEnd,e)};s.call(D,r,f);var P=D.isFetchNeeded,H=D.fetchEvents,B=D.refetchEventSource,j=n[0],F,I,q,R,U,z,W=0,X=0,V=new Date,$=[],J,K;v(V,r.year,r.month,r.date);r.droppable&&e(document).bind("dragstart",function(t,n){var i=t.target,s=e(i);if(!s.parents(".fc").length){var o=r.dropAccept;if(e.isFunction(o)?o.call(i,s):s.is(o)){J=i;R.dragStart(J,t,n)}}}).bind("dragstop",function(e,t){if(J){R.dragStop(J,e,t);J=null}})}function i(t,n){function r(r){var i=e("<td class='fc-header-"+r+"'/>");(r=n.header[r])&&e.each(r.split(" "),function(r){r>0&&i.append("<span class='fc-header-space'/>");var o;e.each(this.split(","),function(r,u){if(u=="title"){i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");o&&o.addClass(s+"-corner-right");o=null}else{var a;if(t[u])a=t[u];else if(lt[u])a=function(){c.removeClass(s+"-state-hover");t.changeView(u)};if(a){var f=n.theme?D(n.buttonIcons,u):null,l=D(n.buttonText,u),c=e("<span class='fc-button fc-button-"+u+" "+s+"-state-default'>"+(f?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+f+"'/></span>":l)+"</span>").click(function(){c.hasClass(s+"-state-disabled")||a()}).mousedown(function(){c.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-down")}).mouseup(function(){c.removeClass(s+"-state-down")}).hover(function(){c.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-hover")},function(){c.removeClass(s+"-state-hover").removeClass(s+"-state-down")}).appendTo(i);H(c);o||c.addClass(s+"-corner-left");o=c}}});o&&o.addClass(s+"-corner-right")});return i}this.render=function(){s=n.theme?"ui":"fc";if(n.header)return i=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(r("left")).append(r("center")).append(r("right")))};this.destroy=function(){i.remove()};this.updateTitle=function(t){e("#current-date-title").html(t)};this.activateButton=function(e){i.find("span.fc-button-"+e).addClass(s+"-state-active")};this.deactivateButton=function(e){i.find("span.fc-button-"+e).removeClass(s+"-state-active")};this.disableButton=function(e){i.find("span.fc-button-"+e).addClass(s+"-state-disabled")};this.enableButton=function(e){i.find("span.fc-button-"+e).removeClass(s+"-state-disabled")};var i=e([]),s}function s(n,r){function i(t,r){s(t,function(i){if(r==x){if(i){if(n.eventDataTransform)i=e.map(i,n.eventDataTransform);if(t.eventDataTransform)i=e.map(i,t.eventDataTransform);for(var s=0;s<i.length;s++){i[s].source=t;f(i[s])}C=C.concat(i)}T--;T||y(C)}})}function s(t,r){var i,o=ft.sourceFetchers,f;for(i=0;i<o.length;i++){f=o[i](t,E,S,r);if(f===true)return;else if(typeof f=="object"){s(f,r);return}}if(i=t.events)if(e.isFunction(i)){u();i(h(E),h(S),function(e){r(e);a()})}else e.isArray(i)?r(i):r();else if(t.url){var l=t.success,c=t.error,p=t.complete;i=e.isFunction(t.data)?t.data():t.data;i=e.extend({},i||{});o=I(t.startParam,n.startParam);f=I(t.endParam,n.endParam);if(o)i[o]=g(E);if(f)i[f]=g(S);u();e.ajax(e.extend({},ct,t,{data:i,success:function(t){t=t||[];var n=F(l,this,arguments);if(e.isArray(n))t=n;r(t)},error:function(){F(c,this,arguments);r()},complete:function(){F(p,this,arguments);a()}}))}else r()}function o(t){if(e.isFunction(t)||e.isArray(t))t={events:t};else if(typeof t=="string")t={url:t};if(typeof t=="object"){l(t);w.push(t);return t}}function u(){N++||d("loading",null,true,v())}function a(){--N||d("loading",null,false,v())}function f(e){var r=e.source||{},i=I(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+ht++:e.id+"");if(e.date){if(!e.start)e.start=e.date;delete e.date}e._start=h(e.start=m(e.start,i));e.end=m(e.end,i);if(e.end&&e.end<=e.start)e.end=null;e._end=e.end?h(e.end):null;if(e.allDay===t)e.allDay=I(r.allDayDefault,n.allDayDefault);if(e.className){if(typeof e.className=="string")e.className=e.className.split(/\s+/)}else e.className=[]}function l(e){if(e.className){if(typeof e.className=="string")e.className=e.className.split(/\s+/)}else e.className=[];for(var t=ft.sourceNormalizers,n=0;n<t.length;n++)t[n](e)}function c(t){if(e.isFunction(t)||e.isArray(t))t={events:t};else if(typeof t=="string")t={url:t};if(typeof t=="object"){l(t);return t}}function p(e){return(typeof e=="object"?e.events||e.url:"")||e}this.isFetchNeeded=function(e,t){return!E||e<E||t>S};this.fetchEvents=function(e,t){E=e;S=t;C=[];var n=++x,r=w.length;T=r;for(var s=0;s<r;s++)i(w[s],n)};this.addEventSource=function(e){if(e=o(e)){T++;i(e,x)}};this.removeEventSource=function(t){w=e.grep(w,function(e){return!(e&&t&&p(e)==p(t))});C=e.grep(C,function(e){return!(e.source&&t&&p(e.source)==p(t))});y(C)};this.updateEvent=function(e){var t,n=C.length,r,i=v().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;t<n;t++){r=C[t];if(r._id==e._id&&r!=e){r.start=new Date(+r.start+s);r.end=e.end?r.end?new Date(+r.end+o):new Date(+i(r)+o):null;r.title=e.title;r.url=e.url;r.allDay=e.allDay;r.className=e.className;r.editable=e.editable;r.color=e.color;r.backgroundColor=e.backgroundColor;r.borderColor=e.borderColor;r.textColor=e.textColor;f(r)}}f(e);y(C)};this.renderEvent=function(e,t){f(e);if(!e.source){if(t){b.events.push(e);e.source=b}C.push(e)}y(C)};this.removeEvents=function(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}C=e.grep(C,t,true);for(r=0;r<w.length;r++)if(e.isArray(w[r].events))w[r].events=e.grep(w[r].events,t,true)}else{C=[];for(var r=0;r<w.length;r++)if(e.isArray(w[r].events))w[r].events=[]}y(C)};this.clientEvents=function(t){if(e.isFunction(t))return e.grep(C,t);else if(t){t+="";return e.grep(C,function(e){return e._id==t})}return C};this.normalizeEvent=f;this.refetchEventSource=function(t,n,r){if(r=c(r)){E=t;S=n;C=e.grep(C,function(e){return!(e.source&&r&&p(e.source)==p(r))});y(C);T++;i(r,x)}};this.renderEventForSource=function(e,t){if(t=c(t)){f(e);e.source=t;C.push(e)}y(C)};for(var d=this.trigger,v=this.getView,y=this.reportEvents,b={events:[]},w=[b],E,S,x=0,T=0,N=0,C=[],k=0;k<r.length;k++)o(r[k])}function o(e,t,n){e.setFullYear(e.getFullYear()+t);n||c(e);return e}function u(e,t,n){if(+e){t=e.getMonth()+t;var r=h(e);r.setDate(1);r.setMonth(t);e.setMonth(t);for(n||c(e);e.getMonth()!=r.getMonth();)e.setDate(e.getDate()+(e<r?1:-1))}return e}function a(e,t,n){if(+e){t=e.getDate()+t;var r=h(e);r.setHours(9);r.setDate(t);e.setDate(t);n||c(e);f(e,r)}return e}function f(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(e<t?1:-1)*vt)}function l(e,t){e.setMinutes(e.getMinutes()+t);return e}function c(e){e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e}function h(e,t){if(t)return c(new Date(+e));return new Date(+e)}function p(){var e=0,t;do t=new Date(1970,e++,1);while(t.getHours());return t}function d(e,t){return Math.round((h(e,true)-h(t,true))/dt)}function v(e,n,r,i){if(n!==t&&n!=e.getFullYear()){e.setDate(1);e.setMonth(0);e.setFullYear(n)}if(r!==t&&r!=e.getMonth()){e.setDate(1);e.setMonth(r)}i!==t&&e.setDate(i)}function m(e,n){if(typeof e=="object")return e;if(typeof e=="number")return new Date(e*1e3);if(typeof e=="string"){if(e.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(e)*1e3);if(n===t)n=true;return y(e,n)||(e?new Date(e):null)}return null}function g(e){e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.round(+e/1e3)}function y(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(t||!n[13]){var i=new Date(n[1],0,1,9,0);if(n[3]){r.setMonth(n[3]-1);i.setMonth(n[3]-1)}if(n[5]){r.setDate(n[5]);i.setDate(n[5])}f(r,i);n[7]&&r.setHours(n[7]);n[8]&&r.setMinutes(n[8]);n[10]&&r.setSeconds(n[10]);n[12]&&r.setMilliseconds(Number("0."+n[12])*1e3);f(r,i)}else{r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1);r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?Number("0."+n[12])*1e3:0);if(n[14]){i=Number(n[16])*60+(n[18]?Number(n[18]):0);i*=n[15]=="-"?1:-1;r=new Date(+r+i*60*1e3)}}return r}function b(e){if(typeof e=="number")return e*60;if(typeof e=="object")return e.getHours()*60+e.getMinutes();if(e=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var t=parseInt(e[1],10);if(e[3]){t%=12;if(e[3].toLowerCase().charAt(0)=="p")t+=12}return t*60+(e[2]?parseInt(e[2],10):0)}}function w(e,t,n){return E(e,null,t,n)}function E(e,t,n,r){r=r||ut;var i=e,s=t,o,u=n.length,a,f,l,c="";for(o=0;o<u;o++){a=n.charAt(o);if(a=="'")for(f=o+1;f<u;f++){if(n.charAt(f)=="'"){if(i){c+=f==o+1?"'":n.substring(o+1,f);o=f}break}}else if(a=="(")for(f=o+1;f<u;f++){if(n.charAt(f)==")"){o=w(i,n.substring(o+1,f),r);if(parseInt(o.replace(/\D/,""),10))c+=o;o=f;break}}else if(a=="[")for(f=o+1;f<u;f++){if(n.charAt(f)=="]"){a=n.substring(o+1,f);o=w(i,a,r);if(o!=w(s,a,r))c+=o;o=f;break}}else if(a=="{"){i=t;s=e}else if(a=="}"){i=e;s=t}else{for(f=u;f>o;f--)if(l=gt[n.substring(o,f)]){if(i)c+=l(i,r);o=f-1;break}if(f==o)if(i)c+=a}}return c}function S(e){var t;if(e.end){t=e.end;e=e.allDay;t=h(t);t=e||t.getHours()||t.getMinutes()?a(t,1):c(t)}else t=a(h(e.start),1);return t}function x(n,r,i){n.unbind("mouseover").mouseover(function(n){for(var s=n.target,o;s!=this;){o=s;s=s.parentNode}if((s=o._fci)!==t){o._fci=t;o=r[s];i(o.event,o.element,o);e(n.target).trigger(n)}n.stopPropagation()})}function T(t,n,r){for(var i=0,s;i<t.length;i++){s=e(t[i]);s.width(Math.max(0,n-(C(s)+L(s)+(r?k(s):0))))}}function N(t,n,r){for(var i=0,s;i<t.length;i++){s=e(t[i]);s.height(Math.max(0,n-A(s,r)))}}function C(t){return(parseFloat(e.css(t[0],"paddingLeft",true))||0)+(parseFloat(e.css(t[0],"paddingRight",true))||0)}function k(t){return(parseFloat(e.css(t[0],"marginLeft",true))||0)+(parseFloat(e.css(t[0],"marginRight",true))||0)}function L(t){return(parseFloat(e.css(t[0],"borderLeftWidth",true))||0)+(parseFloat(e.css(t[0],"borderRightWidth",true))||0)}function A(t,n){return(parseFloat(e.css(t[0],"paddingTop",true))||0)+(parseFloat(e.css(t[0],"paddingBottom",true))||0)+((parseFloat(e.css(t[0],"borderTopWidth",true))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",true))||0))+(n?(parseFloat(e.css(t[0],"marginTop",true))||0)+(parseFloat(e.css(t[0],"marginBottom",true))||0):0)}function O(){}function M(e,t){return e-t}function _(e){return(e<10?"0":"")+e}function D(e,n){if(e[n]!==t)return e[n];for(var r=n.split(/(?=[A-Z])/),i=r.length-1,s;i>=0;i--){s=e[r[i].toLowerCase()];if(s!==t)return s}return e[""]}function P(e){return e.replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function H(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function B(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function j(e,t){var n=e.source||{},r=e.color,i=n.color,s=t("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s;r=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s;n=e.textColor||n.textColor||t("eventTextColor");i=[];o&&i.push("background-color:"+o);r&&i.push("border-color:"+r);n&&i.push("color:"+n);return i.join(";")}function F(t,n,r){if(e.isFunction(t))t=[t];if(t){var i,s;for(i=0;i<t.length;i++)s=t[i].apply(n,r)||s;return s}}function I(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function q(t,n,r){var i=this;i.renderList=function(n,r,h){f=n;l=r;showNumbers=h;s("theme");s("columnFormat");s("weekNumbers");s("weekNumberShortTitle");s("weekNumberTitle");s("weekNumberCalculation");p=[];t.find(".fc-list-day").remove();n=e("<ul class='fc-list-day'></ul>").appendTo(t);r=c(new Date);for(h=0;h<l;h++){date=u(0,h);var d=e("<li class='fc-list-day-item' data-date='"+a(date,"yyyy-MM-dd")+"'></li>").appendTo(n);if(+date==+r)d.addClass("fc-today");else+date<+r&&d.addClass("fc-past");d=e("<div class='fc-day-content'></div>").appendTo(d);o("dayRender",i,date,d);p.push(d)}};i.setHeight=function(){};i.setWidth=function(){};i.renderDayOverlay=function(){};i.defaultSelectionEnd=function(){};i.renderSelection=function(){};i.clearSelection=function(){};i.reportDayClick=function(){};i.dragStart=function(){};i.dragStop=function(){};i.defaultEventEnd=function(e){return h(e.start)};i.getHoverListener=function(){return hoverListener};i.colLeft=function(){return null};i.colRight=function(){return null};i.colContentLeft=function(){return null};i.colContentRight=function(){return null};i.getIsCellAllDay=function(){return true};i.allDayRow=function(){return null};i.getRowCnt=function(){return f};i.getColCnt=function(){return l};i.getColWidth=function(){return colWidth};i.getDayItems=function(){return p};G.call(i,t,n,r);nt.call(i);R.call(i);var s=i.opt,o=i.trigger,u=i.cellToDate,a=n.formatDate,f,l,p=[]}function R(){var t=this;t.renderEvents=function(n){for(var r=t.getColCnt(),i=t.getDayItems(),s=0;s<r;s++){date=t.cellToDate(0,s);for(var o=[],u=[],a=0;a<n.length;a++){var f=n[a];!f.allDay&&d(date,f.start)===0&&o.push(f);f.allDay&&(f.start<=date&&f.end>=date||d(date,f.start)===0)&&u.push(f)}u.sort(Q);o.sort(Q);o=u.concat(o);u=i[s];u.find(".fc-list-event").remove();if(o.length>0){a=e("<ul class='fc-list-event'></ul>").appendTo(u);for(f=0;f<o.length;f++){var l=e("<li/>").addClass("fc-list-event-item").append(e("<div class='fc-event-inner'></div>"));t.trigger("eventRender",o[f],o[f],l);a.append(l)}}u.parents(".fc-list-day-item:first").toggleClass("fc-day-empty",o.length===0)}};t.clearEvents=function(){}}function U(t,n,r){function i(){var n="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+s()+o()+"</table>",r;k&&k.remove();k=e(n).appendTo(t);L=k.find("thead");O=L.find(".fc-day-header");M=k.find("tbody");_=M.find("tr");D=M.find(".fc-day");j=_.find("td:first-child");bodyWeekNumberLinks=M.find(".fc-week-number-link");F=_.eq(0).find(".fc-day > div");I=_.eq(0).find(".fc-day-content > div");B(L.add(L.find("tr")));B(_);_.eq(0).addClass("fc-first");_.filter(":last").addClass("fc-last");D.each(function(t,n){var i=S(Math.floor(t/$),t%$);r=e(n);g("dayRender",v,i,r);r.find(".fc-day-number:first").mousedown(f)});bodyWeekNumberLinks.click(l);D.click(u).mousedown(E)}function s(){var e=et+"-widget-header",t="",n,r;t+="<thead><tr>";if(ut)t+="<th class='fc-week-number "+e+"'>"+P(at)+"</th>";for(n=0;n<$;n++){r=S(0,n);t+="<th class='fc-day-header fc-"+pt[r.getDay()]+" "+e+"'>"+P(C(r,tt))+"</th>"}t+="</tr></thead>";return t}function o(){var e=et+"-widget-content",t="",n,r,i;t+="<tbody>";for(n=0;n<V;n++){t+="<tr class='fc-week'>";if(ut){r=i=S(n,0);if(r.getFullYear()<v.start.getFullYear())r=new Date(v.start.getFullYear(),0,1);if(r.getMonth()<v.start.getMonth())r=new Date(v.start.getFullYear(),v.start.getMonth(),1);t+="<td class='fc-week-number "+e+"'><div><a class='fc-week-number-link' href='javascript:void(0);' data-date='"+C(r,"yyyy-MM-dd")+"'>"+P(C(i,ft))+"</a></div></td>"}for(r=0;r<$;r++){i=S(n,r);var s=et+"-widget-content",o=v.start.getMonth(),u=c(new Date),a="";s=["fc-day","fc-"+pt[i.getDay()],s];i.getMonth()!=o&&s.push("fc-other-month");if(+i==+u)s.push("fc-today",et+"-state-highlight");else i<u?s.push("fc-past"):s.push("fc-future");a+="<td class='"+s.join(" ")+"' data-date='"+C(i,"yyyy-MM-dd")+"'><div>";if(J)a+="<a class='fc-day-number' href='javascript:void(0);'>"+i.getDate()+"</a>";a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";t+=a}t+="</tr>"}t+="</tbody>";return t}function u(t){if(!m("selectable")){var n=y(e(this).data("date"));g("dayClick",this,n,true,t)}}function f(){var t=e(this).parents(".fc-day:first").data("date");n.gotoDate(y(t));n.changeView("agendaDay")}function l(){var t=e(this).data("date");n.gotoDate(y(t));n.changeView("agendaWeek")}function p(e,t,n){n&&K.build();e=N(e,t);for(t=0;t<e.length;t++){n=e[t];d(n.row,n.leftCol,n.row,n.rightCol).click(u).mousedown(E)}}function d(e,n,r,i){e=K.rect(e,n,r,i,t);return b(e,t)}var v=this;v.renderBasic=function(n,r,s){V=n;$=r;J=s;et=m("theme")?"ui":"fc";tt=m("columnFormat");ut=m("weekNumbers");at=m("weekNumberShortTitle");m("weekNumberTitle");ft=m("weekNumberCalculation")!="iso"?"w":"W";M||(q=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t));i()};v.setHeight=function(t){U=t;t=U-L.height();var n,r,i;if(m("weekMode")=="variable")n=r=Math.floor(t/(V==1?2:6));else{n=Math.floor(t/V);r=t-n*(V-1)}j.each(function(t,s){if(t<V){i=e(s);i.find("> div").css("min-height",(t==V-1?r:n)-A(i))}})};v.setWidth=function(e){R=e;Y.clear();Z.clear();X=0;if(ut)X=L.find("th.fc-week-number").outerWidth();W=Math.floor((R-X)/$);T(O.slice(0,-1),W)};v.renderDayOverlay=p;v.defaultSelectionEnd=function(e){return h(e)};v.renderSelection=function(e,t){p(e,a(h(t),1),true)};v.clearSelection=function(){w()};v.reportDayClick=function(e,t,n){var r=x(e);g("dayClick",D[r.row*$+r.col],e,t,n)};v.dragStart=function(e,t){Q.start(function(e){w();e&&d(e.row,e.col,e.row,e.col)},t)};v.dragStop=function(e,t,n){var r=Q.stop();w();if(r){r=S(r);g("drop",e,r,true,t,n)}};v.defaultEventEnd=function(e){return h(e.start)};v.getHoverListener=function(){return Q};v.colLeft=function(e){return Y.left(e)};v.colRight=function(e){return Y.right(e)};v.colContentLeft=function(e){return Z.left(e)};v.colContentRight=function(e){return Z.right(e)};v.getIsCellAllDay=function(){return true};v.allDayRow=function(e){return _.eq(e)};v.getRowCnt=function(){return V};v.getColCnt=function(){return $};v.getColWidth=function(){return W};v.getDaySegmentContainer=function(){return q};G.call(v,t,n,r);rt.call(v);nt.call(v);z.call(v);var m=v.opt,g=v.trigger,b=v.renderOverlay,w=v.clearOverlays,E=v.daySelectionMousedown,S=v.cellToDate,x=v.dateToCell,N=v.rangeToSegments,C=n.formatDate,k,L,O,M,_,D,j,F,I,q,R,U,W,X,V,$,J,K,Q,Y,Z,et,tt,ut,at,ft;H(t.addClass("fc-grid"));K=new it(function(t,n){var r,i,s;O.each(function(t,o){r=e(o);i=r.offset().left;if(t)s[1]=i;s=[i];n[t]=s});s[1]=i+r.outerWidth();_.each(function(n,o){if(n<V){r=e(o);i=r.offset().top;if(n)s[1]=i;s=[i];t[n]=s}});s[1]=i+r.outerHeight()});Q=new st(K);Y=new ot(function(e){return F.eq(e)});Z=new ot(function(e){return I.eq(e)})}function z(){var e=this;e.renderEvents=function(t,n){e.renderDayEvents(t,n)};e.clearEvents=function(){e.getDaySegmentContainer().empty()};Y.call(e)}function W(n,r,i){function s(){var t=Dt+"-widget-header",r,i="",s,o=c(new Date);i+="<thead><tr>";if(Ft){r=U(0,0);r=V(r,qt);if(Pt)r+=It;else r=It+" "+r;i+="<th class='fc-agenda-axis fc-week-number "+t+"'>"+P(r)+"</th>"}else i+="<th class='fc-agenda-axis "+t+"'>&nbsp;</th>";var u=Ct>1;for(s=0;s<Ct;s++){r=U(0,s);var a=+r==+o;if(a&&u)i+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>";i+="<th class='fc-"+pt[r.getDay()]+" fc-col"+s+" "+t;if(a&&u)i+=" "+Dt+"-state-highlight fc-today";i+="'>";i+=u?"<a class='fc-day-number' href='javascript:void(0);' data-date='"+V(r,"yyyy-MM-dd")+"'>"+P(V(r,jt))+"</a>":P(V(r,jt));i+="</th>";if(a&&u)i+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>"}i+="<th class='fc-agenda-gutter "+t+"'>&nbsp;</th></tr></thead>";t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+i;s=Dt+"-widget-header";i=Dt+"-widget-content";var l;o=c(new Date);var h;r="";r+="<tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>";u="";a=Ct>1;for(s=0;s<Ct;s++){l=U(0,s);var p=+l==+o;h=["fc-col"+s,"fc-"+pt[l.getDay()],i];if(p&&a)h.push(Dt+"-state-highlight","fc-today");else l<o?h.push("fc-past"):h.push("fc-future");l="<td class='"+h.join(" ")+"'";if(p&&a)l+="style='border-width: 0px !important; border-bottom-width: 1px !important;'";l+=" ><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";if(p&&a)l="<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>"+l+"<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>";u+=l}r+=u;r+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td></tr></tbody>";t=t+r+"</table>";$&&$.remove();$=e(t).appendTo(n);J=$.find("thead");K=J.find("th:not(.fc-state-hightlight-border)").slice(1,-1);Q=$.find("tbody");Y=Q.find("td:not(.fc-state-hightlight-border)").slice(0,-1);Z=Y.find("> div");et=Y.find(".fc-day-content > div");tt=Y.eq(0);ut=Z.eq(0);B(J.add(J.find("tr")));B(Q.add(Q.find("tr")));K.find(".fc-day-number").click(f)}function o(){function e(){ht.scrollTop(r)}var t=p(),n=h(t);n.setHours(O("firstHour"));var r=E(t,n)+1;e();setTimeout(e,0)}function u(e){if(!O("selectable")){var t=Math.min(Ct-1,Math.floor((e.pageX-$.offset().left-bt)/wt)),n=U(0,t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){r=parseInt(r[1])*O("slotMinutes");n.setHours(Math.floor(r/60));n.setMinutes(r%60+Ht);_("dayClick",Y[t],n,false,e)}else _("dayClick",Y[t],n,true,e)}}function f(){var t=e(this).data("date");r.gotoDate(y(t));r.changeView("agendaDay")}function d(e,t,n){n&&Lt.build();e=W(e,t);for(t=0;t<e.length;t++){n=e[t];v(n.row,n.leftCol,n.row,n.rightCol).click(u).mousedown(q)}}function v(e,t,n,r){e=Lt.rect(e,t,n,r,at);return D(e,at)}function m(e,t){for(var n=0;n<Ct;n++){var r=U(0,n),i=a(h(r),1),s=new Date(Math.max(r,e)),o=new Date(Math.min(i,t));if(s<o){i=Lt.rect(0,n,0,n,dt);s=E(r,s);r=E(r,o);i.top=s;i.height=r-s;D(i,dt).click(u).mousedown(C)}}}function g(e){return O("allDaySlot")&&!e.row}function w(e){var t=U(0,e.col);e=e.row;O("allDaySlot")&&e--;l(t,L.minVisibleHour*60);e>=0&&l(t,e*xt);return t}function E(e,n){e=h(e,true);if(n<l(h(e),Ht))return 0;if(n>=l(h(e),(L.maxVisibleHour+1)*60))return mt.height();var r=O("slotMinutes"),i=n.getHours()*60+n.getMinutes()-Ht,s=Math.floor(i/r),o=_t[s];if(o===t)o=_t[s]=mt.find("tr").eq(s).find("td div")[0].offsetTop;return Math.max(0,Math.round(o-1+St*(i%r/r)))}function S(t,n){var r=O("selectHelper");Lt.build();if(r){var i=z(t).col;if(i>=0&&i<Ct){i=Lt.rect(0,i,0,i,dt);var s=E(t,t),o=E(t,n);if(o>s){i.top=s;i.height=o-s;i.left+=2;i.width-=5;if(e.isFunction(r)){if(r=r(t,n)){i.position="absolute";gt=e(r).css(i).appendTo(dt)}}else{i.isStart=true;i.isEnd=true;gt=e(R({title:"",start:t,end:n,className:["fc-select-helper"],editable:false},i));gt.css("opacity",O("dragOpacity"))}if(gt){gt.click(u).mousedown(C);dt.append(gt);T(gt,i.width,true);N(gt,i.height,true)}}}}else m(t,n)}function x(){j();if(gt){gt.remove();gt=null}}function C(t){if(t.which==1&&O("selectable")){I(t);var n;At.start(function(e,t){x();if(e&&e.col==t.col&&!g(e)){var r=w(t),i=w(e);n=[r,l(h(r),xt),i,l(h(i),xt)].sort(M);S(n[0],n[3])}else n=null},t);e(document).one("mouseup",function(e){At.stop();if(n){+n[0]==+n[1]&&k(n[0],false,e);F(n[0],n[3],false,e)}})}}function k(e,t,n){_("dayClick",Y[z(e).col],e,t,n)}var L=this;L.renderAgenda=function(t){Ct=t;Dt=O("theme")?"ui":"fc";Pt=O("isRTL");Ht=b(O("minTime"));Bt=b(O("maxTime"));jt=O("columnFormat");Ft=O("weekNumbers");It=O("weekNumberTitle");O("weekNumberShortTitle");qt=O("weekNumberCalculation")!="iso"?"w":"W";xt=O("snapMinutes")||O("slotMinutes");if($)s();else{t=Dt+"-widget-header";var r=Dt+"-widget-content",i,o,a,f,c,d=O("slotMinutes")%15==0;s();at=e("<div style='position:absolute; left:0; width:100%'/>").appendTo(n);if(O("allDaySlot")){ft=e("<div class='fc-event-container' style='position:absolute; z-index:8; top:0; left:0'/>").appendTo(at);i="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+t+" fc-agenda-axis'>"+O("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+t+" fc-agenda-gutter'>&nbsp;</th></tr></table>";lt=e(i).appendTo(at);ct=lt.find("tr");ct.find("td").click(u).mousedown(q);at.append("<div class='fc-agenda-divider "+t+"'><div class='fc-agenda-divider-inner'/></div>")}else ft=e([]);ht=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(at);dt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ht);vt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(dt);i="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";o=p();f=l(h(o),Bt);l(o,Ht);for(a=kt=0;o<f;a++){c=o.getMinutes();i+="<tr class='fc-slot"+a+" "+(!c?"":"fc-minor")+"'><th class='fc-agenda-axis "+t+"'>"+(!d||!c?V(o,O("axisFormat")):"&nbsp;")+"</th><td class='"+r+"'><div style='position:relative'>&nbsp;</div></td></tr>";l(o,O("slotMinutes"));kt++}i+="</tbody></table>";mt=e(i).appendTo(dt);mt.find("td").click(u).mousedown(C)}};L.setWidth=function(){Ot.clear();Mt.clear();var t=J.find("th:first");if(lt)t=t.add(lt.find("th:first"));t=t.add(mt.find("th").filter(":visible:first"));bt=0;T(t.width("").each(function(t,n){bt=Math.max(bt,e(n).outerWidth())}),bt);t=$.find(".fc-agenda-gutter");if(lt)t=t.add(lt.find("th.fc-agenda-gutter"));var n=ht[0].clientWidth;if(Et=ht.width()-n){T(t,Et);t.show().prev().removeClass("fc-last")}else t.hide().prev().addClass("fc-last");wt=Math.floor((n-bt)/Ct);T(K.slice(0,-1),wt)};L.setHeight=function(e){if(e===t)e=yt;yt=e;_t={};var n=Q.position().top,r=ht.position().top;e=Math.min(e-n,mt.height()+r+1);ut.height(e-A(tt));at.css("top",n);ht.height(e-r-1);St=mt.find("tr:visible:first").height();Tt=O("slotMinutes")/xt;Nt=St/Tt};L.afterRender=function(){o()};L.defaultEventEnd=function(e){var t=h(e.start);if(e.allDay)return t;return l(t,O("defaultEventMinutes"))};L.timePosition=E;L.getIsCellAllDay=g;L.allDayRow=function(){return ct};L.getCoordinateGrid=function(){return Lt};L.getHoverListener=function(){return At};L.colLeft=function(e){return Ot.left(e)};L.colRight=function(e){return Ot.right(e)};L.colContentLeft=function(e){return Mt.left(e)};L.colContentRight=function(e){return Mt.right(e)};L.getDaySegmentContainer=function(){return ft};L.getSlotSegmentContainer=function(){return vt};L.getMinMinute=function(){return Ht};L.getMaxMinute=function(){return Bt};L.getSlotContainer=function(){return dt};L.getRowCnt=function(){return 1};L.getColCnt=function(){return Ct};L.getColWidth=function(){return wt};L.getSnapHeight=function(){return Nt};L.getSnapMinutes=function(){return xt};L.defaultSelectionEnd=function(e,t){if(t)return h(e);return l(h(e),O("slotMinutes"))};L.renderDayOverlay=d;L.renderSelection=function(e,t,n){if(n)O("allDaySlot")&&d(e,a(h(t),1),true);else S(e,t)};L.clearSelection=x;L.reportDayClick=k;L.dragStart=function(e,t){At.start(function(e){j();if(e)if(g(e))v(e.row,e.col,e.row,e.col);else{e=w(e);var t=l(h(e),O("defaultEventMinutes"));m(e,t)}},t)};L.dragStop=function(e,t,n){var r=At.stop();j();r&&_("drop",e,w(r),g(r),t,n)};G.call(L,n,r,i);rt.call(L);nt.call(L);X.call(L);var O=L.opt,_=L.trigger,D=L.renderOverlay,j=L.clearOverlays,F=L.reportSelection,I=L.unselect,q=L.daySelectionMousedown,R=L.slotSegHtml,U=L.cellToDate,z=L.dateToCell,W=L.rangeToSegments,V=r.formatDate,$,J,K,Q,Y,Z,et,tt,ut,at,ft,lt,ct,ht,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t={},Dt,Pt,Ht,Bt,jt,Ft,It,qt;H(n.addClass("fc-agenda"));Lt=new it(function(t,n){var r,i,s;K.each(function(t,o){r=e(o);i=r.offset().left;if(t)s[1]=i;s=[i];n[t]=s});s[1]=i+r.outerWidth();if(O("allDaySlot")){r=ct;i=r.offset().top;t[0]=[i,i+r.outerHeight()]}for(var o=dt.offset().top,u=ht.offset().top,a=u+ht.outerHeight(),f=0;f<kt*Tt;f++)t.push([Math.max(u,Math.min(a,o+Nt*f)),Math.max(u,Math.min(a,o+Nt*(f+1)))])});At=new st(Lt);Ot=new ot(function(e){return Z.eq(e)});Mt=new ot(function(e){return et.eq(e)})}function X(){function n(t){var n=c("minDefaultDayStartHour"),r=c("maxDefaultDayEndHour");t&&e.each(t,function(e,t){var i=t.start.getHours(),s=t.end.getHours();if(n>i)n=i;if(r<s)r=s});f.minVisibleHour=n;f.maxVisibleHour=r;t="";for(var i=0;i<n*2;i++){if(t.length)t+=", ";t+="tr.fc-slot"+i}for(i=r*2+2;i<48;i++){if(t.length)t+=", ";t+="tr.fc-slot"+i}e(".fc-agenda-slots tr").show();e(t).hide();rt.calcSize();rt.setSize()}function r(e){return e.end?h(e.end):l(h(e.start),c("defaultEventMinutes"))}function i(e,t){var n="<",r=e.url,i=j(e,c),s=["fc-event","fc-event-vert"];v(e)&&s.push("fc-event-draggable");t.isStart&&s.push("fc-event-start");t.isEnd&&s.push("fc-event-end");s=s.concat(e.className);if(e.source)s=s.concat(e.source.className||[]);n+=r?"a href='"+P(e.url)+"'":"div";var o=c("timeFormat");if(rt.getView().name==="agendaWeek")o=rt.option("timeFormat")[""];n+=" class='"+s.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'><span class='fc-event-time'>"+P(st(e.start,e.end,o))+"</span><span class='fc-event-title'>"+P(e.title||"")+"</span></div><div class='fc-event-bg'></div>";if(t.isEnd&&m(e))n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>";n+="</"+(r?"a":"div")+">";return n}function s(e,t,n){var r=t.find("div.fc-event-time");v(e)&&o(e,t,r);n.isEnd&&m(e)&&u(e,t,r);y(e,t)}function o(e,t,n){function r(){tt();if(y)if(L&&w){n.hide();t.draggable("option","grid",null);et(a(h(e.start),N),a(S(e),N))}else{var r=C,i=l(h(e.start),r),s;if(e.end)s=l(h(e.end),r);n.text(st(i,s,c("timeFormat")));n.css("display","");t.draggable("option","grid",[o,u])}}var i=f.getCoordinateGrid(),s=I(),o=q(),u=R(),v=U(),m,g,y,b,w,E,x,T,N,C,k,L=c("dragBetweenAllDayAndSlots");t.draggable({scroll:false,grid:[o,u],axis:s==1?"y":false,opacity:c("dragOpacity"),revertDuration:c("dragRevertDuration"),start:function(n,r){p("eventDragStart",t,e,n,r);K(e,t);i.build();m=t.position();g=i.cell(n.pageX,n.pageY);y=b=true;w=E=D(g);C=k=N=x=T=0},drag:function(e,n){var a=i.cell(e.pageX,e.pageY);if(y=!!a){w=D(a);if(L||!w){x=Math.round((n.position.left-m.left)/o);if(x!=T){a=F(0,g.col);var f=g.col+x;f=Math.max(0,f);f=Math.min(s-1,f);f=F(0,f);N=d(f,a)}}else y=false;w||(C=Math.round((n.position.top-m.top)/u)*v)}if(y!=b||w!=E||x!=T||C!=k){r();b=y;E=w;T=x;k=C}t.draggable("option","revert",!y)},stop:function(n,i){tt();p("eventDragStop",t,e,n,i);if(y&&(w||N||C))G(this,e,N,w?0:C,w,n,i);else{y=true;w=false;C=N=x=0;r();t.css("filter","");t.css(m);X(e,t)}}})}function u(e,t,n){var r,i,s=R(),o=U();t.resizable({minHeight:s*c("minHeightInSlots"),handles:{s:".ui-resizable-handle"},grid:s,start:function(n,s){r=i=0;K(e,t);p("eventResizeStart",this,e,n,s)},resize:function(u,a){r=Math.round((Math.max(s,t.height())-a.originalSize.height)/s);if(r!=i){n.text(st(e.start,!r&&!e.end?null:l(g(e),o*r),c("timeFormat")));i=r}},stop:function(n,i){p("eventResizeStop",this,e,n,i);r?Z(this,e,0,o*r,n,i):X(e,t)}})}var f=this;f.renderEvents=function(o,u){var a,d=o.length,v=[],m=[],g=e(".fc-agenda-allday, .fc-agenda-divider.fc-widget-header");for(a=0;a<d;a++){var y=o[a];if(y.allDay){if(y.start>=f.start&&y.start<=f.end||y.end>=f.start&&y.end<=f.end||y.start<f.start&&y.end>f.end)v.push(y)}else m.push(y)}if(c("allDaySlot")){if(v.length>0){g.show();nt(v,u)}else{nt(v,u);g.hide()}b()}d=I();v=M();g=O();var w;y=e.map(m,r);var S,T,N,D;a=[];for(S=0;S<d;S++){w=F(0,S);l(w,v);T=m;N=y;D=w;w=l(h(w),g-v);var P=[],j=void 0,q=T.length,R=void 0,U=void 0,z=void 0,X=void 0,K=void 0;for(j=0;j<q;j++){R=T[j];U=R.start;z=N[j];if(z>D&&U<w){if(U<D){U=h(D);X=false}else X=true;if(z>w){z=h(w);K=false}else K=true;P.push({event:R,start:U,end:z,isStart:X,isEnd:K,title:R.title,sortKey:R.sortKey})}}N=P.sort(Q);T=[];for(D=0;D<N.length;D++){w=N[D];for(P=0;P<T.length;P++)if(!J(w,T[P]).length)break;(T[P]||(T[P]=[])).push(w)}N=T[0];for(D=0;D<T.length;D++){w=T[D];for(P=0;P<w.length;P++){j=w[P];j.forwardSegs=[];for(q=D+1;q<T.length;q++)J(j,T[q],j.forwardSegs)}}if(N){for(D=0;D<N.length;D++)V(N[D]);for(D=0;D<N.length;D++)$(N[D],0,0)}N=[];for(D=0;D<T.length;D++){w=T[D];for(P=0;P<w.length;P++)N.push(w[P])}D=N;for(T=0;T<D.length;T++){N=D[T];N.col=S;a.push(N)}}n(a);d=a.length;S="";y=E();T=c("isRTL");for(m=0;m<d;m++){v=a[m];g=v.event;N=l(h(v.start),c("minHeightInSlots")*c("slotMinutes"));if(v.end<N)v.end=N;N=_(v.start,v.start);D=_(v.start,v.end);w=H(v.col);P=B(v.col);q=P-w;P-=q*.025;q=P-w;j=q*(v.forwardCoord-v.backwardCoord);if(c("slotEventOverlap"))j=Math.max((j-10)*2,j);if(T){R=P-v.backwardCoord*q;q=R-j}else{q=w+v.backwardCoord*q;R=q+j}q=Math.max(q,w);R=Math.min(R,P);j=R-q;v.top=N;v.left=q;v.outerWidth=j;v.outerHeight=D-N;S+=i(g,v)}y[0].innerHTML=S;T=y.children();for(m=0;m<d;m++){v=a[m];g=v.event;S=e(T[m]);N=p("eventRender",g,g,S);if(N===false)S.remove();else{if(N&&N!==true){S.remove();S=e(N).css({position:"absolute",top:v.top,left:v.left}).appendTo(y)}v.element=S;if(g._id===u)s(g,S,v);else S[0]._fci=m;W(g,S)}}x(y,a,s);for(m=0;m<d;m++){v=a[m];if(S=v.element){v.vsides=A(S,true);v.hsides=C(S)+L(S)+k(S);g=S.find(".fc-event-title");if(g.length)v.contentTop=g[0].offsetTop}}for(m=0;m<d;m++){v=a[m];if(S=v.element){S[0].style.width=Math.max(0,v.outerWidth-v.hsides)+"px";y=Math.max(0,v.outerHeight-v.vsides);S[0].style.height=y+"px";g=v.event;if(v.contentTop!==t&&y-v.contentTop<10){S.find("div.fc-event-time").text(it(g.start,c("timeFormat"))+" - "+g.title);S.find("div.fc-event-title").remove()}p("eventAfterRender",g,g,S)}}};f.clearEvents=function(){w().empty();E().empty()};f.slotSegHtml=i;Y.call(f);var c=f.opt,p=f.trigger,v=f.isEventDraggable,m=f.isEventResizable,g=f.eventEnd,y=f.eventElementHandlers,b=f.setHeight,w=f.getDaySegmentContainer,E=f.getSlotSegmentContainer,T=f.getHoverListener,O=f.getMaxMinute,M=f.getMinMinute,_=f.timePosition,D=f.getIsCellAllDay,H=f.colContentLeft,B=f.colContentRight,F=f.cellToDate,I=f.getColCnt,q=f.getColWidth,R=f.getSnapHeight,U=f.getSnapMinutes,z=f.getSlotContainer,W=f.reportEventElement,X=f.showEvents,K=f.hideEvents,G=f.eventDrop,Z=f.eventResize,et=f.renderDayOverlay,tt=f.clearOverlays,nt=f.renderDayEvents,rt=f.calendar,it=rt.formatDate,st=rt.formatDates;f.draggableDayEvent=function(e,t,n){function r(){if(!u){t.width(s).height("").draggable("option","grid",null);u=true}}var i=n.isStart,s,o,u=true,f,l=T(),v=q(),m=R(),g=U(),y=M(),b=c("dragBetweenAllDayAndSlots");t.draggable({opacity:c("dragOpacity","month"),revertDuration:c("dragRevertDuration"),start:function(n,y){p("eventDragStart",t,e,n,y);K(e,t);s=t.width();l.start(function(n,s){tt();if(n){o=false;var l=F(0,s.col),p=F(0,n.col);f=d(p,l);if(n.row)if(b&&i){if(u){t.width(v-10);N(t,m*Math.round((e.end?(e.end-e.start)/mt:c("defaultEventMinutes"))/g));t.draggable("option","grid",[v,1]);u=false}}else o=true;else{et(a(h(e.start),f),a(S(e),f));r()}o=o||u&&!f}else{r();o=true}t.draggable("option","revert",o)},n,"drag")},stop:function(n,i){l.stop();tt();p("eventDragStop",t,e,n,i);if(o){r();t.css("filter","");X(e,t)}else{var s=0;if(b&&!u)s=Math.round((t.offset().top-z().offset().top)/m)*g+y-(e.start.getHours()*60+e.start.getMinutes());G(this,e,f,s,u,n,i)}}})}}function V(e){var n=e.forwardSegs,r=0,i,s;if(e.forwardPressure===t){for(i=0;i<n.length;i++){s=n[i];V(s);r=Math.max(r,1+s.forwardPressure)}e.forwardPressure=r}}function $(e,n,r){var i=e.forwardSegs;if(e.forwardCoord===t){if(i.length){i.sort(K);$(i[0],n+1,r);e.forwardCoord=i[0].backwardCoord}else e.forwardCoord=1;e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(n+1);for(n=0;n<i.length;n++)$(i[n],0,e.forwardCoord)}}function J(e,t,n){n=n||[];for(var r=0;r<t.length;r++)e.end>t[r].start&&e.start<t[r].end&&n.push(t[r]);return n}function K(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||Q(e,t)}function Q(e,t){return e.start-t.start||(e.sortKey||0)-(t.sortKey||0)||t.end-t.start-(e.end-e.start)||(e.title||"").localeCompare(t.title)}function G(n,r,i){function s(t,n){var r=L[t];if(e.isPlainObject(r))return D(r,n||i);return r}function o(e,t){return r.trigger.apply(r,[e,t||E].concat(Array.prototype.slice.call(arguments,2),[E]))}function u(e){return e.end?h(e.end):S(e)}function f(e,t,n){e=C[e._id];var r,i=e.length;for(r=0;r<i;r++)if(!t||e[r][0]!=t[0])e[r][n]()}function c(e,n,r,i){r=r||0;for(var s,o=e.length,u=0;u<o;u++){s=e[u];if(i!==t)s.allDay=i;l(a(s.start,n,true),r);if(s.end)s.end=l(a(s.end,n,true),r);x(s,L)}}function p(e,t,n){n=n||0;for(var r,i=e.length,s=0;s<i;s++){r=e[s];r.end=l(a(u(r),t,true),n);x(r,L)}}function v(e,t){var n=E.getColCnt(),r=H?-1:1,i=H?n-1:0;if(typeof e=="object"){t=e.col;e=e.row}return e*n+(t*r+i)}function m(e){var t=E.visStart.getDay();e+=_[t];return Math.floor(e/M)*7+P[(e%M+M)%M]-t}function g(e){var t=h(E.visStart);a(t,e);return t}function y(e){return d(e,E.visStart)}function b(e){var t=E.visStart.getDay();e+=t;return Math.floor(e/7)*M+_[(e%7+7)%7]-_[t]}function w(e){var t=E.getColCnt();return{row:Math.floor(e/t),col:(e%t+t)%t*(H?-1:1)+(H?t-1:0)}}var E=this;E.element=n;E.calendar=r;E.name=i;E.opt=s;E.trigger=o;E.isEventDraggable=function(e){var t=e.source||{};return I(e.startEditable,t.startEditable,s("eventStartEditable"),e.editable,t.editable,s("editable"))&&!s("disableDragging")};E.isEventResizable=function(e){var t=e.source||{};return I(e.durationEditable,t.durationEditable,s("eventDurationEditable"),e.editable,t.editable,s("editable"))&&!s("disableResizing")};E.setEventData=function(e){N={};var t,n=e.length,r;for(t=0;t<n;t++){r=e[t];if(N[r._id])N[r._id].push(r);else N[r._id]=[r]}};E.clearEventData=function(){N={};C={};k=[]};E.eventEnd=u;E.reportEventElement=function(e,t){k.push({event:e,element:t});if(C[e._id])C[e._id].push(t);else C[e._id]=[t]};E.triggerEventDestroy=function(){e.each(k,function(e,t){E.trigger("eventDestroy",t.event,t.event,t.element)})};E.eventElementHandlers=function(e,t){t.on(Z()?"touchend":"click",function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return o("eventClick",this,e,n)}).hover(function(t){o("eventMouseover",this,e,t)},function(t){o("eventMouseout",this,e,t)})};E.showEvents=function(e,t){f(e,t,"show")};E.hideEvents=function(e,t){f(e,t,"hide")};E.eventDrop=function(e,t,n,r,i,s,u){var a=t.allDay,f=t._id;c(N[f],n,r,i);o("eventDrop",e,t,n,r,i,function(){c(N[f],-n,-r,a);T(f)},s,u);T(f)};E.eventResize=function(e,t,n,r,i,s){var u=t._id,a=t._start,f=t._end;p(N[u],n,r);o("eventResize",e,t,n,r,function(){t.start=a;t.end=f;x(t);T(u)},i,s);T(u)};var S=E.defaultEventEnd,x=r.normalizeEvent,T=r.reportEventChange,N={},C={},k=[],L=r.options;E.isHiddenDay=function(e){if(typeof e=="object")e=e.getDay();return O[e]};E.skipHiddenDays=function(e,t,n){for(t=t||1;O[(e.getDay()+(n?t:0)+7)%7];)a(e,t)};E.getCellsPerWeek=function(){return M};E.dateToCell=function(e){e=y(e);e=b(e);return w(e)};E.dateToDayOffset=y;E.dayOffsetToCellOffset=b;E.cellOffsetToCell=w;E.cellToDate=function(){var e=v.apply(null,arguments);e=m(e);return g(e)};E.cellToCellOffset=v;E.cellOffsetToDayOffset=m;E.dayOffsetToDate=g;E.rangeToSegments=function(e,t){for(var n=E.getRowCnt(),r=E.getColCnt(),i=[],s=y(e),o=y(t),u=b(s),a=b(o)-1,f=0;f<n;f++){var l=f*r,c=Math.max(u,l);l=Math.min(a,l+r-1);if(c<=l){var h=w(c),p=w(l);h=[h.col,p.col].sort();c=m(c)==s;l=m(l)+1==o;i.push({row:f,leftCol:h[0],rightCol:h[1],isStart:c,isEnd:l})}}return i};var A=s("hiddenDays")||[],O=[],M,_=[],P=[],H=s("isRTL");(function(){s("weekends")===false&&A.push(0,6);for(var t=0,n=0;t<7;t++){_[t]=n;O[t]=e.inArray(t,A)!=-1;if(!O[t]){P[n]=t;n++}}M=n;if(!M)throw"invalid hiddenDays"})()}function Y(){function t(e,t,r){e=n([e],true,false);var i=[];et(e,function(e,n){e.row===t&&n.css("top",r);i.push(n[0])});return i}function n(t,n,a){var f=U(),l=n?e("<div/>"):f;t=r(t);var c;i(t);c=s(t);l[0].innerHTML=c;l=l.children();n&&f.append(l);o(t,l);et(t,function(e,t){e.hsides=C(t)+L(t)+k(t)});et(t,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))});et(t,function(e,t){e.outerHeight=t.outerHeight(true)});u(t,a);return t}function r(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.start,s=S(r);i=J(i,s);for(s=0;s<i.length;s++)i[s].event=r;t.push.apply(t,i)}return t}function i(e){for(var t=m("isRTL"),n=0;n<e.length;n++){var r=e[n],i=(t?r.isStart:r.isEnd)?R:I,s=((t?r.isEnd:r.isStart)?q:F)(r.leftCol);i=i(r.rightCol);r.left=s;r.outerWidth=i-s}}function s(e){for(var t="",n=0;n<e.length;n++){var r=e[n],i="",s=m("isRTL"),o=r.event,u=o.url,a=["fc-event","fc-event-hori"];y(o)&&a.push("fc-event-draggable");r.isStart&&a.push("fc-event-start");r.isEnd&&a.push("fc-event-end");a=a.concat(o.className);if(o.source)a=a.concat(o.source.className||[]);var f=j(o,m);i+=u?"<a href='"+P(u)+"'":"<div";i+=" class='"+a.join(" ")+"' style='position:absolute;left:"+r.left+"px;"+f+"'><div class='fc-event-inner'>";if(o.allDay||r.isStart)i+="<span class='fc-event-time'>"+P(z(o.start,o.end,o.allDay&&v.name!="month"?m("timeFormat","allDay"):m("timeFormat")))+"</span>";i+="<span class='fc-event-title'>"+P(o.title||"")+"</span></div>";if(r.isEnd&&b(o))i+="<div class='ui-resizable-handle ui-resizable-"+(s?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>";i+="</"+(u?"a":"div")+">";t+=i}return t}function o(t,n){for(var r=0;r<t.length;r++){var i=t[r],s=i.event,o=n.eq(r);s=g("eventRender",s,s,o);if(s===false)o.remove();else{if(s&&s!==true){s=e(s).css({position:"absolute",left:i.left});o.replaceWith(s);o=s}i.element=o}}}function u(e,t){var n=f(e),r=l(),i=[];if(t)for(var s=0;s<r.length;s++)r[s].height(n[s]);for(s=0;s<r.length;s++)i.push(r[s].position().top);et(e,function(e,t){t.css("top",i[e.row]+e.top)})}function f(e){var t=_(),n=D(),r=[],i=_(),s=[],o,u,a;for(o=0;o<e.length;o++){u=e[o];a=u.row;if(u.element)if(s[a])s[a].push(u);else s[a]=[u]}for(a=0;a<i;a++){e=s;o=a;u=[];var f;f=s[a]||[];f.sort(tt);for(var l=[],c=0;c<f.length;c++){for(var h=f[c],p=0;p<l.length;p++){var d;e:{d=l[p];for(var v=0;v<d.length;v++){var m=d[v];if(m.leftCol<=h.rightCol&&m.rightCol>=h.leftCol){d=true;break e}}d=false}if(!d)break}if(l[p])l[p].push(h);else l[p]=[h]}f=l;for(l=0;l<f.length;l++)u.push.apply(u,f[l]);e[o]=u}for(i=0;i<t;i++){a=s[i];e=[];for(f=0;f<n;f++)e.push(0);for(o=0;o<a.length;o++){f=u=a[o];l=e.slice(u.leftCol,u.rightCol+1);l=Math.max.apply(Math,l);f.top=l;for(f=u.leftCol;f<=u.rightCol;f++)e[f]=u.top+u.outerHeight}r.push(Math.max.apply(Math,e))}return r}function l(){var e,t=_(),n=[];for(e=0;e<t;e++)n[e]=B(e).find("div.fc-day-content > div");return n}function c(e,t){var n=U();et(e,function(e,n,r){var i=e.event;if(i._id===t)p(i,n,e);else n[0]._fci=r});x(n,e,p)}function p(e,t,n){y(e)&&v.draggableDayEvent(e,t,n);n.isEnd&&b(e)&&v.resizableDayEvent(e,t,n);T(e,t)}var v=this;v.renderDayEvents=function(e,t){var r=n(e,false,true);et(r,function(e,t){E(e.event,t)});c(r,t);et(r,function(e,t){g("eventAfterRender",e.event,e.event,t)})};v.draggableDayEvent=function(e,t){var n=$(),r;t.draggable({delay:50,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(i,s){g("eventDragStart",t,e,i,s);A(e,t);n.start(function(n,i,s,o){t.draggable("option","revert",!n||!s&&!o);X();if(n){i=K(i);n=K(n);r=d(n,i);W(a(h(e.start),r),a(S(e),r))}else r=0},i,"drag")},stop:function(i,s){n.stop();X();g("eventDragStop",t,e,i,s);if(r)O(this,e,r,0,e.allDay,i,s);else{t.css("filter","");N(e,t)}}})};v.resizableDayEvent=function(n,r,i){var s=m("isRTL")?"w":"e",o=r.find(".ui-resizable-"+s),u=false;H(r);r.mousedown(function(e){e.preventDefault()}).click(function(e){if(u){e.preventDefault();e.stopImmediatePropagation()}});o.mousedown(function(o){if(o.which==1){u=true;var f=$();_();D();var l=r.css("top"),c,h,p=e.extend({},n),d=Z(Y(n.start));V();e("body").css("cursor",s+"-resize").one("mouseup",function(t){g("eventResizeStop",this,n,t);e("body").css("cursor","");f.stop();X();c&&M(this,n,c,0,t);setTimeout(function(){u=false},0)});g("eventResizeStart",this,n,o);f.start(function(r,o){if(r){var u=Q(o),f=Q(r);f=Math.max(f,d);if(c=G(f)-G(u)){p.end=a(w(n),c,true);u=h;h=t(p,i.row,l);h=e(h);h.find("*").css("cursor",s+"-resize");u&&u.remove();A(n)}else if(h){N(n);h.remove();h=null}X();W(n.start,a(S(n),c))}},o)}})};var m=v.opt,g=v.trigger,y=v.isEventDraggable,b=v.isEventResizable,w=v.eventEnd,E=v.reportEventElement,T=v.eventElementHandlers,N=v.showEvents,A=v.hideEvents,O=v.eventDrop,M=v.eventResize,_=v.getRowCnt,D=v.getColCnt,B=v.allDayRow,F=v.colLeft,I=v.colRight,q=v.colContentLeft,R=v.colContentRight,U=v.getDaySegmentContainer,z=v.calendar.formatDates,W=v.renderDayOverlay,X=v.clearOverlays,V=v.clearSelection,$=v.getHoverListener,J=v.rangeToSegments,K=v.cellToDate,Q=v.cellToCellOffset,G=v.cellOffsetToDayOffset,Y=v.dateToDayOffset,Z=v.dayOffsetToCellOffset}function Z(){return navigator.userAgent.match(/iPod|iPhone|iPad/i)!=null}function et(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.element;i&&t(r,i,n)}}function tt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.sortKey||0)-(t.event.sortKey||0)||(e.event.title||"").localeCompare(t.event.title)}function nt(){function t(e){if(f){f=false;a();s("unselect",null,e)}}function n(e,t,n,r){f=true;s("select",null,e,t,n,r)}var r=this;r.select=function(e,r,i){t();r||(r=o(e,i));u(e,r,i);n(e,r,i)};r.unselect=t;r.reportSelection=n;r.daySelectionMousedown=function(s){var o=r.cellToDate,f=r.getIsCellAllDay,l=r.getHoverListener(),c=r.reportDayClick;if(s.which==1&&i("selectable")){t(s);var h;l.start(function(e,t){a();if(e&&f(e)){h=[o(t),o(e)].sort(M);u(h[0],h[1],true)}else h=null},s);e(document).one("mouseup",function(e){l.stop();if(h){+h[0]==+h[1]&&c(h[0],true,e);n(h[0],h[1],true,e)}})}};var i=r.opt,s=r.trigger,o=r.defaultSelectionEnd,u=r.renderSelection,a=r.clearSelection,f=false;i("selectable")&&i("unselectAuto")&&e(document).mousedown(function(n){var r=i("unselectCancel");if(r)if(e(n.target).closest(r).length)return;t(n)})}function rt(){this.renderOverlay=function(r,i){var s=n.shift();s||(s=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));s[0].parentNode!=i[0]&&s.appendTo(i);t.push(s.css(r).show());return s};this.clearOverlays=function(){for(var e;e=t.shift();)n.push(e.hide().unbind())};var t=[],n=[]}function it(e){var t,n;this.build=function(){t=[];n=[];e(t,n)};this.cell=function(e,r){var i=t.length,s=n.length,o,u=-1,a=-1;for(o=0;o<i;o++)if(r>=t[o][0]&&r<t[o][1]){u=o;break}for(o=0;o<s;o++)if(e>=n[o][0]&&e<n[o][1]){a=o;break}return u>=0&&a>=0?{row:u,col:a}:null};this.rect=function(e,r,i,s,o){o=o.offset();return{top:t[e][0]-o.top,left:n[r][0]-o.left,width:n[s][1]-n[r][0],height:t[i][1]-t[e][0]}}}function st(n){function r(e){if(e.pageX===t){e.pageX=e.originalEvent.pageX;e.pageY=e.originalEvent.pageY}e=n.cell(e.pageX,e.pageY);if(!e!=!u||e&&(e.row!=u.row||e.col!=u.col)){if(e){o||(o=e);s(e,o,e.row-o.row,e.col-o.col)}else s(e,o);u=e}}var i,s,o,u;this.start=function(t,a,f){s=t;o=u=null;n.build();r(a);i=f||"mousemove";e(document).bind(i,r)};this.stop=function(){e(document).unbind(i,r);return u}}function ot(e){var n=this,r={},i={},s={};n.left=function(n){return i[n]=i[n]===t?(r[n]=r[n]||e(n)).position().left:i[n]};n.right=function(i){return s[i]=s[i]===t?n.left(i)+(r[i]=r[i]||e(i)).width():s[i]};n.clear=function(){r={};i={};s={}}}var ut={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberCalculation:"iso",weekNumberShortTitle:"W",weekNumberTitle:"Week",allDayDefault:true,ignoreTimezone:true,dragBetweenAllDayAndSlots:true,minHeightInSlots:1,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*",handleWindowResize:true},at={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},ft=e.fullCalendar={version:"1.6.4"},lt=ft.views={};e.fn.fullCalendar=function(n){if(typeof n=="string"){var i=Array.prototype.slice.call(arguments,1),s;this.each(function(){var r=e.data(this,"fullCalendar");if(r&&e.isFunction(r[n])){r=r[n].apply(r,i);if(s===t)s=r;n=="destroy"&&e.removeData(this,"fullCalendar")}});if(s!==t)return s;return this}n=n||{};var o=n.eventSources||[];delete n.eventSources;if(n.events){o.push(n.events);delete n.events}n=e.extend(true,{},ut,n.isRTL||n.isRTL===t&&ut.isRTL?at:{},n);this.each(function(t,i){var s=e(i),u=new r(s,n,o);s.data("fullCalendar",u);u.render()});return this};ft.sourceNormalizers=[];ft.sourceFetchers=[];var ct={dataType:"json",cache:false},ht=1;ft.addDays=a;ft.cloneDate=h;ft.parseDate=m;ft.parseISO8601=y;ft.parseTime=b;ft.formatDate=w;ft.formatDates=E;ft.clearTime=c;var pt=["sun","mon","tue","wed","thu","fri","sat"],dt=864e5,vt=36e5,mt=6e4,gt={s:function(e){return e.getSeconds()},ss:function(e){return _(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return _(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return _(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return _(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return _(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return _(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return w(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){e=e.getDate();if(e>10&&e<20)return"th";return["st","nd","rd"][e%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));e=t.getTime();t.setMonth(0);t.setDate(1);return Math.floor(Math.round((e-t)/864e5)/7)+1}};ft.dateFormatters=gt;ft.applyAll=F;lt.month=function(e,t){var n=this;n.render=function(e,t){if(t){u(e,t);e.setDate(1)}var l=r("firstDay"),c=h(e,true);c.setDate(1);var p=u(h(c),1),v=h(c);a(v,-((v.getDay()-l+7)%7));s(v);var m=h(p);a(m,(7-m.getDay()+l)%7);s(m,-1,true);l=o();var g=Math.round(d(m,v)/7);if(r("weekMode")=="fixed"){a(m,(6-g)*7);g=6}n.title=f(c,r("titleFormat"));n.start=c;n.end=p;n.visStart=v;n.visEnd=m;i(g,l,true)};U.call(n,e,t,"month");var r=n.opt,i=n.renderBasic,s=n.skipHiddenDays,o=n.getCellsPerWeek,f=t.formatDate};lt.basicWeek=function(e,t){var n=this;n.render=function(e,t){t&&a(e,t*7);var f=a(h(e),-((e.getDay()-r("firstDay")+7)%7)),l=a(h(f),7),c=h(f);s(c);var p=h(l);s(p,-1,true);var d=o();n.start=f;n.end=l;n.visStart=c;n.visEnd=p;n.title=u(c,a(h(p),-1),r("titleFormat"));i(1,d,false)};U.call(n,e,t,"basicWeek");var r=n.opt,i=n.renderBasic,s=n.skipHiddenDays,o=n.getCellsPerWeek,u=t.formatDates};lt.listWeek=function(e,t){var n=this;n.render=function(e,t){t&&a(e,t*7);var f=a(h(e),-((e.getDay()-r("firstDay")+7)%7)),l=a(h(f),7),c=h(f);s(c);var p=h(l);s(p,-1,true);var d=o();n.start=f;n.end=l;n.visStart=c;n.visEnd=p;n.title=u(c,a(h(p),-1),r("titleFormat"));i(1,d,false)};q.call(n,e,t,"listWeek");var r=n.opt,i=n.renderList,s=n.skipHiddenDays,o=n.getCellsPerWeek,u=t.formatDates};lt.basicDay=function(e,t){var n=this;n.render=function(e,t){t&&a(e,t);s(e,t<0?-1:1);var u=h(e,true),f=a(h(u),1);n.title=o(e,r("titleFormat"));n.start=n.visStart=u;n.end=n.visEnd=f;i(1,1,false)};U.call(n,e,t,"basicDay");var r=n.opt,i=n.renderBasic,s=n.skipHiddenDays,o=t.formatDate};n({weekMode:"fixed"});lt.agendaWeek=function(e,t){var n=this;n.render=function(e,t){t&&a(e,t*7);var f=a(h(e),-((e.getDay()-r("firstDay")+7)%7)),l=a(h(f),7),c=h(f);s(c);var p=h(l);s(p,-1,true);var d=o();n.title=u(c,a(h(p),-1),r("titleFormat"));n.start=f;n.end=l;n.visStart=c;n.visEnd=p;i(d)};W.call(n,e,t,"agendaWeek");var r=n.opt,i=n.renderAgenda,s=n.skipHiddenDays,o=n.getCellsPerWeek,u=t.formatDates};lt.agendaDay=function(e,t){var n=this;n.render=function(e,t){t&&a(e,t);s(e,t<0?-1:1);var u=h(e,true),f=a(h(u),1);n.title=o(e,r("titleFormat"));n.start=n.visStart=u;n.end=n.visEnd=f;i(1)};W.call(n,e,t,"agendaDay");var r=n.opt,i=n.renderAgenda,s=n.skipHiddenDays,o=t.formatDate};n({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,minDefaultDayStartHour:0,maxDefaultDayStartHour:24,slotEventOverlap:true})})(jQuery);var CCL;(function(e){var t={},n=function(){function e(e,n){if(typeof n==="undefined")n="";this._elem=$("#"+e);this._eventsPrefix=n;t[e]=this}e.GetInstanceForElement=function(e){return t[e]};e.prototype.Trigger=function(e){for(var t=[],n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];this._elem.trigger(this._eventsPrefix+e,t)};return e}();e.DomElementClass=n})(CCL||(CCL={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];n.prototype=t.prototype;e.prototype=new n};(function(e){e.PickerEvent={Initialized:"PickerInitialized",Added:"PickerFilesAdded",Started:"PickerUploadStarted",Stopped:"PickerUploadStopped",ResultsChanged:"PickerResultsChanged"};var t=function(e){function t(t,n){e.call(this,t);this._settings=n}__extends(t,e);t.prototype.EncodeFileName=function(e){return encodeURIComponent(e.replace("#","%23"))};t.prototype.GenerateGuidPart=function(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t};t.prototype.GenerateGuid=function(){return this.GenerateGuidPart(false)+this.GenerateGuidPart(true)+this.GenerateGuidPart(true)+this.GenerateGuidPart(false)};t.prototype.GetFileRepoUrl=function(e,t){return this.ReplaceUrlTokens(this._settings.FileRepoPath,e,t)};t.prototype.GetFileRepoProxy=function(e,t){return this.ReplaceUrlTokens(this._settings.FileRepoProxy,e,t)};t.prototype.GetFileRepoOrProxyUrl=function(e,t){var n=$.support.cors?this.GetFileRepoUrl(e,t):this.GetFileRepoProxy(e,t);n+=n.indexOf("?")>-1?"&":"?";n+="ts="+(new Date).getTime();return n};t.prototype.ReplaceUrlTokens=function(e,t,n){if(e.indexOf("{file}")!=-1)e=e.replace("{file}",this.EncodeFileName(t));if(e.indexOf("{guid}")!=-1)e=e.replace("{guid}",n||this.GenerateGuid());return e};t.prototype.ClearResults=function(){};t.prototype.AllowHide=function(){};return t}(e.DomElementClass);e.ItemPickerBase=t})(CCL||(CCL={}));(function(e){var t=function(t){function n(n,r){t.call(this,n,r);this._stateHidden=$("#"+this._settings.StateHiddenFieldClientId);this._resultsTable=$("#"+this._settings.FileListTableClientId);this._fileListItemTemplate=$("#"+this._settings.FileListItemTemplateId).html();this._checkFileDownloadCompleteTasks={};this.Init();this.Trigger(e.PickerEvent.Initialized);this.GetDropboxFiles().length>0&&this.Trigger(e.PickerEvent.ResultsChanged,{results:this.GetDropboxFiles()})}__extends(n,t);n.prototype.Init=function(){var e=this;if(!this._settings.ReadOnly){this._chooseButton=$(Dropbox.createChooseButton({success:function(t){if(!(e._elem.hasClass("disabled")||e._resultsTable.find("tr").length>0)){t=e.ConvertDropboxUploadResult(t);e.UpdateDropboxList(t);t.length>0&&e.AddFiles(t)}},linkType:"direct",multiselect:this._settings.MultiselectAllowed}));this._elem.append(this._chooseButton)}this.UpdateDropboxList(this.GetDropboxFiles())};n.prototype.ConvertDropboxUploadResult=function(e){if(!e)return[];return $.map(e,function(e){return{name:e.name,size:e.bytes,thumbnailUrl:e.thumbnailLink,dropBoxUrl:e.link,icon:e.icon}})};n.prototype.CheckAndSaveDropboxFiles=function(e){for(var t=e.length-1;t>=0;t--)if(e[t].size>this._settings.MaxFileSize){e.splice(t,1);alert(this._settings.FileSizeExceededText)}this.SetDropboxFiles(e);return e};n.prototype.SetDropboxFiles=function(e){this._stateHidden.val(JSON.stringify(e))};n.prototype.GetDropboxFiles=function(){return JSON.parse(this._stateHidden.val()||"[]")};n.prototype.UpdateDropboxList=function(t){var n=this;t=this.CheckAndSaveDropboxFiles(t);this._resultsTable.find("tbody").find("tr").each(function(){var e=$(this);e.find(".error").length===0&&e.remove()});if(t.length){this._settings.ReadOnly||this._chooseButton.hide();for(var r=0;r<t.length;r++){var i=t[r],s=this._fileListItemTemplate.replace("{file.name}",i.name).replace("{file.bytes}",e.Utils.FormatFileSize(i.size,this._settings.KbText,this._settings.MbText));s=$(s);var o=s.find("td.preview img");s.find("td.delete button").click(function(e){e=$(e.target).closest("tr");var t=e.find("td.name > span").text();n.RemoveFile(t,e);return false});i.thumbnailUrl?o.attr("src",i.thumbnailUrl):o.attr("src",i.icon).attr("height","24").attr("width","24");this._resultsTable.append(s)}}else this._settings.ReadOnly||this._chooseButton.show()};n.prototype.AddFiles=function(t){var n=this;this.Trigger(e.PickerEvent.Started);this.Trigger(e.PickerEvent.Added,{files:t});this._selectedFiles=t;this._uploadedFiles=[];t.forEach(function(e){if(e.error)n.SetFileErrorText(e,e.error);else{n.SetFileStatusText(e,n._settings.FileIsBeingDownloadedText+" 0%");var t="put",r=n.GenerateGuid(),i=n.GetFileRepoOrProxyUrl(e.name,r),s=i,o="";if(!$.support.cors){t="post";s+="&_method=put&"+n._settings.FileRepoHeaderDownloadFrom+"=true";o=n._settings.FileRepoHeaderDownloadFrom+"="+e.dropBoxUrl}var u={};u[n._settings.FileRepoHeaderDownloadFrom]=e.dropBoxUrl;$.ajax({url:s,type:t,dataType:"json",data:o,xhrFields:{withCredentials:true},headers:u,success:function(){var t=Math.max(Math.round(e.size/1e4),500);n._checkFileDownloadCompleteTasks[e.name]=setTimeout(function(){n.CheckFileDownloadComplete(i,r,e,t)},t)},error:function(){n.HandleError(e)}})}})};n.prototype.RemoveFile=function(t,n){for(var r=this.GetDropboxFiles(),i=r.length;i--;)if(r[i].name===t){r.splice(i,1);break}this.CheckAndSaveDropboxFiles(r);n.remove();if(!r.length||this._settings.MultiselectAllowed)this._settings.ReadOnly||this._chooseButton.show();if(this._checkFileDownloadCompleteTasks[t]){clearTimeout(this._checkFileDownloadCompleteTasks[t]);this._checkFileDownloadCompleteTasks[t]=null}r.length==0&&this.Trigger(e.PickerEvent.Stopped,{results:[]});this.Trigger(e.PickerEvent.ResultsChanged,{results:r})};n.prototype.CheckFileDownloadComplete=function(t,n,r,i){var s=this;$.ajax({url:t+"&"+this._settings.FileRepoInfoParam+"=true",type:"get",dataType:"json",xhrFields:{withCredentials:true},success:function(o){if(o.status==="DownloadCompleted"||o.status==="Available"){s._checkFileDownloadCompleteTasks[r.name]=null;r.id=o.fileId;r.name=o.fileName;r.type=o.mimeType;r.size=o.fileSize;r.fileUrl=s.GetFileRepoUrl(r.name,n);r.deleteUrl=s.GetFileRepoUrl(r.name,n);s._uploadedFiles.push(r);s.SetFileStatusText(r,"");if(s.AllUploadsFinished()){o=s.CheckAndSaveDropboxFiles(s._uploadedFiles);s.UpdateDropboxList(o);s.Trigger(e.PickerEvent.ResultsChanged,{results:o});s.Trigger(e.PickerEvent.Stopped,{results:o})}}else{o.status==="Downloading"&&s.SetFileStatusText(r,s._settings.FileIsBeingDownloadedText+" "+o.statusProgress+"%");s._checkFileDownloadCompleteTasks[r.name]=setTimeout(function(){s.CheckFileDownloadComplete(t,n,r,i)},i)}},error:function(){s.HandleError(r)}})};n.prototype.SetFileErrorText=function(e,t){this.SetFileStatusText(e,t);this._resultsTable.find('td.name > span:contains("'+e.name+'")').closest("tr").find("td.status").addClass("error")};n.prototype.SetFileStatusText=function(e,t){this._resultsTable.find('td.name > span:contains("'+e.name+'")').closest("tr").find("td.status > span").text(t)};n.prototype.HandleError=function(t){this.SetFileErrorText(t,this._settings.UploadErrorText);if(this._checkFileDownloadCompleteTasks[t.name]){clearTimeout(this._checkFileDownloadCompleteTasks[t.name]);this._checkFileDownloadCompleteTasks[t.name]=null}this.AllUploadsFinished()&&this._uploadedFiles.length>0&&this.Trigger(e.PickerEvent.Stopped,{results:this._uploadedFiles})};n.prototype.AllUploadsFinished=function(){var e=this,t=true;this._selectedFiles.forEach(function(n){if(e._checkFileDownloadCompleteTasks[n.name]&&e._checkFileDownloadCompleteTasks[n.name]!=null)t=false});return t};n.prototype.ClearResults=function(){var t=true;this._resultsTable.find("tbody").find("tr").each(function(){var e=$(this);if(e.hasClass("clearme")||e.find(".error").length===0)e.remove();else{t=false;e.addClass("clearme")}});t&&this._chooseButton.show();this.Trigger(e.PickerEvent.ResultsChanged,{results:[]})};n.prototype.AllowHide=function(){return this._resultsTable.find("tbody").find("tr .error").length===0};return n}(e.ItemPickerBase);e.DropboxPicker=t})(CCL||(CCL={}));(function(e){var t=function(t){function n(r,i){var s=this;t.call(this,r,i);n.confirmReplaceMessage=i.ConfirmReplaceMessageText;this.fileUploaderContainer=$(".ccl-fileuploader-container");this._elem.on("fileuploadstarted",function(){s.Trigger(e.PickerEvent.Started)}).on("fileuploadadd",function(){for(var t=[],n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];s.Trigger(e.PickerEvent.Added,t[0])}).on("fileuploadstopped",function(){for(var t=[],n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];t[0].results=s.fileUploaderContainer.fileupload("getUploadedFiles");s.Trigger(e.PickerEvent.Stopped,t[0])}).on("fileuploadresultschanged",function(){for(var t=[],n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];s.Trigger(e.PickerEvent.ResultsChanged,t[0])}).on("fileuploadsubmit",function(){for(var e=[],t=0;t<arguments.length-1;t++)e[t]=arguments[t+1];e=e[0];e.guid=s.GenerateGuid();e.url=s.GetFileRepoOrProxyUrl(e.files[0].name,e.guid);e.type="PUT";e.xhrFields={withCredentials:true}}).on("fileuploaddestroy",function(){for(var e=[],t=0;t<arguments.length-1;t++)e[t]=arguments[t+1];e=e[0];e.type="DELETE";e.xhrFields={withCredentials:true}}).on("fileuploaddone",function(){for(var e=[],t=0;t<arguments.length-1;t++)e[t]=arguments[t+1];e=e[0];t=e.result;t={deleteUrl:s.GetFileRepoUrl(e.files[0].name,e.guid),fileUrl:s.GetFileRepoUrl(e.files[0].name,e.guid),id:t.fileId,name:t.fileName,size:t.fileSize,type:t.mimeType,thumbnailUrl:i.DefaultThumbnailUrl};e.result.files=[t]});this.Trigger(e.PickerEvent.Initialized)}__extends(n,t);n.ConfirmReplaceFile=function(){return confirm(n.confirmReplaceMessage)};n.prototype.ClearResults=function(){this.fileUploaderContainer.fileupload("clearResults")};n.prototype.AllowHide=function(){return this.fileUploaderContainer.fileupload("allowHide")};return n}(e.ItemPickerBase);e.FilePicker=t})(CCL||(CCL={}));var tmpl;(function(e){e.FileRepoUploaderEvent={PickerChanged:"FileRepoUploaderPickerChanged",ResultsChanged:"FileRepoUploaderResultsChanged"};var t=function(t){function n(n,r){var i=this;t.call(this,n);this._pickers=[];this._inlineModeFileList=[];this._inlineModeFileKeys={};this._removedFiles=[];this._changedFiles={};this._settings=r;$("#"+this._settings.ControlTabsClientId).on(e.ControlTabsEvent.TabIndexChanged,function(){for(var t=[],n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];(t=i._pickers[t[0].selectedTab])&&i.Trigger(e.FileRepoUploaderEvent.PickerChanged,{selectedPicker:t})});this._elem.on(e.PickerEvent.Initialized,function(t){i._pickers.push(e.DomElementClass.GetInstanceForElement(t.target.id));i._pickers.length==1&&i._settings.IsEmpty&&i.Trigger(e.FileRepoUploaderEvent.PickerChanged,{selectedPicker:i._pickers[0]})});this._elem.on(e.PickerEvent.ResultsChanged,function(t){for(var n=[],r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];r=e.DomElementClass.GetInstanceForElement(t.target.id);n=n[0].results;var s=i._settings.ReadOnly?i.GetControlTabs().GetCurrentTab():i._pickers.indexOf(r);i.GetControlTabs().SetCurrentTab(s);i.HandleResultsChanges(n,s);i.Trigger(e.FileRepoUploaderEvent.ResultsChanged,{results:n,picker:r})});this._elem.on(e.PickerEvent.Started,function(t){for(var n=0;n<arguments.length-1;n++);n=e.DomElementClass.GetInstanceForElement(t.target.id);n=i._settings.ReadOnly?i.GetControlTabs().GetCurrentTab():i._pickers.indexOf(n);i.HandleResultsChanges([{}],n)});if(r.InlineMode){this._elem.on(e.PickerEvent.Added,function(){for(var e=[],t=0;t<arguments.length-1;t++)e[t]=arguments[t+1];r.UniqueFileNamesOnly&&e[0].files.forEach(function(e){i._filesContainer.find("td.name").toArray().forEach(function(t){if(t.innerText===e.name)if(confirm(r.FileAlreadyExistsDialogText.replace("{0}",e.name))){t=$(t).closest("."+r.FileListRowCssClass);var n=t.find("a."+r.RemoveActionCssClass);n=$(n).data("filekey");n=i.GetFileByKey(n);i.RemoveFile(n,t)}else e.error=r.FileAlreadyExistsErrorMessage})})});this._elem.on(e.PickerEvent.Stopped,function(t){for(var n=[],r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];i.UpdateFileList(n[0].results,true);i.UpdateFileListState(i._inlineModeFileList);n=n[0].results&&n[0].results.length>0&&i._expandableContainer.getIsExpandedState();r=e.DomElementClass.GetInstanceForElement(t.target.id);r.ClearResults();n&&r.AllowHide()&&i._expandableContainer.toggle()});this._elem.on("hybrideditoritemtextupdated",function(t){for(var n=[],s=0;s<arguments.length-1;s++)n[s]=arguments[s+1];s=$(t.target).closest("."+r.FileListRowCssClass).find("a."+r.RemoveActionCssClass);s=$(s).data("filekey");s=i.GetFileByKey(s);s.rawFilename=n[0].value;s.name=s.rawFilename;if(s.extension)s.name+=s.extension;i._changedFiles[s.fileUrl]=s;i._changedFilesStateHidden.val(JSON.stringify(i._changedFiles));i.UpdateFileListState(i._inlineModeFileList);n=i._pickers[i.GetControlTabs().GetCurrentTab()];i.Trigger(e.FileRepoUploaderEvent.ResultsChanged,{results:i._inlineModeFileList,picker:n})});this._expandableContainer=new ExpandableContainer(this._elem,{expander:$("#"+this._settings.ExpandableHeaderClientId),target:$("#"+this._settings.ExpandableContentClientId)});this._filesContainer=$("#"+r.FileListContainerId);this._filesContainer.on("click","."+this._settings.RemoveActionCssClass,function(e){var t=$(e.target).data("filekey");t=i.GetFileByKey(t);e=$(e.target).closest("."+i._settings.FileListRowCssClass);i.RemoveFile(t,e)});this._filesContainer.on("click","."+this._settings.ViewActionCssClass,function(e){e=$(e.target).data("filekey");e=i.GetFileByKey(e);i.OpenFile(e,true)});this._filesContainer.on("click","."+this._settings.EditActionCssClass,function(e){e=$(e.target).data("filekey");e=i.GetFileByKey(e);i.OpenFile(e,false)});this._filesContainer.on("click","."+this._settings.DownloadActionCssClass,function(e){e=$(e.target).data("filekey");e=i.GetFileByKey(e);i.DownloadFile(e)});$("#"+this._settings.ViewDialogId).on("click",".ccl-button-ok",function(){if(i._openedForEditing){var e=$(".ccl-cssmodal-modal-iframe").attr("src");$(".ccl-cssmodal-modal-iframe").attr("src",e)}});this._templatesContainer=document.createElement(this._filesContainer.prop("nodeName"));if(tmpl)this._fileListItemTemplate=tmpl(r.FileListItemTemplateId);this._fileListStateHidden=$("#"+this._settings.FileListHiddenStateClientId);var s=this.ReadFileList();s.length>0&&this.UpdateFileList(s,false);this._changedFilesStateHidden=$("#"+this._settings.ChangedFilesHiddenStateClientId);this._removedFilesStateHidden=$("#"+this._settings.RemovedFilesHiddenStateClientId)}}__extends(n,t);n.prototype.RemoveFile=function(e,t){var n=this;if(e.deleteUrl)$.ajax({url:e.deleteUrl,type:"DELETE",xhrFields:{withCredentials:true},success:function(){n.RemoveFileFromList(e,t)}});else{this._removedFiles.push(e.fileUrl);this._removedFilesStateHidden.val(JSON.stringify(this._removedFiles));this.RemoveFileFromList(e,t)}};n.prototype.RemoveFileFromList=function(t,n){n.remove();if(this._changedFiles[t.fileUrl]){delete this._changedFiles[t.fileUrl];this._changedFilesStateHidden.val(JSON.stringify(this._changedFiles))}this._inlineModeFileList.splice(this._inlineModeFileList.indexOf(t),1);this.UpdateFileListState(this._inlineModeFileList);var r=this._pickers[this.GetControlTabs().GetCurrentTab()];this.Trigger(e.FileRepoUploaderEvent.ResultsChanged,{results:this._inlineModeFileList,picker:r})};n.prototype.OpenFile=function(e,t){var n=this._settings.ViewEditUrl;n=n.replace("{filePath}",encodeURI(e.fileUrl));n=n.replace("{fileName}",encodeURIComponent(e.name));n=n.replace("{viewOnly}",t.toString());var r;r=e.modified?new Date(e.modified):new Date;this._openedForEditing=!t;n=n.replace("{uniqueId}",this.convertToTicks(r).toString());r=this._settings.EditableMimeTypes.indexOf(e.type)>=0;var i=this.GetDialog();i.setTitle(e.name);i.setIframeUrl(n);i.openDialog(r)};n.prototype.convertToTicks=function(e){return 621355968e9+e.getTime()*1e4};n.prototype.DownloadFile=function(e){var t=e.fileUrl.indexOf("?")>-1?"&":"?";window.open(e.fileUrl+t+this._settings.DownloadQueryStringParam+"=true")};n.prototype.IsViewSupported=function(e){if(!e)return false;return this._settings.ViewMimeTypes.indexOf(e)>=0};n.prototype.IsEditingAllowed=function(e){if(!e)return false;return this._settings.EditableMimeTypes.indexOf(e)>=0&&this._settings.IsFileEditingAllowed};n.prototype.GetDialog=function(){return window[this._settings.ViewDialogId]};n.prototype.HandleResultsChanges=function(e,t){for(var n=this.GetControlTabs(),r=n.GetTabsCount(),i=e&&e.length>0,s=0;s<r;s++){n.SetTabEnabled(i?s==t:true,s);n.SetTabToolTip(s,this.GetTooltipForTab(i?t:s,s))}};n.prototype.GetTooltipForTab=function(e,t){return this._settings.DisabledTabTextForPickers.filter(function(t){return t.PickerIndex===e})[0].Tooltips.filter(function(e){return e.PickerIndex===t})[0].Tooltip};n.prototype.GetControlTabs=function(){if(!this._controlTabsControl)this._controlTabsControl=e.DomElementClass.GetInstanceForElement(this._settings.ControlTabsClientId);return this._controlTabsControl};n.prototype.ReadFileList=function(){return JSON.parse(this._fileListStateHidden.val()||"[]")};n.prototype.UpdateFileListState=function(e){this._fileListStateHidden.val(JSON.stringify(e))};n.prototype.UpdateFileList=function(e,t){var n=this,r=this;e.forEach(function(e){e.thumbnailUrl=r.GetFileIcon(e.name);n._inlineModeFileList.push(e);n._inlineModeFileKeys[e.id]=e;var t=e.name.split(".");if(t.length>1){e.rawFilename=t[0];if(t.length>2)for(var i=1;i<=t.length-2;i++)e.rawFilename+="."+t[i];e.extension="."+t[t.length-1]}else e.rawFilename=e.name});if(e&&e.length>0){var i=this.RenderTemplate(this._fileListItemTemplate,e,t);i.appendTo(this._filesContainer);t&&DropDownMenu.initialize();i.find("."+this._settings.ViewActionCssClass).filter(function(){var e=r.GetFileByKey($(this).data("filekey"));return!r.IsViewSupported(e.type)}).closest("li").hide();i.find("."+this._settings.EditActionCssClass).filter(function(){var e=r.GetFileByKey($(this).data("filekey"));return!r.IsEditingAllowed(e.type)}).closest("li").hide()}};n.prototype.RenderTemplate=function(e,t,n){if(!e)return $();e=e({files:t,delayMenuInit:n});if(e instanceof $)return e;return $(this._templatesContainer).html(e).children()};n.prototype.GetFileIcon=function(e){e=e.substring(e.indexOf(".")+1);if(this._settings.FileTypeIcons)return this._settings.FileTypeIcons[e]||this._settings.DefaultFileIcon};n.prototype.GetFileByKey=function(e){return this._inlineModeFileKeys[e]};n.prototype.GetFilenameEditorItemSettings=function(){return{editModeEnabled:"inline",inlineEditorOptions:{editFieldAutoWidth:false,editFieldDisplayInline:true,editFieldCssClass:this._settings.FileNameEditorCssClass}}};return n}(e.DomElementClass);e.FileRepoUploader=t})(CCL||(CCL={}));(function(e){var t=function(t){function n(n,r){var i=this;t.call(this,n,r);this._inputControl=$("#"+r.InputClientId);this._inputLabel=$("#"+r.LabelClientId);this._inputControl.on("keydown keyup change input propertychange",function(){i.NotifyResultChanged()});this.Trigger(e.PickerEvent.Initialized);this.GetResults()&&this.NotifyResultChanged()}__extends(n,t);n.prototype.GetResults=function(){return this._inputControl.val()||this._inputLabel.text()};n.prototype.NotifyResultChanged=function(){var t=[],n=this.GetResults();n&&t.push({fileUrl:n});this.Trigger(e.PickerEvent.ResultsChanged,{results:t})};return n}(e.ItemPickerBase);e.LinkPicker=t})(CCL||(CCL={}));(function(e){var t=function(){function e(){}e.FormatFileSize=function(e,t,n){if(e>=1048576)return(e/1048576).toFixed(2)+" "+n;return(e/1024).toFixed(2)+" "+t};return e}();e.Utils=t})(CCL||(CCL={}));(function(e){e.ControlTabsEvent={Initialized:"ControlTabsInitialized",TabIndexChanged:"ControlTabsSelectedIndexChanged"};var t=function(t){function n(e,n){t.call(this,e);this._settings=n;this.InitControls()}__extends(n,t);n.prototype.SetCurrentTab=function(e){this.GetCurrentTab()!==e&&$(this._tabItemLinks[e]).click()};n.prototype.GetCurrentTab=function(){return parseInt(this._selectedTabIndexHolder.val())};n.prototype.GetTabsCount=function(){return this._tabItemLinks.length};n.prototype.SetTabEnabled=function(e,t){if(e){$(this._tabItemLinks[t]).removeClass("disabled");$(this._mobileSelect.find("> option")[t]).prop("disabled",false)}else{$(this._tabItemLinks[t]).addClass("disabled");$(this._mobileSelect.find("> option")[t]).prop("disabled",true)}};n.prototype.SetTabToolTip=function(e,t){$(this._tabItemLinks[e]).attr("title",t)};n.prototype.InitControls=function(){var t=this;this._tabsList=this._elem.find("ul."+this._settings.TabsCssClass);this._mobileSelect=this._elem.find("select."+this._settings.TabsCssClass);this._selectedTabIndexHolder=this._elem.find("#"+this._settings.TabIndexHolderClientId);this._tabItemLinks=this._elem.find("ul > li > h2 > a");this._tabItemLinks.each(function(e,n){t.InitTabItem(e,n)});$(this._tabItemLinks[this._settings.CurrentlySelectedTabIndex]).click();this.Trigger(e.ControlTabsEvent.Initialized)};n.prototype.InitTabItem=function(e,t){var n=this,r=$(t);$(r.attr("href")).addClass(this._settings.TabContentCssClass).addClass(this._settings.ClearLeftCssClass).addClass(this._settings.HiddenTabCssClass);r.on("click",function(e){n.OnTabChanged(e)})};n.prototype.OnTabChanged=function(t){var n=this,r=$(t.currentTarget);if(r.hasClass("disabled"))return false;t=r.closest("li");r=$(r.attr("href"));var i=t.data("tabitemindex");this._tabsList.find("> li").removeClass(this._settings.ActiveTabCssClass);t.addClass(this._settings.ActiveTabCssClass);this._tabItemLinks.each(function(e,t){$($(t).attr("href")).addClass(n._settings.HiddenTabCssClass)});r.removeClass(this._settings.HiddenTabCssClass);this._mobileSelect.prop("selectedIndex",i);this._selectedTabIndexHolder.val(i);this.Trigger(e.ControlTabsEvent.TabIndexChanged,{selectedTab:i});return false};return n}(e.DomElementClass);e.ControlTabs=t})(CCL||(CCL={}));(function(e){var t=function(){function e(t,n,r){if(typeof r==="undefined")r=null;this._form=t;this._warningMessage=n;this._options=r;this._textInputs=t.find("input[type=text],textarea");this._checkboxesRadios=t.find("input[type=checkbox],input[type=radio]");this._selects=t.find("select");this._textInputs.each(function(t,n){var r=$(n);r.data(e.InitialValueDataKey,r.val())});this._checkboxesRadios.each(function(t,n){var r=$(n);r.data(e.InitialValueDataKey,r.is(":checked"))});this._selects.each(function(t,n){var r=$(n);r.data(e.InitialValueDataKey,r.find(":selected").val())});this.AttachHandler();t.submit($.proxy(this.DetachHandler,this));r&&r.cancelButtonId&&$(document.getElementById(r.cancelButtonId)).click($.proxy(this.DetachHandler,this))}e.prototype.IsDirty=function(){return this._form.data(e.DirtyFormDataKey)==1};e.prototype.SetDirty=function(t){t=t?1:0;this._form.data(e.DirtyFormDataKey,t);this._form.trigger("dirtyChanged",t)};e.prototype.AttachHandler=function(){if(!this._isAttached){var t=$.proxy(this.OnBeforeUnloadHandler,this);$(window).on(e.EventBeforeunload,t);this._isAttached=true}};e.prototype.DetachHandler=function(){if(this._isAttached){var t=$.proxy(this.OnBeforeUnloadHandler,this);$(window).off(e.EventBeforeunload,t);this._isAttached=false}};e.prototype.OnBeforeUnloadHandler=function(){var t=this.IsDirty();t||this._textInputs.each(function(n,r){var i=$(r);if(i.is(":visible")&&i.val()!=i.data(e.InitialValueDataKey)){t=true;return false}});t||this._checkboxesRadios.each(function(n,r){var i=$(r);if(i.is(":visible")&&i.is(":checked")!=i.data(e.InitialValueDataKey)){t=true;return false}});t||this._selects.each(function(n,r){var i=$(r);if(i.is(":visible")&&i.find(":selected").val()!=i.data(e.InitialValueDataKey)){t=true;return false}});this.SetDirty(t);if(t)return this._warningMessage};e.EventBeforeunload="beforeunload";e.InitialValueDataKey="InitialValue";e.DirtyFormDataKey="IsDirty";return e}();e.FormCheckBeforeUnload=t})(CCL||(CCL={}))